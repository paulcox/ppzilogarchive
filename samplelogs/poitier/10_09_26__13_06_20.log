<configuration time_of_day="1285499180.51" data_file="10_09_26__13_06_20.data">
  <conf>
    <aircraft name="BETH" ac_id="24" airframe="airframes/Poine/beth.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/dummy.xml" settings="settings/settings_beth.xml" gui_color="blue">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Dummy" LON0="1.27289" MAX_DIST_FROM_HOME="1000" GROUND_ALT="185" SECURITY_HEIGHT="25" QFU="270" ALT="250" LAT0="43.46223">
        <waypoints>
          <waypoint name="HOME" x="0.0" y="120.0" alt="250."/>
        </waypoints>
        <blocks/>
      </flight_plan>
      <airframe name="BETH">
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <section name="SUPERVISION" prefix="SUPERVISION_">
          <define name="MIN_MOTOR" value="2"/>
          <define name="MAX_MOTOR" value="210"/>
          <define name="TRIM_A" value="0"/>
          <define name="TRIM_E" value="0"/>
          <define name="TRIM_R" value="0"/>
        </section>
        <servos>
          <servo name="THROTTLE" no="0" min="1290" neutral="1290" max="1810"/>
          <servo name="ELEVATOR" no="1" min="1770" neutral="1457" max="970"/>
          <servo name="RUDDER" no="3" min="1040" neutral="1595" max="2040"/>
          <servo name="AILERON_LEFT" no="4" min="1000" neutral="1508" max="2000"/>
          <servo name="AILERON_RIGHT" no="5" min="1000" neutral="1527" max="2000"/>
        </servos>
        <section name="IMU" prefix="IMU_">
          <define name="GYRO_P_SIGN" value="-1"/>
          <define name="GYRO_Q_SIGN" value="1"/>
          <define name="GYRO_R_SIGN" value="1"/>
          <define name="GYRO_P_NEUTRAL" value="31288"/>
          <define name="GYRO_Q_NEUTRAL" value="32593"/>
          <define name="GYRO_R_NEUTRAL" value="32709"/>
          <define name="GYRO_P_SENS" value=" 0.943560" integer="16"/>
          <define name="GYRO_Q_SENS" value=" 0.926199" integer="16"/>
          <define name="GYRO_R_SENS" value=" 0.931912" integer="16"/>
          <define name="ACCEL_X_SIGN" value="1"/>
          <define name="ACCEL_Y_SIGN" value="1"/>
          <define name="ACCEL_Z_SIGN" value="1"/>
          <define name="ACCEL_X_NEUTRAL" value="32857"/>
          <define name="ACCEL_Y_NEUTRAL" value="32429"/>
          <define name="ACCEL_Z_NEUTRAL" value="32593"/>
          <define name="ACCEL_X_SENS" value="-2.58273701242" integer="16"/>
          <define name="ACCEL_Y_SENS" value="-2.54076215332" integer="16"/>
          <define name="ACCEL_Z_SENS" value="-2.57633620646" integer="16"/>
          <define name="MAG_X_SIGN" value="-43"/>
          <define name="MAG_Y_SIGN" value=" 49"/>
          <define name="MAG_Z_SIGN" value="-66"/>
          <define name="MAG_X_NEUTRAL" value="-43"/>
          <define name="MAG_Y_NEUTRAL" value=" 49"/>
          <define name="MAG_Z_NEUTRAL" value="-66"/>
          <define name="MAG_X_SENS" value=" 5.32718104135" integer="16"/>
          <define name="MAG_Y_SENS" value="-4.87857821202" integer="16"/>
          <define name="MAG_Z_SENS" value="-3.11986612709" integer="16"/>
          <define name="BODY_TO_IMU_PHI" value="RadOfDeg(  0.)"/>
          <define name="BODY_TO_IMU_THETA" value="RadOfDeg(  0.)"/>
          <define name="BODY_TO_IMU_PSI" value="RadOfDeg(  45.)"/>
          <define name="GYRO_P_CHAN" value="0"/>
          <define name="GYRO_Q_CHAN" value="4"/>
          <define name="GYRO_R_CHAN" value="1"/>
          <define name="ACCEL_X_CHAN" value="5"/>
          <define name="ACCEL_Y_CHAN" value="2"/>
          <define name="ACCEL_Z_CHAN" value="6"/>
        </section>
        <makefile>#
# main STM32
#
ARCH=stm32
ARCHI=stm32
#BOARD_CFG = \&quot;boards/lisa_l_1.0.h\&quot;
FLASH_MODE = JTAG
SRC_ARCH = $(ARCH)
SRC_BETH=beth
SRC_BOOZ=booz
SRC_BOOZ_ARCH=$(SRC_BOOZ)/arch/$(ARCH)
SRC_LISA=lisa
SRC_LISA_ARCH=$(SRC_LISA)/arch/$(ARCH)
main_stm32.ARCHDIR = stm32
#main_stm32.LDSCRIPT = $(SRC_ARCH)/stm32f103re_flash.ld
main_stm32.CFLAGS += -I$(SRC_LISA) -I$(SRC_BOOZ) -I$(SRC_BOOZ_ARCH) -I$(SRC_LISA_ARCH) -DPERIPHERALS_AUTO_INIT
main_stm32.CFLAGS += -DBOARD_CONFIG=\&quot;boards/lisa_l_1.0.h\&quot;
main_stm32.srcs = $(SRC_BETH)/main_stm32.c \
                  $(SRC_ARCH)/stm32_exceptions.c   \
                  $(SRC_ARCH)/stm32_vector_table.c
main_stm32.CFLAGS += -DUSE_LED
main_stm32.srcs += $(SRC_ARCH)/led_hw.c
main_stm32.CFLAGS += -DUSE_SYS_TIME -DSYS_TIME_LED=1
main_stm32.CFLAGS += -DPERIODIC_TASK_PERIOD=&apos;SYS_TICS_OF_SEC(1./512.)&apos;
main_stm32.srcs += sys_time.c $(SRC_ARCH)/sys_time_hw.c
main_stm32.CFLAGS += -DUSE_UART2 -DUART2_BAUD=B57600
main_stm32.srcs += $(SRC_ARCH)/uart_hw.c
main_stm32.CFLAGS += -DDOWNLINK -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_DEVICE=Uart2 
main_stm32.srcs += downlink.c pprz_transport.c
main_stm32.CFLAGS += -DUSE_OVERO_LINK
main_stm32.CFLAGS += -DOVERO_LINK_MSG_UP=AutopilotMessageBethUp -DOVERO_LINK_MSG_DOWN=AutopilotMessageBethDown
main_stm32.CFLAGS += -DOVERO_LINK_LED_OK=3 -DOVERO_LINK_LED_KO=4 -DUSE_DMA1_C2_IRQ
main_stm32.srcs += lisa/lisa_overo_link.c lisa/arch/stm32/lisa_overo_link_arch.c
#booz IMU
#main_stm32.CFLAGS += -DBOOZ_IMU_TYPE_H=\&quot;imu/booz_imu_b2.h\&quot;
#main_stm32.CFLAGS += -DIMU_B2_MAG_TYPE=IMU_B2_MAG_MS2001
#main_stm32.srcs += $(SRC_BOOZ)/booz_imu.c
#main_stm32.CFLAGS += -DUSE_SPI2 -DUSE_DMA1_C4_IRQ -DUSE_EXTI2_IRQ -DUSE_SPI2_IRQ
#main_stm32.srcs += $(SRC_BOOZ)/imu/booz_imu_b2.c $(SRC_BOOZ_ARCH)/imu/booz_imu_b2_arch.c
#main_stm32.srcs += $(SRC_BOOZ)/peripherals/booz_max1168.c $(SRC_BOOZ_ARCH)/peripherals/booz_max1168_arch.c
#main_stm32.srcs += $(SRC_BOOZ)/peripherals/booz_ms2001.c  $(SRC_BOOZ_ARCH)/peripherals/booz_ms2001_arch.c
#main_stm32.srcs += math/pprz_trig_int.c
#crista IMU
main_stm32.srcs += math/pprz_trig_int.c
main_stm32.CFLAGS += -DBOOZ_IMU_TYPE_H=\&quot;imu/booz_imu_crista.h\&quot; -DIMU_OVERRIDE_CHANNELS
main_stm32.srcs += $(SRC_BOOZ)/booz_imu.c             \
                        $(SRC_BOOZ)/imu/booz_imu_crista.c \
                        $(SRC_BOOZ_ARCH)/imu/booz_imu_crista_arch.c
main_stm32.CFLAGS += -DUSE_DMA1_C4_IRQ
main_stm32.srcs += $(SRC_BOOZ)/booz2_commands.c
main_stm32.srcs += $(SRC_BOOZ)/actuators/booz_actuators_asctec.c 
#\
#                             $(SRC_BOOZ_ARCH)/actuators/booz_actuators_asctec_arch.c
main_stm32.CFLAGS += -DACTUATORS_ASCTEC_DEVICE=i2c1
# -DBOOZ_START_DELAY=3  -DUSE_TIM2_IRQ
main_stm32.CFLAGS += -DUSE_I2C1
main_stm32.srcs += i2c.c $(SRC_ARCH)/i2c_hw.c
#main_stm32.CFLAGS += -DUSE_I2C2
#main_stm32.srcs += $(SRC_BETH)/bench_sensors_i2c.c
main_stm32.CFLAGS += -DUSE_CAN1 -DUSE_USB_LP_CAN1_RX0_IRQ -DUSE_CAN_EXT_ID
main_stm32.CFLAGS += \
	-DCAN_PRESCALER=11 \
	-DCAN_SJW_TQ=CAN_SJW_1tq \
	-DCAN_BS1_TQ=CAN_BS1_3tq \
	-DCAN_BS2_TQ=CAN_BS2_5tq \
	-DCAN_ERR_RESUME=DISABLE
main_stm32.srcs += can.c $(SRC_ARCH)/can_hw.c
main_stm32.srcs += $(SRC_BETH)/bench_sensors_can.c
#
# Coders handled by a Olimex stm32h103 dev board
#
main_coders.ARCHDIR = stm32
main_coders.LDSCRIPT = $(SRC_ARCH)/stm32f103rb_flash.ld
main_coders.OOCD_INTERFACE = olimex-arm-usb-ocd
main_coders.OOCD_BOARD = olimex_stm32_h103
#main_coders.CFLAGS += -DBOARD_CONFIG=\&quot;boards/olimex_stm32-h103.h\&quot;
main_coders.CFLAGS += -DBOARD_CONFIG=\&quot;boards/beth.h\&quot;
main_coders.CFLAGS += -I$(SRC_LISA) -I$(SRC_BOOZ) -I$(SRC_BOOZ_ARCH) -DPERIPHERALS_AUTO_INIT
main_coders.srcs = $(SRC_BETH)/main_coders.c \
                   $(SRC_ARCH)/stm32_exceptions.c   \
                   $(SRC_ARCH)/stm32_vector_table.c
main_coders.CFLAGS += -DUSE_LED
main_coders.srcs += $(SRC_ARCH)/led_hw.c
main_coders.CFLAGS += -DUSE_SYS_TIME -DSYS_TIME_LED=7
main_coders.CFLAGS += -DPERIODIC_TASK_PERIOD=&apos;SYS_TICS_OF_SEC(1./512.)&apos;
main_coders.srcs += sys_time.c $(SRC_ARCH)/sys_time_hw.c
main_coders.CFLAGS += -DUSE_UART1 -DUART1_BAUD=B57600
main_coders.srcs += $(SRC_ARCH)/uart_hw.c
main_coders.CFLAGS += -DDOWNLINK -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_DEVICE=Uart1 
main_coders.srcs += downlink.c pprz_transport.c
#main_coders.CFLAGS += -DUSE_I2C2
#main_coders.srcs += $(SRC_ARCH)/i2c_hw.c
main_coders.CFLAGS += -DUSE_CAN1 -DUSE_USB_LP_CAN1_RX0_IRQ  -DUSE_CAN_EXT_ID
main_coders.CFLAGS += \
	-DCAN_PRESCALER=11 \
	-DCAN_SJW_TQ=CAN_SJW_1tq \
	-DCAN_BS1_TQ=CAN_BS1_3tq \
	-DCAN_BS2_TQ=CAN_BS2_5tq \
	-DCAN_ERR_RESUME=DISABLE
main_coders.srcs += can.c $(SRC_ARCH)/can_hw.c
main_coders.srcs += $(SRC_BETH)/bench_sensors_can.c
#
# main Overo
#
USER =
#HOST = beth
#HOST = overo
#HOST = auto7
HOST = 192.168.2.11
#HOST= regis
#HOST = auto3
TARGET_DIR = ~
SRC_FMS=fms
main_overo.ARCHDIR = omap
main_overo.CFLAGS = -I. -I$(SRC_FMS)
main_overo.srcs  = $(SRC_BETH)/main_overo.c
main_overo.CFLAGS  += -DFMS_PERIODIC_FREQ=512
main_overo.srcs    += $(SRC_FMS)/fms_periodic.c
#main_overo.srcs    += $(SRC_FMS)/fms_serial_port.c
main_overo.LDFLAGS += -lrt
main_overo.srcs += $(SRC_FMS)/fms_spi_link.c
main_overo.CFLAGS += -DOVERO_LINK_MSG_UP=AutopilotMessageBethUp -DOVERO_LINK_MSG_DOWN=AutopilotMessageBethDown
main_overo.CFLAGS  += -DDOWNLINK -DDOWNLINK_TRANSPORT=UdpTransport
main_overo.srcs    += $(SRC_FMS)/udp_transport2.c downlink.c
main_overo.srcs    += $(SRC_FMS)/fms_network.c
main_overo.LDFLAGS += -levent -lm
main_overo.srcs    += $(SRC_BETH)/overo_gcs_com.c
main_overo.srcs    += $(SRC_BETH)/overo_file_logger.c
main_overo.srcs    += $(SRC_BETH)/overo_estimator.c
main_overo.CFLAGS  += -DCONTROLLER_H=\&quot;overo_controller.h\&quot;
main_overo.srcs    += $(SRC_BETH)/overo_controller.c
#
# overo uart test
#
overo_test_uart.ARCHDIR = omap
overo_test_uart.CFLAGS = -I. -I$(SRC_FMS) -I$(SRC_BETH)
overo_test_uart.srcs  = $(SRC_BETH)/overo_test_uart.c
overo_test_uart.CFLAGS  += -DFMS_PERIODIC_FREQ=500
overo_test_uart.srcs    += $(SRC_FMS)/fms_periodic.c
overo_test_uart.srcs    += $(SRC_FMS)/fms_serial_port.c
overo_test_uart.LDFLAGS += -lrt
overo_test_uart.CFLAGS  += -DDOWNLINK -DDOWNLINK_TRANSPORT=UdpTransport
overo_test_uart.srcs    += $(SRC_FMS)/udp_transport2.c downlink.c
overo_test_uart.srcs    += $(SRC_FMS)/fms_network.c
overo_test_uart.LDFLAGS += -levent -lm
overo_test_uart.srcs    += $(SRC_BETH)/overo_gcs_com.c
#overo_test_uart.CFLAGS  += -DUBX -DGPS -DUSE_UART0 -DUART0_BAUD=B9600 -DGPS_CONFIGURE -DUSER_GPS_CONFIGURE=\&quot;modules/gps_i2c/runtime_configure.h\&quot; -DGPS_BAUD=B38400 -DGPS_LINK=Uart0 -DGPS_USE_LATLONG
overo_test_uart.CFLAGS  += -DUBX -DGPS -DUSE_UART0 -DUART0_BAUD=B9600 -DGPS_CONFIGURE -DGPS_BAUD=B38400 -DGPS_LINK=Uart0 -DGPS_USE_LATLONG
overo_test_uart.srcs    += gps_ubx.c gps.c latlong.c $(SRC_BETH)/uart_hw.c
overo_test_uart.CFLAGS  +=-DUSE_UART1 -DUART1_BAUD=B57600 -DDOWNLINK_DEVICE=Uart1 -DPPRZ_UART=Uart1 -DDATALINK=PPRZ 
overo_test_uart.srcs    += pprz_transport.c datalink.c
#
# Overo twisting
#
overo_twist.ARCHDIR = omap
overo_twist.CFLAGS = -I. -I$(SRC_FMS)
overo_twist.srcs  = $(SRC_BETH)/main_overo.c
overo_twist.CFLAGS  += -DFMS_PERIODIC_FREQ=512
overo_twist.srcs    += $(SRC_FMS)/fms_periodic.c
overo_twist.srcs    += $(SRC_FMS)/fms_serial_port.c
overo_twist.LDFLAGS += -lrt
overo_twist.srcs += $(SRC_FMS)/fms_spi_link.c
overo_twist.CFLAGS += -DOVERO_LINK_MSG_UP=AutopilotMessageBethUp -DOVERO_LINK_MSG_DOWN=AutopilotMessageBethDown
overo_twist.CFLAGS  += -DDOWNLINK -DDOWNLINK_TRANSPORT=UdpTransport
overo_twist.srcs    += $(SRC_FMS)/udp_transport2.c downlink.c
overo_twist.srcs    += $(SRC_FMS)/fms_network.c
overo_twist.LDFLAGS += -levent -lm
overo_twist.srcs    += $(SRC_BETH)/overo_gcs_com.c
overo_twist.srcs    += $(SRC_BETH)/overo_file_logger.c
overo_twist.srcs    += $(SRC_BETH)/overo_estimator.c
overo_twist.CFLAGS  += -DCONTROLLER_H=\&quot;overo_twist_controller.h\&quot;
overo_twist.srcs    += $(SRC_BETH)/overo_twist_controller.c
#
# Overo state feedback
#
overo_sfb.ARCHDIR = omap
overo_sfb.CFLAGS = -I. -I$(SRC_FMS)
overo_sfb.srcs  = $(SRC_BETH)/main_overo.c
overo_sfb.CFLAGS  += -DFMS_PERIODIC_FREQ=512
overo_sfb.srcs    += $(SRC_FMS)/fms_periodic.c
overo_sfb.srcs    += $(SRC_FMS)/fms_serial_port.c
overo_sfb.LDFLAGS += -lrt
overo_sfb.srcs += $(SRC_FMS)/fms_spi_link.c
overo_sfb.CFLAGS += -DOVERO_LINK_MSG_UP=AutopilotMessageBethUp -DOVERO_LINK_MSG_DOWN=AutopilotMessageBethDown
overo_sfb.CFLAGS  += -DDOWNLINK -DDOWNLINK_TRANSPORT=UdpTransport
overo_sfb.srcs    += $(SRC_FMS)/udp_transport2.c downlink.c
overo_sfb.srcs    += $(SRC_FMS)/fms_network.c
overo_sfb.LDFLAGS += -levent 
overo_sfb.LDFLAGS += -lm
overo_sfb.srcs    += $(SRC_BETH)/overo_gcs_com.c
overo_sfb.srcs    += $(SRC_BETH)/overo_file_logger.c
overo_sfb.srcs    += $(SRC_BETH)/overo_estimator.c
overo_sfb.CFLAGS  += -DCONTROLLER_H=\&quot;overo_sfb_controller.h\&quot;
overo_sfb.srcs    += $(SRC_BETH)/overo_sfb_controller.c
#
#
#
include $(PAPARAZZI_SRC)/conf/autopilot/lisa_test_progs.makefile</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="Controller">
            <dl_setting STEP="1" SHORTNAME="mode" MODULE="beth/overo_twist_controller" MIN="0" VAR="controller.armed" MAX="2"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="DEMO_MODULE" ac_id="5" airframe="airframes/demo_module.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/demo_module.xml" settings="settings/basic.xml" gui_color="blue">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Demo module" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;modules.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100" X="0"/>
        </waypoints>
        <exceptions/>
        <blocks>
          <block NAME="Kill">
            <set VAR="kill_throttle" VALUE="1"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Periodic 1Hz">
            <set VAR="demo_module_periodic_10Hz_demo_status" VALUE="MODULES_STOP"/>
            <set VAR="demo_module_periodic_1Hz_demo_status" VALUE="MODULES_START"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Periodic 10Hz">
            <set VAR="demo_module_periodic_1Hz_demo_status" VALUE="MODULES_STOP"/>
            <set VAR="demo_module_periodic_10Hz_demo_status" VALUE="MODULES_START"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Stop all">
            <set VAR="demo_module_periodic_10Hz_demo_status" VALUE="MODULES_STOP"/>
            <set VAR="demo_module_periodic_1Hz_demo_status" VALUE="MODULES_STOP"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Standby" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Demo module on Tiny2.1">
        <modules>
          <load NAME="demo_module.xml"/>
        </modules>
        <servos>
          <servo NEUTRAL="1000" MAX="2000" NAME="MOTOR_LEFT" NO="3" MIN="1000"/>
          <servo NEUTRAL="1000" MAX="2000" NAME="MOTOR_RIGHT" NO="4" MIN="1000"/>
          <servo NEUTRAL="1500" MAX="1100" NAME="AILEVON_LEFT" NO="6" MIN="1900"/>
          <servo NEUTRAL="1500" MAX="1900" NAME="AILEVON_RIGHT" NO="7" MIN="1100"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
          <set COMMAND="YAW" VALUE="@YAW"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILEVON_AILERON_RATE" VALUE="0.75"/>
          <define NAME="AILEVON_ELEVATOR_RATE" VALUE="0.75"/>
        </section>
        <command_laws>
          <let VAR="aileron" VALUE="@ROLL  * AILEVON_AILERON_RATE"/>
          <let VAR="elevator" VALUE="@PITCH * AILEVON_ELEVATOR_RATE"/>
          <let VAR="yaw" VALUE="@YAW"/>
          <set VALUE="@THROTTLE - $yaw" SERVO="MOTOR_LEFT"/>
          <set VALUE="@THROTTLE + $yaw" SERVO="MOTOR_RIGHT"/>
          <set VALUE="$elevator + $aileron" SERVO="AILEVON_LEFT"/>
          <set VALUE="$elevator - $aileron" SERVO="AILEVON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.85"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_1"/>
          <define NAME="IR2" VALUE="ADC_2"/>
          <define NAME="IR_TOP" VALUE="ADC_0"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="512"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1."/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="IR1_SIGN" VALUE="-1"/>
          <define NAME="IR2_SIGN" VALUE="1"/>
          <define NAME="TOP_SIGN" VALUE="1"/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="0."/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="0."/>
          <define NAME="CORRECTION_UP" VALUE="1."/>
          <define NAME="CORRECTION_DOWN" VALUE="1."/>
          <define NAME="CORRECTION_LEFT" VALUE="1."/>
          <define NAME="CORRECTION_RIGHT" VALUE="1."/>
        </section>
        <section NAME="BAT">
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="12."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="80."/>
          <define NAME="MIN_CIRCLE_RADIUS" VALUE="50."/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL" VALUE="11.1"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.04"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.35"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.3"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.80"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-1000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.02"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.1"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.05"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="0.075"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1."/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.7"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="PITCH_PGAIN" VALUE="-6000."/>
          <define NAME="PITCH_DGAIN" VALUE="0."/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="2500"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-7500"/>
          <define NAME="ROLL_RATE_GAIN" VALUE="-1500"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
          <define NAME="NAV_CROSS_TRACK_ERROR_IGAIN" VALUE="0."/>
          <define UNIT="deg" NAME="NAV_CROSS_TRACK_ERROR_MAX" VALUE="10."/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.7"/>
          <define NAME="CLIMB_PITCH" VALUE="0.25"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.15"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="1"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
        <makefile>CONFIG = \&quot;tiny_2_1_1.h\&quot;
include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=$(CONFIG) -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c 
ap.srcs += commands.c
########## RC actuators + radio
ap.CFLAGS += -DACTUATORS=\&quot;servos_4017_hw.h\&quot; -DSERVOS_4017
ap.srcs += $(SRC_ARCH)/servos_4017_hw.c actuators.c
ap.CFLAGS += -DRADIO_CONTROL
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c  
########## Modem
ap.CFLAGS += -DDOWNLINK -DUSE_UART1 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_FBW_DEVICE=Uart1 -DDOWNLINK_AP_DEVICE=Uart1 -DPPRZ_UART=Uart1 -DDATALINK=PPRZ -DUART1_BAUD=B9600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c pprz_transport.c
########## ADC
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_2 -DUSE_ADC_3
ap.srcs += $(SRC_ARCH)/adc_hw.c
########## GPS
ap.CFLAGS += -DGPS -DUBX -DUSE_UART0 -DGPS_LINK=Uart0 -DUART0_BAUD=B38400 -DGPS_USE_LATLONG
ap.srcs += gps_ubx.c gps.c latlong.c
########## IR sensors
ap.CFLAGS += -DINFRARED -DALT_KALMAN
ap.srcs += infrared.c estimator.c
########## Nav
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c
ap.srcs += nav_survey_rectangle.c
ap.srcs += nav_line.c
# Config for SITL simulation
include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN
sim.srcs += nav_line.c nav_survey_rectangle.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="nav_course" MAX="360"/>
            <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-10" VAR="nav_shift" MAX="10"/>
            <dl_setting STEP="1" HANDLER="ResetFlightTimeAndLaunch" SHORTNAME="flight time" MODULE="autopilot" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="estimator" MIN="0" VAR="pprz_mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" MAX="2"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
          </dl_settings>
          <dl_settings NAME="Infrared">
            <dl_setting STEP="1" PARAM="IR_ROLL_NEUTRAL_DEFAULT" ALT_UNIT="deg" SHORTNAME="roll neutral" MODULE="infrared" UNIT="rad" MIN="-15" VAR="ir_roll_neutral" MAX="15" ALT_UNIT_COEF="57.3"/>
            <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch neutral" MODULE="infrared" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="DROPS" ac_id="11" airframe="airframes/ENAC/fixed-wing/drops.xml" radio="radios/mc24.xml" telemetry="telemetry/fw_h_ctl_a.xml" flight_plan="flight_plans/basic.xml" settings="settings/tuning.xml settings/fw_h_ctl_a_settings.xml" gui_color="blue">
      <radio DATA_MAX="2200" SYNC_MAX="15000" PULSE_TYPE="NEGATIVE" NAME="mc24" DATA_MIN="800" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1096" MAX="1900" FUNCTION="THROTTLE" MIN="1096" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="1900" FUNCTION="ROLL" MIN="1096" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="1096" FUNCTION="PITCH" MIN="1900" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1500" MAX="1900" FUNCTION="YAW" MIN="1096" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="1900" FUNCTION="SWITCH1" MIN="1096" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1500" MAX="1900" FUNCTION="GAIN1" MIN="1096" AVERAGE="1"/>
        <channel CTL="F" NEUTRAL="1500" MAX="1900" FUNCTION="CALIB" MIN="1096" AVERAGE="0"/>
        <channel CTL="H" NEUTRAL="1500" MAX="2025" FUNCTION="MODE" MIN="966" AVERAGE="1"/>
        <channel CTL="I" NEUTRAL="1500" MAX="1900" FUNCTION="SWITCH2" MIN="1096" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="2" Y="139.1" X="132.3"/>
          <waypoint NAME="MOB" Y="-11.6" X="137.0"/>
          <waypoint NAME="S1" Y="69.6" X="-119.2"/>
          <waypoint NAME="S2" Y="209.5" X="274.4"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions>
          <exception COND="datalink_time > 22" DEROUTE="Standby"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" KEY="F8" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <circle WP="MOB" RADIUS="nav_radius"/>
          </block>
          <block NAME="Line 1-2" STRIP_ICON="line.png" STRIP_BUTTON="Line (wp 1-2)">
            <call FUN="nav_line_init()"/>
            <call FUN="nav_line(WP_1, WP_2, nav_radius)"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Path 1,2,S1,S2,STDBY" STRIP_ICON="path.png" STRIP_BUTTON="Path (1,2,S1,S2,STDBY)">
            <path WPTS="1,2 S1"/>
            <path APPROACHING_TIME="1" THROTTLE="0.4" PITCH="auto" WPTS="S1, S2 STDBY"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Drops K66">
        <servos>
          <servo NEUTRAL="1000" MAX="2000" NAME="MOTOR_LEFT" NO="0" MIN="1000"/>
          <servo NEUTRAL="1500" MAX="1100" NAME="AILERON_LEFT" NO="1" MIN="1900"/>
          <servo NEUTRAL="1500" MAX="1100" NAME="ELEVATOR" NO="2" MIN="1900"/>
          <servo NEUTRAL="1500" MAX="1900" NAME="RUDDER" NO="3" MIN="1100"/>
          <servo NEUTRAL="1500" MAX="1100" NAME="AILERON_RIGHT" NO="4" MIN="1900"/>
          <servo NEUTRAL="1860" MAX="1022" NAME="HATCH" NO="5" MIN="1860"/>
          <servo NEUTRAL="1000" MAX="2000" NAME="MOTOR_RIGHT" NO="6" MIN="1000"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="HATCH" FAILSAFE_VALUE="0"/>
          <axis NAME="GAIN1" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
          <set COMMAND="YAW" VALUE="@YAW"/>
          <set COMMAND="HATCH" VALUE="@CALIB"/>
          <set COMMAND="GAIN1" VALUE="@GAIN1"/>
        </rc_commands>
        <auto_rc_commands>
          <set COMMAND="YAW" VALUE="@YAW"/>
          <set COMMAND="GAIN1" VALUE="@GAIN1"/>
        </auto_rc_commands>
        <section NAME="MIXER">
          <define NAME="AILERON_DIFF" VALUE="0.8"/>
        </section>
        <command_laws>
          <set VALUE="@THROTTLE" SERVO="MOTOR_LEFT"/>
          <set VALUE="(@GAIN1 > 0 ? @THROTTLE : 0)" SERVO="MOTOR_RIGHT"/>
          <set VALUE="@PITCH" SERVO="ELEVATOR"/>
          <set VALUE="@YAW" SERVO="RUDDER"/>
          <let VAR="roll" VALUE="@ROLL"/>
          <set VALUE="($roll > 0 ? 1 : AILERON_DIFF) * $roll" SERVO="AILERON_LEFT"/>
          <set VALUE="($roll > 0 ? AILERON_DIFF : 1) * $roll" SERVO="AILERON_RIGHT"/>
          <set VALUE="@HATCH" SERVO="HATCH"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.85"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_1"/>
          <define NAME="IR2" VALUE="ADC_2"/>
          <define NAME="IR_TOP" VALUE="ADC_0"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
          <define NAME="GYRO_ROLL" VALUE="ADC_3"/>
          <define NAME="GYRO_NB_SAMPLES" VALUE="32"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="512"/>
          <define NAME="CORRECTION_UP" VALUE="1."/>
          <define NAME="CORRECTION_DOWN" VALUE="1."/>
          <define NAME="CORRECTION_LEFT" VALUE="1."/>
          <define NAME="CORRECTION_RIGHT" VALUE="1."/>
          <define NAME="LATERAL_CORRECTION" VALUE="-1"/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1"/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1.7"/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="IR1_SIGN" VALUE="1"/>
          <define NAME="IR2_SIGN" VALUE="-1"/>
          <define NAME="TOP_SIGN" VALUE="-1"/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="0"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="0"/>
        </section>
        <section NAME="GYRO" PREFIX="GYRO_">
          <define NAME="ADC_ROLL_NEUTRAL" VALUE="520"/>
          <define UNIT="deg/s" NAME="DYNAMIC_RANGE" VALUE="300"/>
          <define NAME="ADXRS300_RESISTOR_BRIDGE" VALUE="(3.3/(3.3+1.8))"/>
          <define UNIT="mV/(deg/s)" NAME="ADXRS300_SENSITIVITY" VALUE="5"/>
          <define UNIT="deg/s/adc_unit" NAME="ROLL_SCALE" VALUE="3.3*1000./1024./(GYRO_ADXRS300_SENSITIVITY*GYRO_ADXRS300_RESISTOR_BRIDGE)"/>
          <define NAME="ROLL_DIRECTION" VALUE="-1."/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="20000"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
          <define NAME="VoltageOfAdc(adc)" VALUE="(0.02454*adc)"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="MINIMUM_AIRSPEED" VALUE="10."/>
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="12."/>
          <define UNIT="m/s" NAME="MAXIMUM_AIRSPEED" VALUE="18."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="FALSE"/>
          <define NAME="TRIGGER_DELAY" VALUE="1."/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="120."/>
          <define NAME="MIN_CIRCLE_RADIUS" VALUE="50."/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.06"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.45"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.25"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.85"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1000"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-1200"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.2"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.023"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.101000003517"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.05"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.06"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="0.0"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="THROTTLE_SLEW" VALUE="0.1"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1.0340000391"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.60"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="ROLL_PGAIN" VALUE="6000."/>
          <define NAME="AILERON_OF_THROTTLE" VALUE="0.0"/>
          <define NAME="PITCH_PGAIN" VALUE="-8898.3046875"/>
          <define NAME="PITCH_DGAIN" VALUE="-1694.91503906"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="1520.73706055"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-5847.45800781"/>
          <define NAME="ROLL_RATE_GAIN" VALUE="-2923.72900391"/>
          <define NAME="ROLL_KFF" VALUE="-500"/>
          <define NAME="ROLL_IGAIN" VALUE="-5000"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="50"/>
          <define NAME="BLEND_END" VALUE="15"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.9"/>
          <define NAME="CLIMB_PITCH" VALUE="0.35"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.05"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.35"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="GYRO_GAINS">
          <define NAME="GYRO_MAX_RATE" VALUE="200."/>
          <define NAME="ROLLRATESUM_NB_SAMPLES" VALUE="64"/>
          <define NAME="ALT_ROLL__PGAIN" VALUE="1.0"/>
          <define NAME="ROLL_RATE_PGAIN" VALUE="1000.0"/>
          <define NAME="ROLL_RATE_IGAIN" VALUE="0.0"/>
          <define NAME="ROLL_RATE_DGAIN" VALUE="0.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="2"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
        <section NAME="DATALINK" PREFIX="DATALINK_">
          <define NAME="DEVICE_TYPE" VALUE="XBEE"/>
          <define NAME="DEVICE_ADDRESS" VALUE="...."/>
        </section>
        <makefile>CONFIG = \&quot;tiny_2_1.h\&quot;
include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=$(CONFIG) -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
ap.CFLAGS += -DACTUATORS=\&quot;servos_4017_hw.h\&quot; -DSERVOS_4017
ap.srcs += $(SRC_ARCH)/servos_4017_hw.c actuators.c
ap.CFLAGS += -DRADIO_CONTROL -DRADIO_CONTROL_AUTO1
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c
ap.CFLAGS += -DDOWNLINK -DUSE_UART1 -DDOWNLINK_TRANSPORT=XBeeTransport -DXBEE_UART=Uart1 -DDATALINK=XBEE -DUART1_BAUD=B57600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c xbee.c
#TRANSPARENT
#ap.CFLAGS += -DDOWNLINK -DUSE_UART1 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_FBW_DEVICE=Uart1 -DDOWNLINK_AP_DEVICE=Uart1 -DPPRZ_UART=Uart1 -DDATALINK=PPRZ -DUART1_BAUD=B9600
#ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c pprz_transport.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_2 -DUSE_ADC_3
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DGYRO -DADXRS150
ap.srcs += gyro.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART0 -DGPS_LINK=Uart0 -DUART0_BAUD=B38400 -DGPS_USE_LATLONG
# -DGPS_LED=2
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED -DALT_KALMAN -DWIND_INFO -DWIND_INFO_RET
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM
ap.srcs += nav.c fw_h_ctl_a.c fw_v_ctl.c
ap.srcs += nav_line.c
ap.srcs += nav_survey_rectangle.c
ap.srcs += bomb.c
ap.srcs += snav.c
# Config for SITL simulation
# include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.ARCHDIR = $(ARCHI)
sim.ARCH = sitl
sim.CFLAGS += -DSITL -DAP -DFBW -DRADIO_CONTROL -DINTER_MCU -DDOWNLINK -DDOWNLINK_TRANSPORT=IvyTransport -DINFRARED -DNAV -DLED -DWIND_INFO
sim.srcs = latlong.c radio_control.c downlink.c commands.c gps.c inter_mcu.c infrared.c fw_h_ctl_a.c fw_v_ctl.c nav.c estimator.c sys_time.c main_fbw.c main_ap.c datalink.c $(SRC_ARCH)/ppm_hw.c $(SRC_ARCH)/sim_gps.c $(SRC_ARCH)/sim_ir.c $(SRC_ARCH)/sim_ap.c $(SRC_ARCH)/ivy_transport.c $(SRC_ARCH)/sim_adc_generic.c $(SRC_ARCH)/led_hw.c
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN
sim.srcs += nav_line.c nav_survey_rectangle.c
sim.srcs += bomb.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="0.1"/>
            <message NAME="H_CTL_A" PERIOD="0.1"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="0.2"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="0.2"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
          </mode>
          <mode NAME="debug">
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="TUNE_ROLL" PERIOD="0.2"/>
            <message NAME="DEBUG_MCU_LINK" PERIOD="5."/>
            <message NAME="ADC" PERIOD="0.5"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="0.1"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="stage_time" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MODULE="downlink" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" PARAM="IR_ROLL_NEUTRAL_DEFAULT" SHORTNAME="roll_neutral" UNIT="rad" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch_neutral" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LATERAL_CORRECTION" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LONGITUDINAL_CORRECTION" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_VERTICAL_CORRECTION" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_LEFT" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_RIGHT" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_UP" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_DOWN" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="0" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" PARAM="H_CTL_ROLL_MAX_SETPOINT" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="1"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_PGAIN" SHORTNAME="pitch_pgain" MIN="-55000" VAR="h_ctl_pitch_pgain" MAX="0"/>
              <dl_setting STEP="10" PARAM="H_CTL_PITCH_DGAIN" SHORTNAME="pitch_dgain" MIN="-50000" VAR="h_ctl_pitch_dgain" MAX="0"/>
              <dl_setting STEP="100" PARAM="H_CTL_ELEVATOR_OF_ROLL" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_RATE_GAIN" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" PARAM="V_CTL_ALTITUDE_PGAIN" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.005" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" PARAM="V_CTL_AUTO_THROTTLE_LOITER_TRIM" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_PGAIN" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_IGAIN" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" PARAM="H_CTL_COURSE_PGAIN" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" PARAM="NAV_GLIDE_PITCH_TRIM" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="1" MIN="1" VAR="nav_mode" MAX="2"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="1" MIN="-20" VAR="fp_pitch" MAX="20"/>
              <dl_setting STEP="0.1" MIN="0" VAR="fp_throttle" MAX="1"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="5" VAR="nav_ground_speed_setpoint" MAX="50"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.2" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="fw_h_ctl_a">
            <dl_setting STEP="10" SHORTNAME="roll_Kffa" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_roll_Kffa" MAX="0"/>
            <dl_setting STEP="10" SHORTNAME="roll_Kffd" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_roll_Kffd" MAX="0"/>
            <dl_setting STEP="10" SHORTNAME="pitch_Kffa" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_pitch_Kffa" MAX="0"/>
            <dl_setting STEP="10" SHORTNAME="pitch_Kffd" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_pitch_Kffd" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetRollIGain" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_roll_igain" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetPitchIGain" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_pitch_igain" MAX="0"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="FJ1" ac_id="13" airframe="airframes/ENAC/fixed-wing/funjet1.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/climb.xml" settings="settings/tuning.xml" gui_color="#f08d1ff61ff6">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions/>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 10)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Climb +8">
            <exception COND="estimator_z > ground_alt+2100" DEROUTE="Descent -8"/>
            <set VAR="fp_throttle" VALUE="1."/>
            <set VAR="fp_pitch" VALUE="17.7"/>
            <set VAR="nav_radius" VALUE="200"/>
            <circle THROTTLE="fp_throttle" WP="1" PITCH="fp_pitch" RADIUS="nav_radius" VMODE="throttle"/>
          </block>
          <block NAME="Descent -8">
            <exception COND="ground_alt+50 > estimator_z " DEROUTE="Standby"/>
            <set VAR="fp_throttle" VALUE="0.0"/>
            <set VAR="fp_pitch" VALUE="-20"/>
            <circle THROTTLE="fp_throttle" WP="1" PITCH="fp_pitch" RADIUS="nav_radius" VMODE="throttle"/>
          </block>
          <block NAME="Climb +4">
            <exception COND="estimator_z > ground_alt+2100" DEROUTE="Descent -4"/>
            <set VAR="fp_throttle" VALUE="0.9"/>
            <set VAR="fp_pitch" VALUE="7.6"/>
            <set VAR="nav_radius" VALUE="200"/>
            <circle THROTTLE="fp_throttle" WP="1" PITCH="fp_pitch" RADIUS="nav_radius" VMODE="throttle"/>
          </block>
          <block NAME="Descent -4">
            <exception COND="ground_alt+50 > estimator_z " DEROUTE="Standby"/>
            <set VAR="fp_throttle" VALUE="0.0"/>
            <set VAR="fp_pitch" VALUE="-11.2"/>
            <circle THROTTLE="fp_throttle" WP="1" PITCH="fp_pitch" RADIUS="nav_radius" VMODE="throttle"/>
          </block>
          <block NAME="Climb +2">
            <exception COND="estimator_z > ground_alt+2100" DEROUTE="Descent -2"/>
            <set VAR="fp_throttle" VALUE="0.68"/>
            <set VAR="fp_pitch" VALUE="3.5"/>
            <set VAR="nav_radius" VALUE="200"/>
            <circle THROTTLE="fp_throttle" WP="1" PITCH="fp_pitch" RADIUS="nav_radius" VMODE="throttle"/>
          </block>
          <block NAME="Descent -2">
            <exception COND="ground_alt+50 > estimator_z " DEROUTE="Standby"/>
            <set VAR="fp_throttle" VALUE="0.0"/>
            <set VAR="fp_pitch" VALUE="-5.4"/>
            <circle THROTTLE="fp_throttle" WP="1" PITCH="fp_pitch" RADIUS="nav_radius" VMODE="throttle"/>
          </block>
          <block NAME="Climb +1">
            <exception COND="estimator_z > ground_alt+2100" DEROUTE="Descent -1"/>
            <set VAR="fp_throttle" VALUE="0.64"/>
            <set VAR="fp_pitch" VALUE="0.4"/>
            <set VAR="nav_radius" VALUE="200"/>
            <circle THROTTLE="fp_throttle" WP="1" PITCH="fp_pitch" RADIUS="nav_radius" VMODE="throttle"/>
          </block>
          <block NAME="Descent -1">
            <exception COND="ground_alt+50 > estimator_z " DEROUTE="Standby"/>
            <set VAR="fp_throttle" VALUE="0.0"/>
            <set VAR="fp_pitch" VALUE="-2"/>
            <circle THROTTLE="fp_throttle" WP="1" PITCH="fp_pitch" RADIUS="nav_radius" VMODE="throttle"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Funjet 1 Tiny 2.1">
        <modules/>
        <servos>
          <servo NEUTRAL="1000" MAX="2000" NAME="MOTOR" NO="0" MIN="1000"/>
          <servo NEUTRAL="1570" MAX="1880" NAME="AILEVON_LEFT" NO="2" MIN="1130"/>
          <servo NEUTRAL="1450" MAX="1170" NAME="AILEVON_RIGHT" NO="6" MIN="1980"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="HATCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILEVON_AILERON_RATE" VALUE="0.75"/>
          <define NAME="AILEVON_ELEVATOR_RATE" VALUE="0.75"/>
        </section>
        <command_laws>
          <let VAR="aileron" VALUE="@ROLL  * AILEVON_AILERON_RATE"/>
          <let VAR="elevator" VALUE="@PITCH * AILEVON_ELEVATOR_RATE"/>
          <set VALUE="@THROTTLE" SERVO="MOTOR"/>
          <set VALUE="$elevator + $aileron" SERVO="AILEVON_LEFT"/>
          <set VALUE="$elevator - $aileron" SERVO="AILEVON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.85"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_1"/>
          <define NAME="IR2" VALUE="ADC_2"/>
          <define NAME="IR_TOP" VALUE="ADC_0"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
          <define NAME="GYRO_ROLL" VALUE="ADC_3"/>
          <define NAME="GYRO_NB_SAMPLES" VALUE="16"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="512"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1.5"/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="IR2_SIGN" VALUE="-1"/>
          <define NAME="TOP_SIGN" VALUE="-1"/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="-2.40642285347"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="5.09932422638"/>
          <define NAME="CORRECTION_UP" VALUE="1."/>
          <define NAME="CORRECTION_DOWN" VALUE="1."/>
          <define NAME="CORRECTION_LEFT" VALUE="1."/>
          <define NAME="CORRECTION_RIGHT" VALUE="1."/>
          <define NAME="I2C_DEFAULT_CONF" VALUE="0x1"/>
        </section>
        <section NAME="GYRO" PREFIX="GYRO_">
          <define NAME="ADC_ROLL_NEUTRAL" VALUE="520"/>
          <define NAME="ADC_TEMP_NEUTRAL" VALUE="476"/>
          <define NAME="ADC_TEMP_SLOPE" VALUE="0"/>
          <define UNIT="deg/s" NAME="DYNAMIC_RANGE" VALUE="300"/>
          <define NAME="ADXRS300_RESISTOR_BRIDGE" VALUE="(3.3/(3.3+1.8))"/>
          <define UNIT="mV/(deg/s)" NAME="ADXRS300_SENSITIVITY" VALUE="5"/>
          <define UNIT="deg/s/adc_unit" NAME="ROLL_SCALE" VALUE="3.3*1000./1024./(GYRO_ADXRS300_SENSITIVITY*GYRO_ADXRS300_RESISTOR_BRIDGE)"/>
          <define NAME="ROLL_DIRECTION" VALUE="-1."/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="2000"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="MINIMUM_AIRSPEED" VALUE="12."/>
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="22."/>
          <define UNIT="m/s" NAME="MAXIMUM_AIRSPEED" VALUE="28."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="TRIGGER_DELAY" VALUE="1."/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="80."/>
          <define NAME="MIN_CIRCLE_RADIUS" VALUE="50."/>
          <define NAME="UNLOCKED_HOME_MODE" VALUE="TRUE"/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.104000002146"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="3."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.3"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.25"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.80"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-1000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.0909999981523"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.00700000021607"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.0670000016689"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.0379999987781"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.0209999997169"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="0.203999996185"/>
          <define NAME="AUTO_PITCH_CLIMB_THROTTLE_INCREMENT" VALUE="0.148000001907"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="THROTTLE_SLEW" VALUE="0.5"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1.07799994946"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.805000007153"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="PITCH_PGAIN" VALUE="-14814.8154297"/>
          <define NAME="PITCH_DGAIN" VALUE="1.5"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="1000"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-8055.55615234"/>
          <define NAME="ROLL_RATE_GAIN" VALUE="-1004.78497314"/>
          <define NAME="ROLL_KFF" VALUE="-500"/>
          <define NAME="ROLL_IGAIN" VALUE="-500"/>
          <define NAME="PITCH_IGAIN" VALUE="-500"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.6"/>
          <define NAME="CLIMB_PITCH" VALUE="0.18"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.15"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="GYRO_GAINS">
          <define NAME="GYRO_MAX_RATE" VALUE="200."/>
          <define NAME="ROLLRATESUM_NB_SAMPLES" VALUE="64"/>
          <define NAME="ALT_ROLL__PGAIN" VALUE="1.0"/>
          <define NAME="ROLL_RATE_PGAIN" VALUE="1000.0"/>
          <define NAME="ROLL_RATE_IGAIN" VALUE="0.0"/>
          <define NAME="ROLL_RATE_DGAIN" VALUE="0.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="1"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
        <section NAME="SIMU">
          <define NAME="ROLL_RESPONSE_FACTOR" VALUE="15"/>
          <define UNIT="rad/s" NAME="MAX_ROLL_DOT" VALUE="10"/>
        </section>
        <section NAME="Digital camera telecommand">
          <define NAME="LED_6_BANK" VALUE="0"/>
          <define NAME="LED_6_PIN" VALUE="2"/>
          <define NAME="LED_7_BANK" VALUE="0"/>
          <define NAME="LED_7_PIN" VALUE="3"/>
          <define NAME="DC_SHUTTER_LED" VALUE="6"/>
          <define NAME="DC_ZOOM_LED" VALUE="7"/>
        </section>
        <makefile>CONFIG = \&quot;tiny_2_1.h\&quot;
include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=$(CONFIG) -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
ap.CFLAGS += -DACTUATORS=\&quot;servos_4017_hw.h\&quot; -DSERVOS_4017
ap.srcs += $(SRC_ARCH)/servos_4017_hw.c actuators.c
ap.CFLAGS += -DRADIO_CONTROL
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c  
#ap.CFLAGS += -DDOWNLINK -DUSE_UART1 -DDOWNLINK_TRANSPORT=XBeeTransport -DXBEE_UART=Uart1 -DDATALINK=XBEE -DUART1_BAUD=B9600
#ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c xbee.c
#TRANSPARENT
ap.CFLAGS += -DDOWNLINK -DUSE_UART1 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_FBW_DEVICE=Uart1 -DDOWNLINK_AP_DEVICE=Uart1 -DPPRZ_UART=Uart1 -DDATALINK=PPRZ -DUART1_BAUD=B9600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c pprz_transport.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c 
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_2 -DUSE_ADC_3
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART0 -DGPS_LINK=Uart0 -DUART0_BAUD=B38400
# -DGPS_LED=2
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED -DALT_KALMAN
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c
ap.CFLAGS += -DGYRO -DADXRS150
ap.srcs += gyro.c nav_line.c
ap.srcs += nav_survey_rectangle.c
# chemotaxis.c anemotaxis.c discsurvey.c
########## Barometer (SPI)
#ap.CFLAGS += -DUSE_SPI -DSPI_MASTER -DUSE_SPI_SLAVE0 -DUSE_BARO_MS5534A
#ap.srcs += spi.c $(SRC_ARCH)/spi_hw.c $(SRC_ARCH)/baro_MS5534A.c
########## Chemo sensor (I2C)
#ap.srcs += i2c.c $(SRC_ARCH)/i2c_hw.c
#ap.CFLAGS += -DUSE_I2C -DUSE_I2C0
# Digital camera
# Shutter: I2C SCL
# Zoom: I2C SDA
# ap.CFLAGS += -DDIGITAL_CAM
# ap.srcs += dc.c
ap.CFLAGS += -DUSE_MODULES
sim.CFLAGS += -DUSE_MODULES
# for infrared 
#ap.srcs += i2c.c $(SRC_ARCH)/i2c_hw.c
#ap.CFLAGS += -DUSE_I2C0 -DI2C0_SCLL=150 -DI2C0_SCLH=150
# Config for SITL simulation
#include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.ARCHDIR = $(ARCHI)
sim.ARCH = sitl
sim.CFLAGS += -DSITL -DAP -DFBW -DRADIO_CONTROL -DINTER_MCU -DDOWNLINK -DDOWNLINK_TRANSPORT=IvyTransport -DINFRARED -DNAV -DLED -DWIND_INFO
sim.srcs = latlong.c radio_control.c downlink.c commands.c gps.c inter_mcu.c infrared.c fw_h_ctl.c fw_v_ctl.c nav.c estimator.c sys_time.c main_fbw.c main_ap.c datalink.c $(SRC_ARCH)/ppm_hw.c $(SRC_ARCH)/sim_gps.c $(SRC_ARCH)/sim_ir.c $(SRC_ARCH)/sim_ap.c $(SRC_ARCH)/ivy_transport.c $(SRC_ARCH)/sim_adc_generic.c $(SRC_ARCH)/led_hw.c
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN
sim.srcs += nav_line.c nav_survey_rectangle.c
# -DENOSE
#sim.srcs += i2c.c $(SRC_ARCH)/i2c_hw.c
#sim.CFLAGS += -DUSE_I2C -DUSE_I2C0
# chemotaxis.c anemotaxis.c discsurvey.c $(SRC_ARCH)/sim_enose.c chemo_detect.c
#sim.CFLAGS += -DDIGITAL_CAM -DPOWER_SWITCH_LED=4
#sim.srcs += dc.c
# a test program to setup actuators 
setup_actuators.ARCHDIR = $(ARCHI)
setup_actuators.ARCH = arm7tdmi
setup_actuators.CFLAGS += -DFBW -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DLED -DTIME_LED=1 -DACTUATORS=\&quot;servos_4015_hw.h\&quot; -DSERVOS_4015 -DUSE_UART1 -DUART1_BAUD=B9600 -DDATALINK=PPRZ -DPPRZ_UART=Uart1
setup_actuators.srcs += sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c pprz_transport.c setup_actuators.c $(SRC_ARCH)/uart_hw.c $(SRC_ARCH)/servos_4015_hw.c main.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="stage_time" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MODULE="downlink" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" PARAM="IR_ROLL_NEUTRAL_DEFAULT" SHORTNAME="roll_neutral" UNIT="rad" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch_neutral" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LATERAL_CORRECTION" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LONGITUDINAL_CORRECTION" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_VERTICAL_CORRECTION" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_LEFT" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_RIGHT" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_UP" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_DOWN" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="0" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" PARAM="H_CTL_ROLL_MAX_SETPOINT" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="1"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_PGAIN" SHORTNAME="pitch_pgain" MIN="-55000" VAR="h_ctl_pitch_pgain" MAX="0"/>
              <dl_setting STEP="10" PARAM="H_CTL_PITCH_DGAIN" SHORTNAME="pitch_dgain" MIN="-50000" VAR="h_ctl_pitch_dgain" MAX="0"/>
              <dl_setting STEP="100" PARAM="H_CTL_ELEVATOR_OF_ROLL" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_RATE_GAIN" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" PARAM="V_CTL_ALTITUDE_PGAIN" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.005" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" PARAM="V_CTL_AUTO_THROTTLE_LOITER_TRIM" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_PGAIN" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_IGAIN" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" PARAM="H_CTL_COURSE_PGAIN" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" PARAM="NAV_GLIDE_PITCH_TRIM" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="1" MIN="1" VAR="nav_mode" MAX="2"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="1" MIN="-20" VAR="fp_pitch" MAX="20"/>
              <dl_setting STEP="0.1" MIN="0" VAR="fp_throttle" MAX="1"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="5" VAR="nav_ground_speed_setpoint" MAX="50"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.2" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="FJ2" ac_id="20" airframe="airframes/ENAC/fixed-wing/funjet2.xml" radio="radios/T9cap.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/basic.xml" settings="settings/ir_i2c.xml settings/light.xml settings/switchlight.xml settings/tuning.xml" gui_color="#163d3df4f703">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="NEGATIVE" NAME="T9cap" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="right_stick_horiz" NEUTRAL="1525" MAX="1114" FUNCTION="ROLL" MIN="1939" AVERAGE="0"/>
        <channel CTL="right_stick_vert" NEUTRAL="1518" MAX="1937" FUNCTION="PITCH" MIN="1112" AVERAGE="0"/>
        <channel CTL="left_stick_vert" NEUTRAL="1940" MAX="1115" FUNCTION="THROTTLE" MIN="1940" AVERAGE="0"/>
        <channel CTL="left_stick_horiz" NEUTRAL="1498" MAX="1115" FUNCTION="YAW" MIN="1940" AVERAGE="0"/>
        <channel CTL="switch_G" NEUTRAL="1525" MAX="969" FUNCTION="CALIB" MIN="2080" AVERAGE="10"/>
        <channel CTL="VRA" NEUTRAL="1520" MAX="2078" FUNCTION="GAIN1" MIN="970" AVERAGE="10"/>
        <channel CTL="VRC" NEUTRAL="1518" MAX="2077" FUNCTION="GAIN2" MIN="970" AVERAGE="10"/>
        <channel CTL="switch_C" NEUTRAL="1526" MAX="966" FUNCTION="MODE" MIN="2079" AVERAGE="10"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="2" Y="139.1" X="132.3"/>
          <waypoint NAME="MOB" Y="-11.6" X="137.0"/>
          <waypoint NAME="S1" Y="69.6" X="-119.2"/>
          <waypoint NAME="S2" Y="209.5" X="274.4"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions>
          <exception COND="datalink_time > 22" DEROUTE="Standby"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" KEY="F8" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <circle WP="MOB" RADIUS="nav_radius"/>
          </block>
          <block NAME="Line 1-2" STRIP_ICON="line.png" STRIP_BUTTON="Line (wp 1-2)">
            <call FUN="nav_line_init()"/>
            <call FUN="nav_line(WP_1, WP_2, nav_radius)"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Path 1,2,S1,S2,STDBY" STRIP_ICON="path.png" STRIP_BUTTON="Path (1,2,S1,S2,STDBY)">
            <path WPTS="1,2 S1"/>
            <path APPROACHING_TIME="1" THROTTLE="0.4" PITCH="auto" WPTS="S1, S2 STDBY"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Funjet Tiny 2.11">
        <modules>
          <load NAME="light.xml">
            <param NAME="LIGHT_LED_STROBE" VALUE="5"/>
            <param NAME="LIGHT_LED_NAV" VALUE="3"/>
          </load>
          <load NAME="infrared_i2c.xml"/>
          <load NAME="pbn.xml"/>
        </modules>
        <firmware NAME="fixedwing">
          <target NAME="sim" BOARD="pc">
            <define NAME="AGR_CLIMB"/>
            <define NAME="ALT_KALMAN"/>
            <define NAME="LOITER_TRIM"/>
            <define NAME="USE_I2C0"/>
          </target>
          <target NAME="ap" BOARD="tiny_2.11">
            <param NAME="FLASH_MODE" VALUE="IAP"/>
            <define NAME="AGR_CLIMB"/>
            <define NAME="ALT_KALMAN"/>
            <define NAME="LOITER_TRIM"/>
            <define NAME="USE_I2C0"/>
          </target>
          <subsystem NAME="radio_control" TYPE="ppm"/>
          <subsystem NAME="i2c"/>
          <subsystem NAME="telemetry" TYPE="transparent"/>
          <subsystem NAME="control"/>
          <subsystem NAME="gps" TYPE="ublox_lea5h"/>
          <subsystem NAME="gyro" TYPE="roll">
            <param NAME="ADC_GYRO_ROLL" VALUE="ADC_5"/>
          </subsystem>
          <subsystem NAME="current_sensor">
            <param NAME="ADC_CURRENT_SENSOR" VALUE="ADC_3"/>
          </subsystem>
          <subsystem NAME="navigation"/>
        </firmware>
        <firmware NAME="setup">
          <target NAME="tunnel" BOARD="tiny_2.11"/>
          <target NAME="setup_actuators" BOARD="tiny_2.11"/>
        </firmware>
        <servos>
          <servo NEUTRAL="1040" MAX="2000" NAME="MOTOR" NO="0" MIN="1040"/>
          <servo NEUTRAL="1500" MAX="1050" NAME="AILEVON_LEFT" NO="2" MIN="1900"/>
          <servo NEUTRAL="1500" MAX="1980" NAME="AILEVON_RIGHT" NO="6" MIN="1120"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILEVON_AILERON_RATE" VALUE="0.75"/>
          <define NAME="AILEVON_ELEVATOR_RATE" VALUE="0.75"/>
        </section>
        <command_laws>
          <let VAR="aileron" VALUE="@ROLL  * AILEVON_AILERON_RATE"/>
          <let VAR="elevator" VALUE="@PITCH * AILEVON_ELEVATOR_RATE"/>
          <set VALUE="@THROTTLE" SERVO="MOTOR"/>
          <set VALUE="$elevator + $aileron" SERVO="AILEVON_LEFT"/>
          <set VALUE="$elevator - $aileron" SERVO="AILEVON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.85"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="IR1_NEUTRAL" VALUE="-15"/>
          <define NAME="IR2_NEUTRAL" VALUE="0"/>
          <define NAME="TOP_NEUTRAL" VALUE="-20"/>
          <define NAME="I2C_DEFAULT_CONF" VALUE="1"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1"/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1"/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1"/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="IR1_SIGN" VALUE="1"/>
          <define NAME="IR2_SIGN" VALUE="1"/>
          <define NAME="TOP_SIGN" VALUE="1"/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="11."/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="1."/>
        </section>
        <section NAME="GYRO" PREFIX="GYRO_">
          <define NAME="ADC_ROLL_NEUTRAL" VALUE="487"/>
          <define NAME="ADXRS300_RESISTOR_BRIDGE" VALUE="(3.3/(3.3+1.8))"/>
          <define UNIT="mV/(deg/s)" NAME="ADXRS300_SENSITIVITY" VALUE="5"/>
          <define UNIT="deg/s/adc_unit" NAME="ROLL_SCALE" VALUE="3.3*1000./1024./(GYRO_ADXRS300_SENSITIVITY*GYRO_ADXRS300_RESISTOR_BRIDGE)"/>
          <define NAME="ROLL_DIRECTION" VALUE="1."/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="10000."/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
          <define NAME="MilliAmpereOfAdc(_adc)" VALUE="(_adc-156)*17.4"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="15."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="FALSE"/>
          <define NAME="TRIGGER_DELAY" VALUE="1."/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="80."/>
          <define NAME="MIN_CIRCLE_RADIUS" VALUE="50."/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.06"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="3."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.5"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.25"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.85"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1000"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-1000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.194000005722"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.01"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.04"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.109999999404"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.03"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="0.0"/>
          <define NAME="AUTO_PITCH_CLIMB_THROTTLE_INCREMENT" VALUE="0.14"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="THROTTLE_SLEW" VALUE="0.1"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1.6"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.8"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-12000."/>
          <define NAME="ROLL_RATE_GAIN" VALUE="-3000."/>
          <define NAME="PITCH_PGAIN" VALUE="-20000."/>
          <define NAME="PITCH_DGAIN" VALUE="0.4"/>
          <define NAME="AILERON_OF_THROTTLE" VALUE="0.0"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="1000"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="50"/>
          <define NAME="BLEND_END" VALUE="15"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.7"/>
          <define NAME="CLIMB_PITCH" VALUE="0.2"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.2"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="2"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
        <section NAME="SIMU">
          <define NAME="ROLL_RESPONSE_FACTOR" VALUE="15"/>
          <define UNIT="rad/s" NAME="MAX_ROLL_DOT" VALUE="20"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="IR I2C">
            <dl_setting STEP="1" HANDLER="SetConfWord" MODULE="sensors/infrared_i2c" MIN="0" VAR="ir_i2c_conf_word" VALUES="1|2|4|8" MAX="3"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings NAME="lights control">
          <dl_settings NAME="lights">
            <dl_setting STEP="1" MODULE="light/light" MIN="0" VAR="strobe_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3|COMPLEX_1|COMPLEX_2" MAX="6">
              <strip_button NAME="LightOn" VALUE="1" ICON="on.png"/>
              <strip_button NAME="LightOff" VALUE="0" ICON="off.png"/>
            </dl_setting>
            <dl_setting STEP="1" MIN="0" VAR="nav_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3" MAX="4"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings NAME="Power switch control">
          <dl_settings NAME="Power switch">
            <dl_setting STEP="1" HANDLER="SetPowerSwitch" MODULE="autopilot" MIN="0" VAR="power_switch" MAX="1">
              <strip_button NAME="Switch on" VALUE="0" ICON="on.png"/>
              <strip_button NAME="Switch off" VALUE="1" ICON="off.png"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="stage_time" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MODULE="downlink" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" PARAM="IR_ROLL_NEUTRAL_DEFAULT" SHORTNAME="roll_neutral" UNIT="rad" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch_neutral" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LATERAL_CORRECTION" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LONGITUDINAL_CORRECTION" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_VERTICAL_CORRECTION" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_LEFT" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_RIGHT" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_UP" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_DOWN" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="0" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" PARAM="H_CTL_ROLL_MAX_SETPOINT" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="1"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_PGAIN" SHORTNAME="pitch_pgain" MIN="-55000" VAR="h_ctl_pitch_pgain" MAX="0"/>
              <dl_setting STEP="10" PARAM="H_CTL_PITCH_DGAIN" SHORTNAME="pitch_dgain" MIN="-50000" VAR="h_ctl_pitch_dgain" MAX="0"/>
              <dl_setting STEP="100" PARAM="H_CTL_ELEVATOR_OF_ROLL" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_RATE_GAIN" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" PARAM="V_CTL_ALTITUDE_PGAIN" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.005" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" PARAM="V_CTL_AUTO_THROTTLE_LOITER_TRIM" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_PGAIN" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_IGAIN" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" PARAM="H_CTL_COURSE_PGAIN" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" PARAM="NAV_GLIDE_PITCH_TRIM" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="1" MIN="1" VAR="nav_mode" MAX="2"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="1" MIN="-20" VAR="fp_pitch" MAX="20"/>
              <dl_setting STEP="0.1" MIN="0" VAR="fp_throttle" MAX="1"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="5" VAR="nav_ground_speed_setpoint" MAX="50"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.2" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="FJN" ac_id="8" airframe="airframes/ENAC/fixed-wing/funjet1_n.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/basic.xml" settings="settings/basic.xml settings/fw_ctl_n.xml settings/fw_h_ctl_a_settings.xml" gui_color="blue">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="2" Y="139.1" X="132.3"/>
          <waypoint NAME="MOB" Y="-11.6" X="137.0"/>
          <waypoint NAME="S1" Y="69.6" X="-119.2"/>
          <waypoint NAME="S2" Y="209.5" X="274.4"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions>
          <exception COND="datalink_time > 22" DEROUTE="Standby"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" KEY="F8" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <circle WP="MOB" RADIUS="nav_radius"/>
          </block>
          <block NAME="Line 1-2" STRIP_ICON="line.png" STRIP_BUTTON="Line (wp 1-2)">
            <call FUN="nav_line_init()"/>
            <call FUN="nav_line(WP_1, WP_2, nav_radius)"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Path 1,2,S1,S2,STDBY" STRIP_ICON="path.png" STRIP_BUTTON="Path (1,2,S1,S2,STDBY)">
            <path WPTS="1,2 S1"/>
            <path APPROACHING_TIME="1" THROTTLE="0.4" PITCH="auto" WPTS="S1, S2 STDBY"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Funjet 1 Tiny 2.1">
        <modules/>
        <servos>
          <servo NEUTRAL="1000" MAX="2000" NAME="MOTOR" NO="0" MIN="1000"/>
          <servo NEUTRAL="1530" MAX="1880" NAME="AILEVON_LEFT" NO="2" MIN="1130"/>
          <servo NEUTRAL="1470" MAX="1170" NAME="AILEVON_RIGHT" NO="6" MIN="1980"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="HATCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILEVON_AILERON_RATE" VALUE="0.75"/>
          <define NAME="AILEVON_ELEVATOR_RATE" VALUE="0.75"/>
        </section>
        <command_laws>
          <let VAR="aileron" VALUE="@ROLL  * AILEVON_AILERON_RATE"/>
          <let VAR="elevator" VALUE="@PITCH * AILEVON_ELEVATOR_RATE"/>
          <set VALUE="@THROTTLE" SERVO="MOTOR"/>
          <set VALUE="$elevator + $aileron" SERVO="AILEVON_LEFT"/>
          <set VALUE="$elevator - $aileron" SERVO="AILEVON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.85"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_1"/>
          <define NAME="IR2" VALUE="ADC_2"/>
          <define NAME="IR_TOP" VALUE="ADC_0"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
          <define NAME="GYRO_ROLL" VALUE="ADC_3"/>
          <define NAME="GYRO_NB_SAMPLES" VALUE="16"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="512"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1.5"/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="IR2_SIGN" VALUE="-1"/>
          <define NAME="TOP_SIGN" VALUE="-1"/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="1.14591562748"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="3.38045096397"/>
          <define NAME="CORRECTION_UP" VALUE="1."/>
          <define NAME="CORRECTION_DOWN" VALUE="1."/>
          <define NAME="CORRECTION_LEFT" VALUE="1."/>
          <define NAME="CORRECTION_RIGHT" VALUE="1."/>
        </section>
        <section NAME="GYRO" PREFIX="GYRO_">
          <define NAME="ADC_ROLL_NEUTRAL" VALUE="520"/>
          <define NAME="ADC_TEMP_NEUTRAL" VALUE="476"/>
          <define NAME="ADC_TEMP_SLOPE" VALUE="0"/>
          <define UNIT="deg/s" NAME="DYNAMIC_RANGE" VALUE="300"/>
          <define NAME="ADXRS300_RESISTOR_BRIDGE" VALUE="(3.3/(3.3+1.8))"/>
          <define UNIT="mV/(deg/s)" NAME="ADXRS300_SENSITIVITY" VALUE="5"/>
          <define UNIT="deg/s/adc_unit" NAME="ROLL_SCALE" VALUE="3.3*1000./1024./(GYRO_ADXRS300_SENSITIVITY*GYRO_ADXRS300_RESISTOR_BRIDGE)"/>
          <define NAME="ROLL_DIRECTION" VALUE="-1."/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="2000"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="MINIMUM_AIRSPEED" VALUE="12."/>
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="15."/>
          <define UNIT="m/s" NAME="MAXIMUM_AIRSPEED" VALUE="25."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="TRIGGER_DELAY" VALUE="1."/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="80."/>
          <define NAME="MIN_CIRCLE_RADIUS" VALUE="50."/>
          <define NAME="UNLOCKED_HOME_MODE" VALUE="TRUE"/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.103000000119"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.35"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.25"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.80"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.092"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.006"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="-0.025"/>
          <define NAME="AUTO_THROTTLE_DGAIN" VALUE="-0"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.05"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.028"/>
          <define NAME="AUTO_PITCH_DGAIN" VALUE="-0"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="-0.034"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="PITCH_LOITER_TRIM" VALUE="RadOfDeg(5.)"/>
          <define NAME="PITCH_DASH_TRIM" VALUE="RadOfDeg(-5.)"/>
          <define NAME="THROTTLE_SLEW" VALUE="0.5"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1.20599997044"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.8"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-6101.69482422"/>
          <define NAME="ROLL_RATE_GAIN" VALUE="-1144.06799316"/>
          <define NAME="ROLL_IGAIN" VALUE="-500"/>
          <define NAME="ROLL_KFFA" VALUE="-500"/>
          <define NAME="ROLL_KFFD" VALUE="-500"/>
          <define NAME="PITCH_PGAIN" VALUE="-11554.6220703"/>
          <define NAME="PITCH_IGAIN" VALUE="-500"/>
          <define NAME="PITCH_DGAIN" VALUE="-5000"/>
          <define NAME="PITCH_KFFA" VALUE="0."/>
          <define NAME="PITCH_KFFD" VALUE="0."/>
          <define NAME="PITCH_OF_ROLL" VALUE="RadOfDeg(0.2)"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.6"/>
          <define NAME="CLIMB_PITCH" VALUE="0.20"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.15"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="GYRO_GAINS">
          <define NAME="GYRO_MAX_RATE" VALUE="200."/>
          <define NAME="ROLLRATESUM_NB_SAMPLES" VALUE="64"/>
          <define NAME="ALT_ROLL__PGAIN" VALUE="1.0"/>
          <define NAME="ROLL_RATE_PGAIN" VALUE="1000.0"/>
          <define NAME="ROLL_RATE_IGAIN" VALUE="0.0"/>
          <define NAME="ROLL_RATE_DGAIN" VALUE="0.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="1"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
        <section NAME="Digital camera telecommand">
          <define NAME="LED_6_BANK" VALUE="0"/>
          <define NAME="LED_6_PIN" VALUE="2"/>
          <define NAME="LED_7_BANK" VALUE="0"/>
          <define NAME="LED_7_PIN" VALUE="3"/>
          <define NAME="DC_SHUTTER_LED" VALUE="6"/>
          <define NAME="DC_ZOOM_LED" VALUE="7"/>
        </section>
        <makefile>CONFIG = \&quot;tiny_2_1.h\&quot;
include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=$(CONFIG) -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
ap.CFLAGS += -DACTUATORS=\&quot;servos_4017_hw.h\&quot; -DSERVOS_4017
ap.srcs += $(SRC_ARCH)/servos_4017_hw.c actuators.c
ap.CFLAGS += -DRADIO_CONTROL
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c  
#ap.CFLAGS += -DDOWNLINK -DUSE_UART1 -DDOWNLINK_TRANSPORT=XBeeTransport -DXBEE_UART=Uart1 -DDATALINK=XBEE -DUART1_BAUD=B9600
#ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c xbee.c
#TRANSPARENT
ap.CFLAGS += -DDOWNLINK -DUSE_UART1 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_FBW_DEVICE=Uart1 -DDOWNLINK_AP_DEVICE=Uart1 -DPPRZ_UART=Uart1 -DDATALINK=PPRZ -DUART1_BAUD=B9600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c pprz_transport.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c 
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_2 -DUSE_ADC_3
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART0 -DGPS_LINK=Uart0 -DUART0_BAUD=B38400
# -DGPS_LED=2
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED -DALT_KALMAN
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DPITCH_TRIM
ap.srcs += nav.c fw_h_ctl_a.c fw_v_ctl_n.c
ap.CFLAGS += -DGYRO -DADXRS150
ap.srcs += gyro.c nav_line.c
ap.srcs += nav_survey_rectangle.c
# chemotaxis.c anemotaxis.c discsurvey.c
########## Barometer (SPI)
#ap.CFLAGS += -DUSE_SPI -DSPI_MASTER -DUSE_SPI_SLAVE0 -DUSE_BARO_MS5534A
#ap.srcs += spi.c $(SRC_ARCH)/spi_hw.c $(SRC_ARCH)/baro_MS5534A.c
########## Chemo sensor (I2C)
#ap.srcs += i2c.c $(SRC_ARCH)/i2c_hw.c
#ap.CFLAGS += -DUSE_I2C -DUSE_I2C0
# Digital camera
# Shutter: I2C SCL
# Zoom: I2C SDA
ap.CFLAGS += -DDIGITAL_CAM
ap.srcs += dc.c
ap.CFLAGS += -DUSE_MODULES
sim.CFLAGS += -DUSE_MODULES
# Config for SITL simulation
#include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.ARCHDIR = $(ARCHI)
sim.ARCH = sitl
sim.TARGET = autopilot
sim.TARGETDIR = autopilot
sim.CFLAGS += -DSITL -DAP -DFBW -DRADIO_CONTROL -DINTER_MCU -DDOWNLINK -DDOWNLINK_TRANSPORT=IvyTransport -DINFRARED -DNAV -DLED -DWIND_INFO
sim.srcs = latlong.c radio_control.c downlink.c commands.c gps.c inter_mcu.c infrared.c fw_h_ctl_a.c fw_v_ctl_n.c nav.c estimator.c sys_time.c main_fbw.c main_ap.c datalink.c $(SRC_ARCH)/ppm_hw.c $(SRC_ARCH)/sim_gps.c $(SRC_ARCH)/sim_ir.c $(SRC_ARCH)/sim_ap.c $(SRC_ARCH)/ivy_transport.c $(SRC_ARCH)/sim_adc_generic.c $(SRC_ARCH)/led_hw.c
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DPITCH_TRIM -DALT_KALMAN
sim.srcs += nav_line.c nav_survey_rectangle.c
# -DENOSE
#sim.srcs += i2c.c $(SRC_ARCH)/i2c_hw.c
#sim.CFLAGS += -DUSE_I2C -DUSE_I2C0
# chemotaxis.c anemotaxis.c discsurvey.c $(SRC_ARCH)/sim_enose.c chemo_detect.c
sim.CFLAGS += -DDIGITAL_CAM -DPOWER_SWITCH_LED=4
sim.srcs += dc.c
# a test program to setup actuators 
setup_actuators.ARCHDIR = $(ARCHI)
setup_actuators.ARCH = arm7tdmi
setup_actuators.TARGET = setup_actuators
setup_actuators.TARGETDIR = setup_actuators
setup_actuators.CFLAGS += -DFBW -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DLED -DTIME_LED=1 -DACTUATORS=\&quot;servos_4015_hw.h\&quot; -DSERVOS_4015 -DUSE_UART1 -DUART1_BAUD=B9600 -DDATALINK=PPRZ -DPPRZ_UART=Uart1
setup_actuators.srcs += sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c pprz_transport.c setup_actuators.c $(SRC_ARCH)/uart_hw.c $(SRC_ARCH)/servos_4015_hw.c main.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="nav_course" MAX="360"/>
            <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-10" VAR="nav_shift" MAX="10"/>
            <dl_setting STEP="1" HANDLER="ResetFlightTimeAndLaunch" SHORTNAME="flight time" MODULE="autopilot" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="estimator" MIN="0" VAR="pprz_mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" MAX="2"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
          </dl_settings>
          <dl_settings NAME="Infrared">
            <dl_setting STEP="1" PARAM="IR_ROLL_NEUTRAL_DEFAULT" ALT_UNIT="deg" SHORTNAME="roll neutral" MODULE="infrared" UNIT="rad" MIN="-15" VAR="ir_roll_neutral" MAX="15" ALT_UNIT_COEF="57.3"/>
            <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch neutral" MODULE="infrared" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="attitude">
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_RATE_GAIN" SHORTNAME="roll_dgain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_PGAIN" SHORTNAME="pitch_pgain" MIN="-55000" VAR="h_ctl_pitch_pgain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_DGAIN" SHORTNAME="pitch_dgain" MIN="-55000" VAR="h_ctl_pitch_dgain" MAX="0"/>
              <dl_setting STEP="0.001" PARAM="H_CTL_PITCH_OF_ROLL" SHORTNAME="pitch_of_roll" MODULE="fw_h_ctl_a" MIN="0." VAR="h_ctl_pitch_of_roll" MAX=".3"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="1" PARAM="H_CTL_ROLL_MAX_SETPOINT" ALT_UNIT="deg" SHORTNAME="max_roll" UNIT="rad" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="60" ALT_UNIT_COEF="0.0174533"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" PARAM="V_CTL_ALTITUDE_PGAIN" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="climb">
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1"/>
              <dl_setting STEP="0.001" PARAM="V_CTL_AUTO_PITCH_PGAIN" SHORTNAME="pitch_p" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="0"/>
              <dl_setting STEP="0.001" PARAM="V_CTL_AUTO_PITCH_IGAIN" SHORTNAME="pitch_i" MIN="-0.1" VAR="v_ctl_auto_pitch_igain" MAX="0"/>
              <dl_setting STEP="0.001" PARAM="V_CTL_AUTO_PITCH_DGAIN" SHORTNAME="pitch_d" MODULE="fw_v_ctl_n" MIN="-0.1" VAR="v_ctl_auto_pitch_dgain" MAX="0"/>
              <dl_setting STEP="0.001" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" SHORTNAME="throttle_p" MIN="-0.1" VAR="v_ctl_auto_throttle_pgain" MAX="0"/>
              <dl_setting STEP="0.001" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" SHORTNAME="throttle_i" MIN="-0.1" VAR="v_ctl_auto_throttle_igain" MAX="0"/>
              <dl_setting STEP="0.001" PARAM="V_CTL_AUTO_THROTTLE_DGAIN" SHORTNAME="throttle_d" MIN="-0.1" VAR="v_ctl_auto_throttle_dgain" MAX="0"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_PITCH_DASH_TRIM" SHORTNAME="dash trim" MIN="-1." VAR="v_ctl_pitch_dash_trim" MAX="0"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_PITCH_LOITER_TRIM" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_pitch_loiter_trim" MAX="1."/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" PARAM="H_CTL_COURSE_PGAIN" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" PARAM="NAV_GLIDE_PITCH_TRIM" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="1" MIN="1" VAR="nav_mode" MAX="2"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="1" MIN="-15" VAR="fp_pitch" MAX="15"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="5" VAR="nav_ground_speed_setpoint" MAX="50"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.2" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="fw_h_ctl_a">
            <dl_setting STEP="10" SHORTNAME="roll_Kffa" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_roll_Kffa" MAX="0"/>
            <dl_setting STEP="10" SHORTNAME="roll_Kffd" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_roll_Kffd" MAX="0"/>
            <dl_setting STEP="10" SHORTNAME="pitch_Kffa" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_pitch_Kffa" MAX="0"/>
            <dl_setting STEP="10" SHORTNAME="pitch_Kffd" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_pitch_Kffd" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetRollIGain" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_roll_igain" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetPitchIGain" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_pitch_igain" MAX="0"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="G1" ac_id="9" airframe="airframes/ENAC/quadrotor/booz2_g1.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/telemetry_booz2.xml" flight_plan="flight_plans/basic_booz.xml" settings="settings/settings_booz2.xml" gui_color="blue">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Booz Test Enac" LON0="1 28 52.61" MAX_DIST_FROM_HOME="400" GROUND_ALT="147" SECURITY_HEIGHT="2" ALT="152" LAT0="43 33 50.83">
        <header>    #include &quot;booz_fms.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0.0" X="0.0"/>
          <waypoint NAME="CLIMB" Y="5.0" X="0.0"/>
          <waypoint NAME="STDBY" Y="-5.0" X="-2.0"/>
          <waypoint NAME="p1" Y="-13.9" X="3.6"/>
          <waypoint NAME="p2" Y="-48.2" X="27.5"/>
          <waypoint NAME="p3" Y="-19.6" X="16.7"/>
          <waypoint NAME="p4" Y="-40.7" X="13.7"/>
          <waypoint NAME="CAM" Y="-50" X="-20" HEIGHT="2."/>
          <waypoint NAME="TD" Y="-10.9" X="5.6"/>
        </waypoints>
        <blocks>
          <block NAME="Wait GPS">
            <call FUN="NavKillThrottle()"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 10)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <call FUN="NavKillThrottle()"/>
            <attitude THROTTLE="0" ROLL="0" PITCH="0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
          <block NAME="Start Engine">
            <call FUN="NavResurrect()"/>
            <attitude THROTTLE="0." ROLL="0" PITCH="0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
          <block NAME="Takeoff" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff">
            <exception COND="booz_ins_enu_pos.z > POS_BFP_OF_REAL(2.)" DEROUTE="Standby"/>
            <call FUN="NavSetWaypointHere(WP_CLIMB)"/>
            <stay WP="CLIMB" CLIMB="0.5" VMODE="climb"/>
          </block>
          <block NAME="Standby" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <stay WP="STDBY"/>
          </block>
          <block NAME="stay_p1">
            <stay WP="p1"/>
          </block>
          <block NAME="go_p2">
            <go WP="p2"/>
            <deroute BLOCK="stay_p1"/>
          </block>
          <block NAME="line_p1_p2">
            <go WP="p2" FROM="p1" HMODE="route"/>
            <stay WP="p2" UNTIL="stage_time>10"/>
            <go WP="p1" FROM="p2" HMODE="route"/>
            <deroute BLOCK="stay_p1"/>
          </block>
          <block NAME="route">
            <go WP="p3" FROM="p1" HMODE="route"/>
            <go WP="p4" FROM="p3" HMODE="route"/>
            <go WP="p1" FROM="p4" HMODE="route"/>
            <deroute BLOCK="stay_p1"/>
          </block>
          <block NAME="circle">
            <circle WP="p1" RADIUS="nav_radius"/>
          </block>
          <block NAME="land here" STRIP_ICON="land-right.png" STRIP_BUTTON="Land Here">
            <call FUN="NavSetWaypointHere(WP_TD)"/>
          </block>
          <block NAME="land">
            <go WP="TD"/>
          </block>
          <block NAME="flare">
            <exception COND="NavDetectGround()" DEROUTE="Holding point"/>
            <call FUN="NavStartDetectGround()"/>
            <stay WP="TD" CLIMB="-0.8" VMODE="climb"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe name="BOOZ2_G1">
        <modules main_freq="512">
          <load name="booz_cam.xml"/>
        </modules>
        <firmware name="rotorcraft">
          <target name="ap" board="booz_1.0">
            <define name="BOOZ_FAILSAFE_GROUND_DETECT"/>
            <define name="USE_GPS_ACC4R"/>
          </target>
          <target name="sim" board="pc">
            <subsystem name="fdm" type="nps"/>
          </target>
          <subsystem name="radio_control" type="ppm"/>
          <subsystem name="actuators" type="asctec"/>
          <subsystem name="imu" type="b2_v1.1"/>
          <subsystem name="gps" type="ublox"/>
          <subsystem name="ahrs" type="cmpl"/>
          <subsystem name="ins" type="hff"/>
        </firmware>
        <firmware name="booz_test_progs">
          <target name="test_telemetry" board="booz_1.0"/>
          <target name="test_baro" board="booz_1.0"/>
          <target name="test_rc_spektrum" board="booz_1.0"/>
          <target name="test_rc_ppm" board="booz_1.0"/>
        </firmware>
        <servos min="0" neutral="0" max="0xff">
          <servo name="PITCH" no="0" min="0" neutral="0" max="255"/>
          <servo name="ROLL" no="1" min="0" neutral="0" max="255"/>
          <servo name="YAW" no="2" min="0" neutral="0" max="255"/>
          <servo name="THRUST" no="3" min="0" neutral="0" max="255"/>
        </servos>
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <section name="SUPERVISION" prefix="SUPERVISION_">
          <define name="TRIM_A" value="0"/>
          <define name="TRIM_E" value="6"/>
          <define name="TRIM_R" value="0"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="GYRO_P_NEUTRAL" value="32238"/>
          <define name="GYRO_Q_NEUTRAL" value="32391"/>
          <define name="GYRO_R_NEUTRAL" value="32853"/>
          <define name="GYRO_P_SENS" value="1.00" integer="16"/>
          <define name="GYRO_Q_SENS" value="1.00" integer="16"/>
          <define name="GYRO_R_SENS" value="1.00" integer="16"/>
          <define name="ACCEL_X_SENS" value="2.55975587" integer="16"/>
          <define name="ACCEL_Y_SENS" value="2.55643340" integer="16"/>
          <define name="ACCEL_Z_SENS" value="2.57178460" integer="16"/>
          <define name="ACCEL_X_NEUTRAL" value="33067"/>
          <define name="ACCEL_Y_NEUTRAL" value="32778"/>
          <define name="ACCEL_Z_NEUTRAL" value="32140"/>
          <define name="MAG_X_NEUTRAL" value="-12"/>
          <define name="MAG_Y_NEUTRAL" value="-10"/>
          <define name="MAG_Z_NEUTRAL" value="-11"/>
          <define name="MAG_X_SENS" value="22.008352" integer="16"/>
          <define name="MAG_Y_SENS" value="21.79885" integer="16"/>
          <define name="MAG_Z_SENS" value="14.675745" integer="16"/>
          <define name="BODY_TO_IMU_PHI" value="RadOfDeg(1.3)"/>
          <define name="BODY_TO_IMU_THETA" value="RadOfDeg(-2.6)"/>
          <define name="BODY_TO_IMU_PSI" value="RadOfDeg(0.)"/>
        </section>
        <section name="STABILIZATION_RATE" prefix="BOOZ_STABILIZATION_RATE_">
          <define name="SP_MAX_P" value="10000"/>
          <define name="SP_MAX_Q" value="10000"/>
          <define name="SP_MAX_R" value="10000"/>
          <define name="GAIN_P" value="-400"/>
          <define name="GAIN_Q" value="-400"/>
          <define name="GAIN_R" value="-350"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="BOOZ_STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="RadOfDeg(45.)"/>
          <define name="SP_MAX_THETA" value="RadOfDeg(45.)"/>
          <define name="SP_MAX_R" value="RadOfDeg(90.)"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="REF_OMEGA_P" value="RadOfDeg(800)"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="RadOfDeg(300.)"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_Q" value="RadOfDeg(800)"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="RadOfDeg(300.)"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_R" value="RadOfDeg(500)"/>
          <define name="REF_ZETA_R" value="0.85"/>
          <define name="REF_MAX_R" value="RadOfDeg(90.)"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(900.)"/>
          <define name="PHI_PGAIN" value="-2000"/>
          <define name="PHI_DGAIN" value="-400"/>
          <define name="PHI_IGAIN" value="-200"/>
          <define name="THETA_PGAIN" value="-2000"/>
          <define name="THETA_DGAIN" value="-400"/>
          <define name="THETA_IGAIN" value="-200"/>
          <define name="PSI_PGAIN" value="-2000"/>
          <define name="PSI_DGAIN" value="-400"/>
          <define name="PSI_IGAIN" value="-10"/>
          <define name="PHI_DDGAIN" value=" 300"/>
          <define name="THETA_DDGAIN" value=" 300"/>
          <define name="PSI_DDGAIN" value=" 300"/>
        </section>
        <section name="INS" prefix="BOOZ_INS_">
          <define name="BARO_SENS" value="15." integer="16"/>
          <define name="UNTILT_ACCEL" value="1"/>
          <define name="SONAR_SENS" value="2.146" integer="16"/>
        </section>
        <section name="GUIDANCE_V" prefix="BOOZ2_GUIDANCE_V_">
          <define name="MIN_ERR_Z" value="POS_BFP_OF_REAL(-10.)"/>
          <define name="MAX_ERR_Z" value="POS_BFP_OF_REAL( 10.)"/>
          <define name="MIN_ERR_ZD" value="SPEED_BFP_OF_REAL(-10.)"/>
          <define name="MAX_ERR_ZD" value="SPEED_BFP_OF_REAL( 10.)"/>
          <define name="MAX_SUM_ERR" value="2000000"/>
          <define name="REF_MIN_ZDD" value="-1.5*9.81"/>
          <define name="REF_MAX_ZDD" value=" 0.5*9.81"/>
          <define name="REF_MIN_ZD" value="-1.5"/>
          <define name="REF_MAX_ZD" value=" 1.5"/>
          <define name="HOVER_KP" value="-150"/>
          <define name="HOVER_KD" value="-80"/>
          <define name="HOVER_KI" value="0"/>
          <define name="RC_CLIMB_COEF" value="163"/>
          <define name="RC_CLIMB_DEAD_BAND" value="160000"/>
        </section>
        <section name="GUIDANCE_H" prefix="BOOZ2_GUIDANCE_H_">
          <define name="PGAIN" value="-50"/>
          <define name="DGAIN" value="-100"/>
          <define name="IGAIN" value="-15"/>
          <define name="NGAIN" value="-0"/>
          <define name="AGAIN" value="100"/>
        </section>
        <section name="BAT">
          <define name="MILLIAMP_PER_PERCENT" value="0.86"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="9.3" unit="V"/>
          <define name="BATTERY_SENS" value="0.183" integer="16"/>
        </section>
        <section name="AUTOPILOT">
          <define name="BOOZ2_MODE_MANUAL" value="BOOZ2_AP_MODE_ATTITUDE_DIRECT"/>
          <define name="BOOZ2_MODE_AUTO1" value="BOOZ2_AP_MODE_ATTITUDE_Z_HOLD"/>
          <define name="BOOZ2_MODE_AUTO2" value="BOOZ2_AP_MODE_NAV"/>
        </section>
        <section name="FMS">
          <define name="BOOZ_FMS_TIMEOUT" value="0"/>
        </section>
        <section name="CAM" prefix="BOOZ_CAM_">
          <define name="TILT_NEUTRAL" value="1500"/>
          <define name="TILT_MIN" value="1000"/>
          <define name="TILT_MAX" value="2000"/>
          <define name="TILT_ANGLE_MIN" value="RadOfDeg(-85.)" unit="rad"/>
          <define name="TILT_ANGLE_MAX" value="RadOfDeg( 30.)" unit="rad"/>
          <define name="PAN_NEUTRAL" value="0"/>
          <define name="PAN_MIN" value="0"/>
          <define name="PAN_MAX" value="25736"/>
        </section>
        <section name="MISC">
          <define name="BOOZ_ANALOG_BARO_THRESHOLD" value="800"/>
          <define name="BOOZ2_FACE_REINJ_1" value="1024"/>
          <define name="DEFAULT_CIRCLE_RADIUS" value="10."/>
        </section>
        <section name="GCS">
          <define name="ALT_SHIFT_PLUS_PLUS" value="5"/>
          <define name="ALT_SHIFT_PLUS" value="1"/>
          <define name="ALT_SHIFT_MINUS" value="-1"/>
        </section>
        <section name="SIMULATOR" prefix="NPS_">
          <define name="ACTUATOR_NAMES" value="{&quot;front_motor&quot;, &quot;back_motor&quot;, &quot;right_motor&quot;, &quot;left_motor&quot;}"/>
          <define name="SENSORS_PARAMS" value="&quot;nps_sensors_params_booz2_a1.h&quot;"/>
        </section>
        <makefile location="after">ap.CFLAGS += -DB2_GUIDANCE_H_USE_REF
ap.CFLAGS += -DUSE_ADAPT_HOVER -DUSE_INS_NAV_INIT -DBOOZ_START_DELAY=3
ap.srcs += $(SRC_BOOZ_ARCH)/booz2_pwm_hw.c
sim.CFLAGS += -DBSM_PARAMS=\&quot;booz_sensors_model_params_booz2_a2.h\&quot;
sim.CFLAGS += -DNPS_NO_SUPERVISION
sim.CFLAGS += -DB2_GUIDANCE_H_USE_REF
sim.CFLAGS += -DUSE_ADAPT_HOVER -DUSE_INS_NAV_INIT -DBOOZ_START_DELAY=3
sim.srcs += $(SRC_BOOZ_SIM)/booz2_pwm_hw.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Main" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="DL_VALUE" PERIOD="1.1"/>
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="BOOZ2_FP" PERIOD="0.25"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
            <message NAME="BOOZ2_NAV_STATUS" PERIOD="1.6"/>
            <message NAME="WP_MOVED" PERIOD="1.3"/>
            <message NAME="CAM_TRACK" PERIOD="0.1"/>
            <message NAME="BOOZ2_GPS" PERIOD=".25"/>
            <message NAME="BOOZ_INS" PERIOD=".25"/>
          </mode>
          <mode NAME="ppm">
            <message NAME="BOOZ2_CMD" PERIOD=".05"/>
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="BOOZ2_RADIO_CONTROL" PERIOD="0.5"/>
            <message NAME="BOOZ_STATUS" PERIOD="1"/>
          </mode>
          <mode NAME="raw_sensors">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="IMU_ACCEL_RAW" PERIOD=".05"/>
            <message NAME="IMU_GYRO_RAW" PERIOD=".05"/>
            <message NAME="IMU_MAG_RAW" PERIOD=".05"/>
            <message NAME="BARO_RAW" PERIOD=".1"/>
            <message NAME="BOOZ2_SONAR" PERIOD="0.2"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_GYRO" PERIOD=".075"/>
            <message NAME="BOOZ2_ACCEL" PERIOD=".075"/>
            <message NAME="BOOZ2_MAG" PERIOD=".1"/>
          </mode>
          <mode NAME="ahrs">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_FILTER" PERIOD=".5"/>
            <message NAME="BOOZ2_AHRS_EULER" PERIOD=".1"/>
          </mode>
          <mode NAME="rate_loop">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_RATE_LOOP" PERIOD=".02"/>
          </mode>
          <mode NAME="attitude_loop">
            <message NAME="BOOZ_STATUS" PERIOD="2.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="3.1"/>
            <message NAME="BOOZ2_STAB_ATTITUDE" PERIOD=".05"/>
            <message NAME="BOOZ2_STAB_ATTITUDE_REF" PERIOD=".09"/>
          </mode>
          <mode NAME="vert_loop">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="0.9"/>
            <message NAME="BOOZ2_VFF" PERIOD=".05"/>
            <message NAME="BOOZ2_VERT_LOOP" PERIOD=".05"/>
            <message NAME="BOOZ2_INS" PERIOD=".05"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
          </mode>
          <mode NAME="h_loop">
            <message NAME="ALIVE" PERIOD="3.9"/>
            <message NAME="BOOZ2_HOVER_LOOP" PERIOD="0.062"/>
            <message NAME="BOOZ2_GUIDANCE_H_REF" PERIOD="0.1"/>
            <message NAME="BOOZ2_STAB_ATTITUDE" PERIOD=".4"/>
            <message NAME="BOOZ2_FP" PERIOD="0.8"/>
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="BOOZ2_NAV_STATUS" PERIOD="1.6"/>
            <message NAME="BOOZ2_HFF_GPS" PERIOD=".03"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
          </mode>
          <mode NAME="aligner">
            <message NAME="ALIVE" PERIOD="0.9"/>
            <message NAME="BOOZ2_FILTER_ALIGNER" PERIOD="0.02"/>
          </mode>
          <mode NAME="hs_att_roll">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="ALIVE" PERIOD="0.9"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
          </mode>
          <mode NAME="tune_hover">
            <message NAME="DL_VALUE" PERIOD="1.1"/>
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_TUNE_HOVER" PERIOD=".1"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="Misc">
            <dl_setting STEP="1" SHORTNAME="telemetry" MODULE="booz2_telemetry" MIN="0" VAR="telemetry_mode_Main_DefaultChannel" VALUES="Default|PPM|Raw|Scaled|AHRS|Rate|Attitude|Vertical|Horizontal|Aligner|HS_att_roll|Tune_hover" MAX="11">
              <key_press KEY="d" VALUE="0"/>
              <key_press KEY="v" VALUE="7"/>
              <key_press KEY="h" VALUE="8"/>
            </dl_setting>
            <dl_setting STEP="1" SHORTNAME="auto2" MODULE="booz2_autopilot" MIN="0" VAR="booz2_autopilot_mode_auto2" VALUES="Fail|Kill|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav" MAX="12"/>
            <dl_setting STEP="1" HANDLER="KillThrottle" MODULE="booz2_autopilot" MIN="0" VAR="kill_throttle" VALUES="Resurrect|Kill" MAX="1"/>
            <dl_setting STEP="1" HANDLER="SetPowerSwitch" MODULE="booz2_autopilot" MIN="0" VAR="booz2_autopilot_power_switch" VALUES="OFF|ON" MAX="1">
              <strip_button NAME="POWER ON" VALUE="1" ICON="on.png"/>
              <strip_button NAME="POWER OFF" VALUE="0" ICON="off.png"/>
            </dl_setting>
            <dl_setting STEP="1" MODULE="booz2_autopilot" MIN="0" VAR="booz2_autopilot_rc" VALUES="RC OFF|RC ON" MAX="1">
              <strip_button NAME="RC ON" VALUE="1"/>
              <strip_button NAME="RC OFF" VALUE="0"/>
            </dl_setting>
            <dl_setting STEP="0.1" SHORTNAME="mag_offset" MODULE="booz_ahrs" MIN="-180" VAR="booz_ahrs_mag_offset" MAX="180"/>
          </dl_settings>
          <dl_settings NAME="Rate Loop">
            <dl_setting STEP="1" SHORTNAME="gain p" MODULE="stabilization/booz_stabilization_rate" MIN="-1000" VAR="booz_stabilization_rate_gain.p" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="gain q" MODULE="stabilization/booz_stabilization_rate" MIN="-1000" VAR="booz_stabilization_rate_gain.q" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="gain r" MODULE="stabilization/booz_stabilization_rate" MIN="-1000" VAR="booz_stabilization_rate_gain.r" MAX="-1"/>
          </dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting STEP="1" SHORTNAME="pgain phi" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.p.x" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="dgain p" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.d.x" MAX="-1"/>
            <dl_setting STEP="1" HANDLER="SetKiPhi" SHORTNAME="igain phi" MODULE="stabilization/booz_stabilization_attitude" MIN="-300" VAR="booz_stabilization_gains.i.x" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ddgain p" MODULE="stabilization/booz_stabilization_attitude" MIN="0" VAR="booz_stabilization_gains.dd.x" MAX="1000"/>
            <dl_setting STEP="1" SHORTNAME="pgain theta" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.p.y" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="dgain q" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.d.y" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="igain theta" MODULE="stabilization/booz_stabilization_attitude" MIN="-300" VAR="booz_stabilization_gains.i.y" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ddgain q" MODULE="stabilization/booz_stabilization_attitude" MIN="0" VAR="booz_stabilization_gains.dd.y" MAX="500"/>
            <dl_setting STEP="1" SHORTNAME="pgain psi" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.p.z" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="dgain r" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.d.z" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="igain psi" MODULE="stabilization/booz_stabilization_attitude" MIN="-300" VAR="booz_stabilization_gains.i.z" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ddgain r" MODULE="stabilization/booz_stabilization_attitude" MIN="0" VAR="booz_stabilization_gains.dd.z" MAX="2000"/>
          </dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting STEP="1" SHORTNAME="kp" MODULE="guidance/booz2_guidance_v" MIN="-600" VAR="booz2_guidance_v_kp" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="kd" MODULE="guidance/booz2_guidance_v" MIN="-600" VAR="booz2_guidance_v_kd" MAX="0"/>
            <dl_setting STEP="1" HANDLER="SetKi" SHORTNAME="ki" MODULE="guidance/booz2_guidance_v" MIN="-300" VAR="booz2_guidance_v_ki" MAX="0"/>
            <dl_setting STEP="0.5" ALT_UNIT="m" SHORTNAME="sp" MODULE="guidance/booz2_guidance_v" UNIT="2e-8m" MIN="-5" VAR="booz2_guidance_v_z_sp" MAX="3" ALT_UNIT_COEF="0.00390625"/>
            <dl_setting STEP="1" SHORTNAME="vf_realign" MODULE="booz2_ins" MIN="0" VAR="booz_ins_vf_realign" VALUES="OFF|ON" MAX="1"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting STEP="1" ALT_UNIT="m" SHORTNAME="sp_x_ned" MODULE="guidance/booz2_guidance_h" UNIT="1/2^8m" MIN="-10" VAR="booz2_guidance_h_pos_sp.x" MAX="10" ALT_UNIT_COEF="0.00390625"/>
            <dl_setting STEP="1" ALT_UNIT="m" SHORTNAME="sp_y_ned" MODULE="guidance/booz2_guidance_h" UNIT="1/2^8m" MIN="-10" VAR="booz2_guidance_h_pos_sp.y" MAX="10" ALT_UNIT_COEF="0.00390625"/>
            <dl_setting STEP="5" ALT_UNIT="deg" SHORTNAME="sp_psi" MODULE="guidance/booz2_guidance_h" UNIT="1/2^20r" MIN="-180" VAR="booz2_guidance_h_psi_sp" MAX="180" ALT_UNIT_COEF="0.000054641513360"/>
            <dl_setting STEP="1" SHORTNAME="kp" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_pgain" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="kd" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_dgain" MAX="0"/>
            <dl_setting STEP="1" HANDLER="SetKi" SHORTNAME="ki" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_igain" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="kn" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_ngain" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ka" MODULE="guidance/booz2_guidance_h" MIN="0" VAR="booz2_guidance_h_again" MAX="200"/>
            <dl_setting STEP="1" SHORTNAME="hf_realign" MODULE="booz2_ins" MIN="0" VAR="booz_ins_hf_realign" VALUES="OFF|ON" MAX="1"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting STEP="0.1" HANDLER="SetFlightAltitude" MODULE="booz2_navigation" UNIT="m" MIN="0" VAR="flight_altitude" MAX="400"/>
            <dl_setting STEP="1" ALT_UNIT="deg" MODULE="booz2_navigation" UNIT="1/2^12r" MIN="0" VAR="nav_heading" MAX="360" ALT_UNIT_COEF="0.0139882"/>
            <dl_setting STEP="0.1" MODULE="booz2_navigation" UNIT="m" MIN="-150" VAR="nav_radius" MAX="150"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="G1_VISION" ac_id="14" airframe="airframes/ENAC/quadrotor/g1_vision.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/telemetry_booz2.xml" flight_plan="flight_plans/IMAV10_indoor.xml" settings="settings/settings_booz2.xml" gui_color="blue">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="IMAV10 indoor" LON0="10.519198" MAX_DIST_FROM_HOME="400" GROUND_ALT="0" SECURITY_HEIGHT="0.5" ALT="1" LAT0="52.257173">
        <header>    #include &quot;booz_fms.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0.0" X="0.0"/>
          <waypoint NAME="STDBY" Y="3.0" X="0.0"/>
          <waypoint NAME="P1" Y="0.0" X="5.0"/>
          <waypoint NAME="P2" Y="0.0" X="-5.0"/>
          <waypoint NAME="P1_S" Y="0.0" X="2.0"/>
          <waypoint NAME="P2_S" Y="0.0" X="-2.0"/>
        </waypoints>
        <blocks>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 10)"/>
            <call FUN="NavSetAltitudeReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <call FUN="NavKillThrottle()"/>
            <attitude THROTTLE="0" ROLL="0" PITCH="0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
          <block NAME="Start Engine">
            <call FUN="NavResurrect()"/>
            <attitude THROTTLE="0" ROLL="0" PITCH="0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
          <block NAME="Takeoff" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff">
            <exception COND="booz_ins_enu_pos.z > POS_BFP_OF_REAL(1.)" DEROUTE="Standby"/>
            <call FUN="NavSetAltitudeReferenceHere()"/>
            <call FUN="NavSetWaypointHere(WP_STDBY)"/>
            <stay WP="STDBY" CLIMB="0.4" VMODE="climb"/>
          </block>
          <block NAME="Standby" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <stay WP="STDBY"/>
          </block>
          <block NAME="Goto P1_S" PRE_CALL="GumstixUpdateHeading()">
            <go WP="P1_S" FROM="P2_S" HMODE="route"/>
          </block>
          <block NAME="Circle P1" PRE_CALL="GumstixUpdateHeading()">
            <circle WP="P1" RADIUS="nav_radius" UNTIL="nav_circle_radians > ANGLE_BFP_OF_REAL(RadOfDeg(320.))"/>
          </block>
          <block NAME="Goto P2_S" PRE_CALL="GumstixUpdateHeading()">
            <go WP="P2_S" FROM="P1_S" HMODE="route"/>
          </block>
          <block NAME="Circle P2" PRE_CALL="GumstixUpdateHeading()">
            <circle WP="P2" RADIUS="-nav_radius" UNTIL="-nav_circle_radians > ANGLE_BFP_OF_REAL(RadOfDeg(320.))"/>
            <deroute BLOCK="Goto P1_S"/>
          </block>
          <block NAME="land here" STRIP_ICON="land-right.png" STRIP_BUTTON="Land Here">
            <call FUN="NavSetWaypointHere(WP_STDBY)"/>
          </block>
          <block NAME="flare">
            <exception COND="NavDetectGround()" DEROUTE="Holding point"/>
            <call FUN="NavStartDetectGround()"/>
            <stay WP="STDBY" CLIMB="-0.5" VMODE="climb"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe name="BOOZ2_G1">
        <modules main_freq="512">
          <load name="sonar_maxbotix_booz.xml"/>
          <load name="booz_extra_dl.xml"/>
          <load name="booz_gumstix_com.xml"/>
        </modules>
        <servos min="0" neutral="0" max="0xff">
          <servo name="PITCH" no="0" min="0" neutral="0" max="255"/>
          <servo name="ROLL" no="1" min="0" neutral="0" max="255"/>
          <servo name="YAW" no="2" min="0" neutral="0" max="255"/>
          <servo name="THRUST" no="3" min="0" neutral="0" max="255"/>
        </servos>
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <section name="SUPERVISION" prefix="SUPERVISION_">
          <define name="TRIM_A" value="0"/>
          <define name="TRIM_E" value="6"/>
          <define name="TRIM_R" value="0"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="GYRO_P_CHAN" value="1"/>
          <define name="GYRO_Q_CHAN" value="0"/>
          <define name="GYRO_R_CHAN" value="2"/>
          <define name="GYRO_P_NEUTRAL" value="32238"/>
          <define name="GYRO_Q_NEUTRAL" value="32391"/>
          <define name="GYRO_R_NEUTRAL" value="32853"/>
          <define name="GYRO_P_SENS" value="1.00" integer="16"/>
          <define name="GYRO_Q_SENS" value="1.00" integer="16"/>
          <define name="GYRO_R_SENS" value="1.00" integer="16"/>
          <define name="ACCEL_X_CHAN" value="5"/>
          <define name="ACCEL_Y_CHAN" value="3"/>
          <define name="ACCEL_Z_CHAN" value="4"/>
          <define name="ACCEL_X_SENS" value="2.55975587" integer="16"/>
          <define name="ACCEL_Y_SENS" value="2.55643340" integer="16"/>
          <define name="ACCEL_Z_SENS" value="2.57178460" integer="16"/>
          <define name="ACCEL_X_NEUTRAL" value="33067"/>
          <define name="ACCEL_Y_NEUTRAL" value="32778"/>
          <define name="ACCEL_Z_NEUTRAL" value="32140"/>
          <define name="MAG_X_CHAN" value="0"/>
          <define name="MAG_Y_CHAN" value="1"/>
          <define name="MAG_Z_CHAN" value="2"/>
          <define name="MAG_X_NEUTRAL" value="-12"/>
          <define name="MAG_Y_NEUTRAL" value="-10"/>
          <define name="MAG_Z_NEUTRAL" value="-11"/>
          <define name="MAG_X_SENS" value="22.008352" integer="16"/>
          <define name="MAG_Y_SENS" value="21.79885" integer="16"/>
          <define name="MAG_Z_SENS" value="14.675745" integer="16"/>
          <define name="BODY_TO_IMU_PHI" value="RadOfDeg(1.3)"/>
          <define name="BODY_TO_IMU_THETA" value="RadOfDeg(-2.6)"/>
          <define name="BODY_TO_IMU_PSI" value="RadOfDeg(0.)"/>
        </section>
        <section name="STABILIZATION_RATE" prefix="BOOZ_STABILIZATION_RATE_">
          <define name="SP_MAX_P" value="10000"/>
          <define name="SP_MAX_Q" value="10000"/>
          <define name="SP_MAX_R" value="10000"/>
          <define name="GAIN_P" value="-400"/>
          <define name="GAIN_Q" value="-400"/>
          <define name="GAIN_R" value="-350"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="BOOZ_STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="RadOfDeg(45.)"/>
          <define name="SP_MAX_THETA" value="RadOfDeg(45.)"/>
          <define name="SP_MAX_R" value="RadOfDeg(90.)"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="REF_OMEGA_P" value="RadOfDeg(800)"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="RadOfDeg(300.)"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_Q" value="RadOfDeg(800)"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="RadOfDeg(300.)"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_R" value="RadOfDeg(500)"/>
          <define name="REF_ZETA_R" value="0.85"/>
          <define name="REF_MAX_R" value="RadOfDeg(90.)"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(900.)"/>
          <define name="PHI_PGAIN" value="-2000"/>
          <define name="PHI_DGAIN" value="-400"/>
          <define name="PHI_IGAIN" value="-200"/>
          <define name="THETA_PGAIN" value="-2000"/>
          <define name="THETA_DGAIN" value="-400"/>
          <define name="THETA_IGAIN" value="-200"/>
          <define name="PSI_PGAIN" value="-1000"/>
          <define name="PSI_DGAIN" value="-350"/>
          <define name="PSI_IGAIN" value="-10"/>
          <define name="PHI_DDGAIN" value=" 300"/>
          <define name="THETA_DDGAIN" value=" 300"/>
          <define name="PSI_DDGAIN" value=" 300"/>
        </section>
        <section name="INS" prefix="BOOZ_INS_">
          <define name="BARO_SENS" value="15." integer="16"/>
          <define name="UNTILT_ACCEL" value="1"/>
          <define name="SONAR_SENS" value="2.146" integer="16"/>
        </section>
        <section name="HORIZONTAL_FILTER" prefix="B2_HFF_">
          <define name="ACCEL_NOISE" value="10."/>
          <define name="R_POS" value="0.05"/>
          <define name="R_POS_MIN" value="0."/>
          <define name="R_SPEED" value="1."/>
          <define name="R_SPEED_MIN" value="0."/>
        </section>
        <section name="GUIDANCE_V" prefix="BOOZ2_GUIDANCE_V_">
          <define name="MIN_ERR_Z" value="POS_BFP_OF_REAL(-10.)"/>
          <define name="MAX_ERR_Z" value="POS_BFP_OF_REAL( 10.)"/>
          <define name="MIN_ERR_ZD" value="SPEED_BFP_OF_REAL(-10.)"/>
          <define name="MAX_ERR_ZD" value="SPEED_BFP_OF_REAL( 10.)"/>
          <define name="MAX_SUM_ERR" value="2000000"/>
          <define name="REF_MIN_ZDD" value="-1.5*9.81"/>
          <define name="REF_MAX_ZDD" value=" 0.5*9.81"/>
          <define name="REF_MIN_ZD" value="-1.5"/>
          <define name="REF_MAX_ZD" value=" 1.5"/>
          <define name="HOVER_KP" value="-150"/>
          <define name="HOVER_KD" value="-80"/>
          <define name="HOVER_KI" value="0"/>
          <define name="RC_CLIMB_COEF" value="163"/>
          <define name="RC_CLIMB_DEAD_BAND" value="160000"/>
        </section>
        <section name="GUIDANCE_H" prefix="BOOZ2_GUIDANCE_H_">
          <define name="PGAIN" value="-50"/>
          <define name="DGAIN" value="-60"/>
          <define name="IGAIN" value="-0"/>
          <define name="NGAIN" value="-0"/>
          <define name="AGAIN" value="50"/>
        </section>
        <section name="BAT">
          <define name="MILLIAMP_PER_PERCENT" value="0.86"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="9.3" unit="V"/>
          <define name="BATTERY_SENS" value="0.183" integer="16"/>
        </section>
        <section name="AUTOPILOT">
          <define name="BOOZ2_MODE_MANUAL" value="BOOZ2_AP_MODE_ATTITUDE_DIRECT"/>
          <define name="BOOZ2_MODE_AUTO1" value="BOOZ2_AP_MODE_ATTITUDE_Z_HOLD"/>
          <define name="BOOZ2_MODE_AUTO2" value="BOOZ2_AP_MODE_NAV"/>
        </section>
        <section name="FMS"/>
        <section name="MISC">
          <define name="BOOZ_ANALOG_BARO_THRESHOLD" value="800"/>
          <define name="BOOZ2_FACE_REINJ_1" value="1024"/>
          <define name="DEFAULT_CIRCLE_RADIUS" value="10."/>
        </section>
        <section name="SIMULATOR" prefix="NPS_">
          <define name="ACTUATOR_NAMES" value="{&quot;front_motor&quot;, &quot;back_motor&quot;, &quot;right_motor&quot;, &quot;left_motor&quot;}"/>
          <define name="SENSORS_PARAMS" value="&quot;nps_sensors_params_booz2_a1.h&quot;"/>
        </section>
        <makefile>ARCH=lpc21
ARCHI=arm7
BOARD_CFG = \&quot;boards/booz2_v1_0.h\&quot;
FLASH_MODE=IAP
# prevents motors from ever starting
#ap.CFLAGS += -DKILL_MOTORS
include $(PAPARAZZI_SRC)/conf/autopilot/booz2_common.makefile
include $(CFG_BOOZ)/booz2_autopilot.makefile
include $(CFG_BOOZ)/booz2_test_progs.makefile
ap.CFLAGS += -DBOOZ_FAILSAFE_GROUND_DETECT
sim.CFLAGS += -DBSM_PARAMS=\&quot;booz_sensors_model_params_booz2_a2.h\&quot;
sim.CFLAGS += -DNPS_NO_SUPERVISION
include $(CFG_BOOZ)/booz2_simulator_nps.makefile
ap.CFLAGS += -DMODEM_BAUD=B57600
include $(CFG_BOOZ)/subsystems/booz2_actuators_asctec.makefile
include $(CFG_BOOZ)/subsystems/booz2_radio_control_ppm.makefile
include $(CFG_BOOZ)/subsystems/booz2_imu_b2v1_1.makefile
#include $(CFG_BOOZ)/subsystems/booz2_gps.makefile
include $(CFG_BOOZ)/subsystems/booz2_analog_bat_baro.makefile
include $(CFG_BOOZ)/subsystems/booz2_fms_datalink.makefile
include $(CFG_BOOZ)/subsystems/booz2_ahrs_cmpl.makefile
#include $(CFG_BOOZ)/subsystems/booz2_ins_hff.makefile
#ap.CFLAGS += -DR_POS=0.1
ap.CFLAGS += -DUSE_ADAPT_HOVER -DUSE_INS_NAV_INIT -DBOOZ_START_DELAY=3
sim.CFLAGS += -DUSE_ADAPT_HOVER -DUSE_INS_NAV_INIT -DBOOZ_START_DELAY=3
ap.CFLAGS += -DUSE_MODULES</makefile>
      </airframe>
      <telemetry>
        <process NAME="Main" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="DL_VALUE" PERIOD="1.1"/>
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="BOOZ2_FP" PERIOD="0.25"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
            <message NAME="BOOZ2_NAV_STATUS" PERIOD="1.6"/>
            <message NAME="WP_MOVED" PERIOD="1.3"/>
            <message NAME="CAM_TRACK" PERIOD="0.1"/>
            <message NAME="BOOZ2_GPS" PERIOD=".25"/>
            <message NAME="BOOZ_INS" PERIOD=".25"/>
          </mode>
          <mode NAME="ppm">
            <message NAME="BOOZ2_CMD" PERIOD=".05"/>
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="BOOZ2_RADIO_CONTROL" PERIOD="0.5"/>
            <message NAME="BOOZ_STATUS" PERIOD="1"/>
          </mode>
          <mode NAME="raw_sensors">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="IMU_ACCEL_RAW" PERIOD=".05"/>
            <message NAME="IMU_GYRO_RAW" PERIOD=".05"/>
            <message NAME="IMU_MAG_RAW" PERIOD=".05"/>
            <message NAME="BARO_RAW" PERIOD=".1"/>
            <message NAME="BOOZ2_SONAR" PERIOD="0.2"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_GYRO" PERIOD=".075"/>
            <message NAME="BOOZ2_ACCEL" PERIOD=".075"/>
            <message NAME="BOOZ2_MAG" PERIOD=".1"/>
          </mode>
          <mode NAME="ahrs">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_FILTER" PERIOD=".5"/>
            <message NAME="BOOZ2_AHRS_EULER" PERIOD=".1"/>
          </mode>
          <mode NAME="rate_loop">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_RATE_LOOP" PERIOD=".02"/>
          </mode>
          <mode NAME="attitude_loop">
            <message NAME="BOOZ_STATUS" PERIOD="2.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="3.1"/>
            <message NAME="BOOZ2_STAB_ATTITUDE" PERIOD=".05"/>
            <message NAME="BOOZ2_STAB_ATTITUDE_REF" PERIOD=".09"/>
          </mode>
          <mode NAME="vert_loop">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="0.9"/>
            <message NAME="BOOZ2_VFF" PERIOD=".05"/>
            <message NAME="BOOZ2_VERT_LOOP" PERIOD=".05"/>
            <message NAME="BOOZ2_INS" PERIOD=".05"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
          </mode>
          <mode NAME="h_loop">
            <message NAME="ALIVE" PERIOD="3.9"/>
            <message NAME="BOOZ2_HOVER_LOOP" PERIOD="0.062"/>
            <message NAME="BOOZ2_GUIDANCE_H_REF" PERIOD="0.1"/>
            <message NAME="BOOZ2_STAB_ATTITUDE" PERIOD=".4"/>
            <message NAME="BOOZ2_FP" PERIOD="0.8"/>
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="BOOZ2_NAV_STATUS" PERIOD="1.6"/>
            <message NAME="BOOZ2_HFF_GPS" PERIOD=".03"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
          </mode>
          <mode NAME="aligner">
            <message NAME="ALIVE" PERIOD="0.9"/>
            <message NAME="BOOZ2_FILTER_ALIGNER" PERIOD="0.02"/>
          </mode>
          <mode NAME="hs_att_roll">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="ALIVE" PERIOD="0.9"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
          </mode>
          <mode NAME="tune_hover">
            <message NAME="DL_VALUE" PERIOD="1.1"/>
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_TUNE_HOVER" PERIOD=".1"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="Misc">
            <dl_setting STEP="1" SHORTNAME="telemetry" MODULE="booz2_telemetry" MIN="0" VAR="telemetry_mode_Main_DefaultChannel" VALUES="Default|PPM|Raw|Scaled|AHRS|Rate|Attitude|Vertical|Horizontal|Aligner|HS_att_roll|Tune_hover" MAX="11">
              <key_press KEY="d" VALUE="0"/>
              <key_press KEY="v" VALUE="7"/>
              <key_press KEY="h" VALUE="8"/>
            </dl_setting>
            <dl_setting STEP="1" SHORTNAME="auto2" MODULE="booz2_autopilot" MIN="0" VAR="booz2_autopilot_mode_auto2" VALUES="Fail|Kill|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav" MAX="12"/>
            <dl_setting STEP="1" HANDLER="KillThrottle" MODULE="booz2_autopilot" MIN="0" VAR="kill_throttle" VALUES="Resurrect|Kill" MAX="1"/>
            <dl_setting STEP="1" HANDLER="SetPowerSwitch" MODULE="booz2_autopilot" MIN="0" VAR="booz2_autopilot_power_switch" VALUES="OFF|ON" MAX="1">
              <strip_button NAME="POWER ON" VALUE="1" ICON="on.png"/>
              <strip_button NAME="POWER OFF" VALUE="0" ICON="off.png"/>
            </dl_setting>
            <dl_setting STEP="1" MODULE="booz2_autopilot" MIN="0" VAR="booz2_autopilot_rc" VALUES="RC OFF|RC ON" MAX="1">
              <strip_button NAME="RC ON" VALUE="1"/>
              <strip_button NAME="RC OFF" VALUE="0"/>
            </dl_setting>
            <dl_setting STEP="0.1" SHORTNAME="mag_offset" MODULE="booz_ahrs" MIN="-180" VAR="booz_ahrs_mag_offset" MAX="180"/>
          </dl_settings>
          <dl_settings NAME="Rate Loop">
            <dl_setting STEP="1" SHORTNAME="gain p" MODULE="stabilization/booz_stabilization_rate" MIN="-1000" VAR="booz_stabilization_rate_gain.p" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="gain q" MODULE="stabilization/booz_stabilization_rate" MIN="-1000" VAR="booz_stabilization_rate_gain.q" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="gain r" MODULE="stabilization/booz_stabilization_rate" MIN="-1000" VAR="booz_stabilization_rate_gain.r" MAX="-1"/>
          </dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting STEP="1" SHORTNAME="pgain phi" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.p.x" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="dgain p" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.d.x" MAX="-1"/>
            <dl_setting STEP="1" HANDLER="SetKiPhi" SHORTNAME="igain phi" MODULE="stabilization/booz_stabilization_attitude" MIN="-300" VAR="booz_stabilization_gains.i.x" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ddgain p" MODULE="stabilization/booz_stabilization_attitude" MIN="0" VAR="booz_stabilization_gains.dd.x" MAX="1000"/>
            <dl_setting STEP="1" SHORTNAME="pgain theta" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.p.y" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="dgain q" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.d.y" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="igain theta" MODULE="stabilization/booz_stabilization_attitude" MIN="-300" VAR="booz_stabilization_gains.i.y" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ddgain q" MODULE="stabilization/booz_stabilization_attitude" MIN="0" VAR="booz_stabilization_gains.dd.y" MAX="500"/>
            <dl_setting STEP="1" SHORTNAME="pgain psi" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.p.z" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="dgain r" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.d.z" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="igain psi" MODULE="stabilization/booz_stabilization_attitude" MIN="-300" VAR="booz_stabilization_gains.i.z" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ddgain r" MODULE="stabilization/booz_stabilization_attitude" MIN="0" VAR="booz_stabilization_gains.dd.z" MAX="2000"/>
          </dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting STEP="1" SHORTNAME="kp" MODULE="guidance/booz2_guidance_v" MIN="-600" VAR="booz2_guidance_v_kp" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="kd" MODULE="guidance/booz2_guidance_v" MIN="-600" VAR="booz2_guidance_v_kd" MAX="0"/>
            <dl_setting STEP="1" HANDLER="SetKi" SHORTNAME="ki" MODULE="guidance/booz2_guidance_v" MIN="-300" VAR="booz2_guidance_v_ki" MAX="0"/>
            <dl_setting STEP="0.5" ALT_UNIT="m" SHORTNAME="sp" MODULE="guidance/booz2_guidance_v" UNIT="2e-8m" MIN="-5" VAR="booz2_guidance_v_z_sp" MAX="3" ALT_UNIT_COEF="0.00390625"/>
            <dl_setting STEP="1" SHORTNAME="vf_realign" MODULE="booz2_ins" MIN="0" VAR="booz_ins_vf_realign" VALUES="OFF|ON" MAX="1"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting STEP="1" ALT_UNIT="m" SHORTNAME="sp_x_ned" MODULE="guidance/booz2_guidance_h" UNIT="1/2^8m" MIN="-10" VAR="booz2_guidance_h_pos_sp.x" MAX="10" ALT_UNIT_COEF="0.00390625"/>
            <dl_setting STEP="1" ALT_UNIT="m" SHORTNAME="sp_y_ned" MODULE="guidance/booz2_guidance_h" UNIT="1/2^8m" MIN="-10" VAR="booz2_guidance_h_pos_sp.y" MAX="10" ALT_UNIT_COEF="0.00390625"/>
            <dl_setting STEP="5" ALT_UNIT="deg" SHORTNAME="sp_psi" MODULE="guidance/booz2_guidance_h" UNIT="1/2^20r" MIN="-180" VAR="booz2_guidance_h_psi_sp" MAX="180" ALT_UNIT_COEF="0.000054641513360"/>
            <dl_setting STEP="1" SHORTNAME="kp" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_pgain" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="kd" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_dgain" MAX="0"/>
            <dl_setting STEP="1" HANDLER="SetKi" SHORTNAME="ki" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_igain" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="kn" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_ngain" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ka" MODULE="guidance/booz2_guidance_h" MIN="0" VAR="booz2_guidance_h_again" MAX="200"/>
            <dl_setting STEP="1" SHORTNAME="hf_realign" MODULE="booz2_ins" MIN="0" VAR="booz_ins_hf_realign" VALUES="OFF|ON" MAX="1"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting STEP="0.1" HANDLER="SetFlightAltitude" MODULE="booz2_navigation" UNIT="m" MIN="0" VAR="flight_altitude" MAX="400"/>
            <dl_setting STEP="1" ALT_UNIT="deg" MODULE="booz2_navigation" UNIT="1/2^12r" MIN="0" VAR="nav_heading" MAX="360" ALT_UNIT_COEF="0.0139882"/>
            <dl_setting STEP="0.1" MODULE="booz2_navigation" UNIT="m" MIN="-150" VAR="nav_radius" MAX="150"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="GSM" ac_id="19" airframe="airframes/hitl_usb_gsm.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/hitl.xml" flight_plan="flight_plans/basic.xml" settings="settings/basic.xml" gui_color="blue">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="2" Y="139.1" X="132.3"/>
          <waypoint NAME="MOB" Y="-11.6" X="137.0"/>
          <waypoint NAME="S1" Y="69.6" X="-119.2"/>
          <waypoint NAME="S2" Y="209.5" X="274.4"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions>
          <exception COND="datalink_time > 22" DEROUTE="Standby"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" KEY="F8" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <circle WP="MOB" RADIUS="nav_radius"/>
          </block>
          <block NAME="Line 1-2" STRIP_ICON="line.png" STRIP_BUTTON="Line (wp 1-2)">
            <call FUN="nav_line_init()"/>
            <call FUN="nav_line(WP_1, WP_2, nav_radius)"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Path 1,2,S1,S2,STDBY" STRIP_ICON="path.png" STRIP_BUTTON="Path (1,2,S1,S2,STDBY)">
            <path WPTS="1,2 S1"/>
            <path APPROACHING_TIME="1" THROTTLE="0.4" PITCH="auto" WPTS="S1, S2 STDBY"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="HITL for Olimex">
        <modules>
          <load NAME="gsm.xml"/>
          <load NAME="max3100.xml"/>
        </modules>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
        </commands>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="LATERAL_CORRECTION" VALUE="0.75"/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="0.75"/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1.5"/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="0."/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="2"/>
          <define NAME="CORRECTION_UP" VALUE="1.0"/>
          <define NAME="CORRECTION_DOWN" VALUE="1.0"/>
          <define NAME="CORRECTION_LEFT" VALUE="1.0"/>
          <define NAME="CORRECTION_RIGHT" VALUE="1.0"/>
        </section>
        <section NAME="BAT">
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="0"/>
          <define UNIT="V" NAME="LOW_BAT_LEVEL" VALUE="3.5"/>
          <define UNIT="V" NAME="CRITIC_BAT_LEVEL" VALUE="4"/>
          <define UNIT="V" NAME="MAX_BAT_LEVEL" VALUE="4.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="13."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="80."/>
          <define NAME="GLIDE_AIRSPEED" VALUE="10"/>
          <define NAME="GLIDE_VSPEED" VALUE="3."/>
          <define UNIT="deg" NAME="GLIDE_PITCH" VALUE="45"/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL" VALUE="11.1"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.03"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.5"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.25"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.85"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-4000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.15"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.01"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.05"/>
          <define UNIT="s" NAME="THROTTLE_SLEW_LIMITER" VALUE="2"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1.10800004005"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.6"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="PITCH_PGAIN" VALUE="-15184.5644531"/>
          <define NAME="PITCH_DGAIN" VALUE="1.5"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="1250"/>
          <define NAME="ROLL_SLEW" VALUE="0.1"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-7500"/>
          <define NAME="ROLL_RATE_GAIN" VALUE="-1500"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="1.00"/>
          <define NAME="CLIMB_PITCH" VALUE="0.3"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.25"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="2"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
        </section>
        <makefile>CONFIG=\&quot;tiny_2_1_1_usb.h\&quot;
include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=$(CONFIG) -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
# Through USB
ap.CFLAGS += -DDOWNLINK -DDOWNLINK_TRANSPORT=PprzTransport -DUSE_USB_SERIAL
ap.CFLAGS += -DDOWNLINK_FBW_DEVICE=UsbS -DDOWNLINK_AP_DEVICE=UsbS -DPPRZ_UART=UsbS -DDATALINK=PPRZ
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c $(SRC_ARCH)/usb_ser_hw.c datalink.c pprz_transport.c
ap.srcs += $(SRC_ARCH)/lpcusb/usbhw_lpc.c $(SRC_ARCH)/lpcusb/usbcontrol.c
ap.srcs += $(SRC_ARCH)/lpcusb/usbstdreq.c $(SRC_ARCH)/lpcusb/usbinit.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c 
ap.CFLAGS += -DGPS -DUBX
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN -DWIND_INFO
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c
ap.srcs += nav_line.c nav_survey_rectangle.c
# Configuration for Hardware In The Loop
ap.CFLAGS += -DHITL
ap.CFLAGS += -DGPS_USE_LATLONG # simulating LEA 5H
######### max3100
ap.CFLAGS += -DMAX3100_FOSC=3686400 -DMAX3100_BAUD_RATE=MAX3100_B9600 -DMAX3100_IRQ_PIN=16
######### GSM
ap.CFLAGS += -DGSM_LINK=Uart3100 -DGSM_ONOFF_LED=CAM_SWITCH_LED
# ap.CFLAGS += -DUART1_BAUD=B9600 -DUSE_UART1 -DGSM_LINK=Uart1
ap.CFLAGS += -DGCS_NUMBER=\&quot;+33675361208\&quot; -DGSM_CMD_LINE_TERMINATION=\&apos;\\r\&apos; -DGSM_RESPONSE_FORMATING=\&apos;\\n\&apos;
########## Modules
ap.CFLAGS += -DUSE_MODULES
# Config for SITL simulation
sim.ARCHDIR = $(ARCHI)
sim.ARCH = sitl
sim.TARGET = autopilot
sim.TARGETDIR = autopilot
sim.CFLAGS += -DSITL -DAP -DFBW -DINTER_MCU -DDOWNLINK -DDOWNLINK_TRANSPORT=IvyTransport -DINFRARED -DNAV -DLED
sim.srcs = latlong.c downlink.c commands.c gps.c inter_mcu.c infrared.c fw_h_ctl.c fw_v_ctl.c nav.c estimator.c sys_time.c main_fbw.c main_ap.c datalink.c $(SRC_ARCH)/ppm_hw.c $(SRC_ARCH)/sim_gps.c $(SRC_ARCH)/sim_ir.c $(SRC_ARCH)/sim_ap.c $(SRC_ARCH)/ivy_transport.c $(SRC_ARCH)/sim_adc_generic.c $(SRC_ARCH)/led_hw.c
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN
sim.srcs += nav_survey_rectangle.c nav_line.c traffic_info.c
########## Modules
sim.CFLAGS += -DUSE_MODULES
######### GSM
sim.CFLAGS += -DGSM_LINK=StdInOut -DGCS_NUMBER=\&quot;+33633550387\&quot; -DGSM_CR=\&apos;\\n\&apos;
sim.srcs += $(SRC_ARCH)/sim_uart_hw.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="0.05"/>
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="nav_course" MAX="360"/>
            <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-10" VAR="nav_shift" MAX="10"/>
            <dl_setting STEP="1" HANDLER="ResetFlightTimeAndLaunch" SHORTNAME="flight time" MODULE="autopilot" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="estimator" MIN="0" VAR="pprz_mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" MAX="2"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
          </dl_settings>
          <dl_settings NAME="Infrared">
            <dl_setting STEP="1" PARAM="IR_ROLL_NEUTRAL_DEFAULT" ALT_UNIT="deg" SHORTNAME="roll neutral" MODULE="infrared" UNIT="rad" MIN="-15" VAR="ir_roll_neutral" MAX="15" ALT_UNIT_COEF="57.3"/>
            <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch neutral" MODULE="infrared" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="JSBSIM" ac_id="3" airframe="airframes/jsbsim.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/versatile.xml" settings="settings/tuning.xml" gui_color="blue">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Versatile" LON0="1.2729" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" QFU="270" LAT0="43.4622">
        <header>#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="80" X="20"/>
          <waypoint NAME="1" Y="102.2" X="44.8"/>
          <waypoint NAME="2" Y="122.9" X="-63.5"/>
          <waypoint NAME="MOB" Y="-21.2" X="-11.5"/>
          <waypoint NAME="S1" Y="80.4" X="-151.6"/>
          <waypoint NAME="S2" Y="214.9" X="180.1"/>
          <waypoint NAME="AF" Y="-10" X="200" ALT="30"/>
          <waypoint NAME="TD" Y="20.0" X="80.0" ALT="0"/>
          <waypoint NAME="BASELEG" Y="-23.0" X="26.9"/>
          <waypoint NAME="_1" Y="0" X="-100"/>
          <waypoint NAME="_2" Y="200" X="-100"/>
          <waypoint NAME="_3" Y="200" X="100"/>
          <waypoint NAME="_4" Y="0" X="100"/>
          <waypoint NAME="CLIMB" Y="35.4" X="-122.5"/>
        </waypoints>
        <sectors>
          <sector NAME="Square">
            <corner NAME="_1"/>
            <corner NAME="_2"/>
            <corner NAME="_3"/>
            <corner NAME="_4"/>
          </sector>
        </sectors>
        <exceptions/>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 10)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <go WP="CLIMB"/>
          </block>
          <block NAME="Standby" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <circle WP="MOB" RADIUS="100"/>
          </block>
          <block NAME="Auto pitch (circle wp 1)">
            <circle THROTTLE="0.3" WP="1" PITCH="auto" RADIUS="200"/>
          </block>
          <block NAME="Climb 75% throttle">
            <circle THROTTLE="0.75" WP="1" PITCH="10" RADIUS="50+(estimator_z-ground_alt)/2" VMODE="throttle" UNTIL="(10 > PowerVoltage()) || (estimator_z > ground_alt+ 1350)"/>
          </block>
          <block NAME="Climb 0m/s">
            <circle WP="1" CLIMB="0" RADIUS="nav_radius" VMODE="climb" UNTIL="10 > PowerVoltage()"/>
          </block>
          <block NAME="Climb 1m/s">
            <circle WP="1" PITCH="5" CLIMB="1" RADIUS="50+(estimator_z-ground_alt)/2" VMODE="climb" UNTIL="10 > PowerVoltage()"/>
          </block>
          <block NAME="Climb nav_climb m/s">
            <circle WP="1" CLIMB="nav_climb" RADIUS="nav_radius" VMODE="climb" UNTIL="(10 > PowerVoltage()) || (estimator_z > ground_alt+ 1350)"/>
          </block>
          <block NAME="Circle 0% throttle">
            <circle THROTTLE="0.0" WP="1" PITCH="fp_pitch" RADIUS="nav_radius" VMODE="throttle" UNTIL="ground_alt+50 > estimator_z"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Oval 0% throttle">
            <oval THROTTLE="0.0" PITCH="fp_pitch" RADIUS="nav_radius" P2="2" P1="1" VMODE="throttle" UNTIL="ground_alt+50 > estimator_z"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Route 1-2">
            <go APPROACHING_TIME="0" WP="2" FROM="1" HMODE="route"/>
          </block>
          <block NAME="Stack wp 2">
            <circle WP="2" RADIUS="75"/>
          </block>
          <block NAME="Route 2-1">
            <go APPROACHING_TIME="0" WP="1" FROM="2" HMODE="route"/>
          </block>
          <block NAME="Stack wp 1">
            <circle WP="1" RADIUS="75"/>
          </block>
          <block NAME="Glide 1-2">
            <go WP="2" FROM="1" HMODE="route" VMODE="glide"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)"/>
            <circle WP="BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <set VAR="v_ctl_auto_throttle_cruise_throttle" VALUE="V_CTL_AUTO_THROTTLE_MIN_CRUISE_THROTTLE"/>
            <circle WP="BASELEG" RADIUS="nav_radius" UNTIL="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10) && 10 > fabs(estimator_z - WaypointAlt(WP_BASELEG))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
          <block NAME="Steps roll -10, +10">
            <while COND="TRUE">
              <attitude ROLL="10.0" ALT="250" VMODE="alt" UNTIL=" stage_time > 6"/>
              <attitude ROLL="-10.0" ALT="250" VMODE="alt" UNTIL="stage_time > 6"/>
            </while>
          </block>
          <block NAME="Steps roll -20, +20">
            <while COND="TRUE">
              <attitude ROLL="20.0" ALT="250" VMODE="alt" UNTIL=" stage_time > 3"/>
              <attitude ROLL="-20.0" ALT="250" VMODE="alt" UNTIL="stage_time > 3"/>
            </while>
          </block>
          <block NAME="Steps pitch -10, +10">
            <while COND="TRUE">
              <attitude ROLL="0.0" PITCH="10" ALT="250" VMODE="alt" UNTIL=" stage_time > 2"/>
              <attitude ROLL="0.0" PITCH="-10" ALT="250" VMODE="alt" UNTIL=" stage_time > 2"/>
            </while>
          </block>
          <block NAME="Heading 30">
            <heading ALT="ground_alt+50" COURSE="30" UNTIL="FALSE"/>
          </block>
          <block NAME="For loop (circles wp 1)">
            <for VAR="i" FROM="0" TO="3">
              <circle WP="1" RADIUS="DEFAULT_CIRCLE_RADIUS+ $i*10" UNTIL="NavCircleCount() > 1"/>
            </for>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Test datalink (go to wp 2)">
            <exception COND="datalink_time > 22" DEROUTE="Standby"/>
            <go WP="2" FROM="STDBY" HMODE="route"/>
            <go WP="STDBY" FROM="2" HMODE="route"/>
          </block>
          <block NAME="Fly in Square">
            <exception COND="! InsideSquare(estimator_x, estimator_y)" DEROUTE="Come back wp 1"/>
            <attitude ROLL="0" ALT="ground_alt+75" VMODE="alt"/>
          </block>
          <block NAME="Come back wp 1">
            <exception COND="InsideSquare(estimator_x, estimator_y)" DEROUTE="Fly in Square"/>
            <go WP="1"/>
            <deroute BLOCK="Fly in Square"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Funjet 1 Tiny 2.1">
        <servos>
          <servo NEUTRAL="1000" MAX="2000" NAME="MOTOR" NO="0" MIN="1000"/>
          <servo NEUTRAL="1500" MAX="1880" NAME="AILEVON_LEFT" NO="2" MIN="1130"/>
          <servo NEUTRAL="1515" MAX="1170" NAME="AILEVON_RIGHT" NO="6" MIN="1980"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILEVON_AILERON_RATE" VALUE="0.75"/>
          <define NAME="AILEVON_ELEVATOR_RATE" VALUE="0.75"/>
        </section>
        <command_laws>
          <let VAR="aileron" VALUE="@ROLL  * AILEVON_AILERON_RATE"/>
          <let VAR="elevator" VALUE="@PITCH * AILEVON_ELEVATOR_RATE"/>
          <set VALUE="@THROTTLE" SERVO="MOTOR"/>
          <set VALUE="$elevator + $aileron" SERVO="AILEVON_LEFT"/>
          <set VALUE="$elevator - $aileron" SERVO="AILEVON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.85"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_1"/>
          <define NAME="IR2" VALUE="ADC_2"/>
          <define NAME="IR_TOP" VALUE="ADC_0"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
          <define NAME="GYRO_ROLL" VALUE="ADC_3"/>
          <define NAME="GYRO_NB_SAMPLES" VALUE="16"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="512"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1.5"/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="IR2_SIGN" VALUE="-1"/>
          <define NAME="TOP_SIGN" VALUE="-1"/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="-3.6"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="6"/>
          <define NAME="CORRECTION_UP" VALUE="1."/>
          <define NAME="CORRECTION_DOWN" VALUE="1."/>
          <define NAME="CORRECTION_LEFT" VALUE="1."/>
          <define NAME="CORRECTION_RIGHT" VALUE="1."/>
        </section>
        <section NAME="GYRO" PREFIX="GYRO_">
          <define NAME="ADC_ROLL_NEUTRAL" VALUE="520"/>
          <define NAME="ADC_TEMP_NEUTRAL" VALUE="476"/>
          <define NAME="ADC_TEMP_SLOPE" VALUE="0"/>
          <define UNIT="deg/s" NAME="DYNAMIC_RANGE" VALUE="300"/>
          <define NAME="ADXRS300_RESISTOR_BRIDGE" VALUE="(3.3/(3.3+1.8))"/>
          <define UNIT="mV/(deg/s)" NAME="ADXRS300_SENSITIVITY" VALUE="5"/>
          <define UNIT="deg/s/adc_unit" NAME="ROLL_SCALE" VALUE="3.3*1000./1024./(GYRO_ADXRS300_SENSITIVITY*GYRO_ADXRS300_RESISTOR_BRIDGE)"/>
          <define NAME="ROLL_DIRECTION" VALUE="-1."/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="2000"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="17."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="TRIGGER_DELAY" VALUE="1."/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="80."/>
          <define NAME="MIN_CIRCLE_RADIUS" VALUE="50."/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL" VALUE="11.1"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.04"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.35"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.3"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.80"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-1000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.02"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.1"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.05"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="0.075"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="THROTTLE_SLEW" VALUE="0.5"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1."/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.7"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="PITCH_PGAIN" VALUE="-10000."/>
          <define NAME="PITCH_DGAIN" VALUE="1.5"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="2500"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-7500"/>
          <define NAME="ROLL_RATE_GAIN" VALUE="-1500"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
          <define NAME="NAV_CROSS_TRACK_ERROR_IGAIN" VALUE="0.05"/>
          <define UNIT="deg" NAME="NAV_CROSS_TRACK_ERROR_MAX" VALUE="10."/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.7"/>
          <define NAME="CLIMB_PITCH" VALUE="0.25"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.15"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="GYRO_GAINS">
          <define NAME="GYRO_MAX_RATE" VALUE="200."/>
          <define NAME="ROLLRATESUM_NB_SAMPLES" VALUE="64"/>
          <define NAME="ALT_ROLL__PGAIN" VALUE="1.0"/>
          <define NAME="ROLL_RATE_PGAIN" VALUE="1000.0"/>
          <define NAME="ROLL_RATE_IGAIN" VALUE="0.0"/>
          <define NAME="ROLL_RATE_DGAIN" VALUE="0.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="1"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
        <section NAME="SIMU">
          <define NAME="JSBSIM_MODEL" VALUE="&quot;Malolo1&quot;"/>
          <define NAME="JSBSIM_IR_ROLL_NEUTRAL" VALUE="RadOfDeg(0.)"/>
          <define NAME="JSBSIM_IR_PITCH_NEUTRAL" VALUE="RadOfDeg(0.)"/>
        </section>
        <makefile>#### Config for SITL simulation
include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN
sim.srcs += nav_line.c nav_survey_rectangle.c
#### Config for SITL simulation with JSBSim
include $(PAPARAZZI_SRC)/conf/autopilot/sitl_jsbsim.makefile
jsbsim.CFLAGS += -I/home/cocoleon/usr/include/JSBSim
jsbsim.LDFLAGS += -L/home/cocoleon/usr/lib/
jsbsim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN
jsbsim.srcs += nav_line.c nav_survey_rectangle.c
jsbsim.srcs += $(SIMDIR)/sim_ac_fw.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="stage_time" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MODULE="downlink" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" PARAM="IR_ROLL_NEUTRAL_DEFAULT" SHORTNAME="roll_neutral" UNIT="rad" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch_neutral" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LATERAL_CORRECTION" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LONGITUDINAL_CORRECTION" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_VERTICAL_CORRECTION" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_LEFT" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_RIGHT" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_UP" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_DOWN" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="0" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" PARAM="H_CTL_ROLL_MAX_SETPOINT" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="1"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_PGAIN" SHORTNAME="pitch_pgain" MIN="-55000" VAR="h_ctl_pitch_pgain" MAX="0"/>
              <dl_setting STEP="10" PARAM="H_CTL_PITCH_DGAIN" SHORTNAME="pitch_dgain" MIN="-50000" VAR="h_ctl_pitch_dgain" MAX="0"/>
              <dl_setting STEP="100" PARAM="H_CTL_ELEVATOR_OF_ROLL" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_RATE_GAIN" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" PARAM="V_CTL_ALTITUDE_PGAIN" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.005" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" PARAM="V_CTL_AUTO_THROTTLE_LOITER_TRIM" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_PGAIN" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_IGAIN" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" PARAM="H_CTL_COURSE_PGAIN" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" PARAM="NAV_GLIDE_PITCH_TRIM" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="1" MIN="1" VAR="nav_mode" MAX="2"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="1" MIN="-20" VAR="fp_pitch" MAX="20"/>
              <dl_setting STEP="0.1" MIN="0" VAR="fp_throttle" MAX="1"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="5" VAR="nav_ground_speed_setpoint" MAX="50"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.2" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MERLIN" ac_id="18" airframe="airframes/ENAC/fixed-wing/merlin.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/basic.xml" settings="settings/basic.xml" gui_color="#feed4f854f85">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="2" Y="139.1" X="132.3"/>
          <waypoint NAME="MOB" Y="-11.6" X="137.0"/>
          <waypoint NAME="S1" Y="69.6" X="-119.2"/>
          <waypoint NAME="S2" Y="209.5" X="274.4"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions>
          <exception COND="datalink_time > 22" DEROUTE="Standby"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" KEY="F8" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <circle WP="MOB" RADIUS="nav_radius"/>
          </block>
          <block NAME="Line 1-2" STRIP_ICON="line.png" STRIP_BUTTON="Line (wp 1-2)">
            <call FUN="nav_line_init()"/>
            <call FUN="nav_line(WP_1, WP_2, nav_radius)"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Path 1,2,S1,S2,STDBY" STRIP_ICON="path.png" STRIP_BUTTON="Path (1,2,S1,S2,STDBY)">
            <path WPTS="1,2 S1"/>
            <path APPROACHING_TIME="1" THROTTLE="0.4" PITCH="auto" WPTS="S1, S2 STDBY"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Merlin">
        <firmware NAME="fixedwing">
          <target NAME="ap" BOARD="tiny_2.11">
            <define NAME="PITCH_TRIM"/>
            <define NAME="ALT_KALMAN"/>
          </target>
          <target NAME="sim" BOARD="pc">
            <define NAME="PITCH_TRIM"/>
            <define NAME="ALT_KALMAN"/>
          </target>
          <subsystem NAME="radio_control" TYPE="ppm"/>
          <subsystem NAME="telemetry" TYPE="transparent"/>
          <subsystem NAME="control_new"/>
          <subsystem NAME="attitude" TYPE="infrared"/>
          <subsystem NAME="gps" TYPE="ublox_lea5h"/>
          <subsystem NAME="navigation"/>
        </firmware>
        <firmware NAME="setup">
          <target NAME="tunnel" BOARD="tiny_2.11"/>
          <target NAME="setup_actuators" BOARD="tiny_2.11"/>
        </firmware>
        <servos>
          <servo NEUTRAL="1500" MAX="1100" NAME="AILERON_RIGHT" NO="0" MIN="1900"/>
          <servo NEUTRAL="1500" MAX="1100" NAME="AILERON_LEFT" NO="2" MIN="1900"/>
          <servo NEUTRAL="1500" MAX="1900" NAME="ELEVATOR" NO="6" MIN="1100"/>
          <servo NEUTRAL="1500" MAX="1900" NAME="RUDDER" NO="7" MIN="1100"/>
          <servo NEUTRAL="1000" MAX="2000" NAME="MOTOR" NO="3" MIN="1000"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
          <set COMMAND="YAW" VALUE="@YAW"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILERON_DIFF" VALUE="0.8"/>
        </section>
        <command_laws>
          <set VALUE="@THROTTLE" SERVO="MOTOR"/>
          <set VALUE="@PITCH" SERVO="ELEVATOR"/>
          <set VALUE="@YAW" SERVO="RUDDER"/>
          <let VAR="roll" VALUE="@ROLL"/>
          <set VALUE="($roll > 0 ? 1 : AILERON_DIFF) * $roll" SERVO="AILERON_LEFT"/>
          <set VALUE="($roll > 0 ? AILERON_DIFF : 1) * $roll" SERVO="AILERON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.85"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="512"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1"/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1"/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1"/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="IR1_SIGN" VALUE="1"/>
          <define NAME="IR2_SIGN" VALUE="1"/>
          <define NAME="TOP_SIGN" VALUE="1"/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="0"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="0"/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="20000"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
          <define NAME="VoltageOfAdc(adc)" VALUE="(0.02454*adc)"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="MINIMUM_AIRSPEED" VALUE="10."/>
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="12."/>
          <define UNIT="m/s" NAME="MAXIMUM_AIRSPEED" VALUE="18."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="FALSE"/>
          <define NAME="TRIGGER_DELAY" VALUE="1."/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="120."/>
          <define NAME="MIN_CIRCLE_RADIUS" VALUE="50."/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL" VALUE="11.1"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.06"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.45"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.25"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.85"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1000"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-1200"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.2"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.023"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.05"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.06"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="-0.0"/>
          <define NAME="AUTO_PITCH_DGAIN" VALUE="-0.0"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="PITCH_LOITER_TRIM" VALUE="RadOfDeg(5.)"/>
          <define NAME="PITCH_DASH_TRIM" VALUE="RadOfDeg(-5.)"/>
          <define NAME="THROTTLE_SLEW" VALUE="0.1"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1.0"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.60"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-5900"/>
          <define NAME="ROLL_RATE_GAIN" VALUE="-2900"/>
          <define NAME="ROLL_IGAIN" VALUE="-500"/>
          <define NAME="ROLL_KFFA" VALUE="-500"/>
          <define NAME="ROLL_KFFD" VALUE="-500"/>
          <define NAME="PITCH_PGAIN" VALUE="-9000."/>
          <define NAME="PITCH_DGAIN" VALUE="1.5"/>
          <define NAME="PITCH_IGAIN" VALUE="-500"/>
          <define NAME="PITCH_KFFA" VALUE="0."/>
          <define NAME="PITCH_KFFD" VALUE="0."/>
          <define NAME="PITCH_OF_ROLL" VALUE="RadOfDeg(0.2)"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="50"/>
          <define NAME="BLEND_END" VALUE="15"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.9"/>
          <define NAME="CLIMB_PITCH" VALUE="0.35"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.05"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.35"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="2"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.17"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.08"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="nav_course" MAX="360"/>
            <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-10" VAR="nav_shift" MAX="10"/>
            <dl_setting STEP="1" HANDLER="ResetFlightTimeAndLaunch" SHORTNAME="flight time" MODULE="autopilot" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="estimator" MIN="0" VAR="pprz_mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" MAX="2"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
          </dl_settings>
          <dl_settings NAME="Infrared">
            <dl_setting STEP="1" PARAM="IR_ROLL_NEUTRAL_DEFAULT" ALT_UNIT="deg" SHORTNAME="roll neutral" MODULE="infrared" UNIT="rad" MIN="-15" VAR="ir_roll_neutral" MAX="15" ALT_UNIT_COEF="57.3"/>
            <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch neutral" MODULE="infrared" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MI3" ac_id="133" airframe="airframes/obsolete/microjetIII.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/basic.xml" settings="settings/tuning.xml" gui_color="#f3cda0d7a0d7">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="2" Y="139.1" X="132.3"/>
          <waypoint NAME="MOB" Y="-11.6" X="137.0"/>
          <waypoint NAME="S1" Y="69.6" X="-119.2"/>
          <waypoint NAME="S2" Y="209.5" X="274.4"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions>
          <exception COND="datalink_time > 22" DEROUTE="Standby"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" KEY="F8" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <circle WP="MOB" RADIUS="nav_radius"/>
          </block>
          <block NAME="Line 1-2" STRIP_ICON="line.png" STRIP_BUTTON="Line (wp 1-2)">
            <call FUN="nav_line_init()"/>
            <call FUN="nav_line(WP_1, WP_2, nav_radius)"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Path 1,2,S1,S2,STDBY" STRIP_ICON="path.png" STRIP_BUTTON="Path (1,2,S1,S2,STDBY)">
            <path WPTS="1,2 S1"/>
            <path APPROACHING_TIME="1" THROTTLE="0.4" PITCH="auto" WPTS="S1, S2 STDBY"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Microjet III Tiny 1.1">
        <servos>
          <servo NEUTRAL="1290" MAX="1810" NAME="THROTTLE" NO="0" MIN="1290"/>
          <servo NEUTRAL="1510" MAX="1000" NAME="AILEVON_LEFT" NO="1" MIN="2000"/>
          <servo NEUTRAL="1535" MAX="2000" NAME="AILEVON_RIGHT" NO="3" MIN="1000"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILEVON_AILERON_RATE" VALUE="0.4"/>
          <define NAME="AILEVON_ELEVATOR_RATE" VALUE="0.7"/>
        </section>
        <command_laws>
          <let VAR="aileron" VALUE="@ROLL  * AILEVON_AILERON_RATE"/>
          <let VAR="elevator" VALUE="@PITCH * AILEVON_ELEVATOR_RATE"/>
          <set VALUE="@THROTTLE" SERVO="THROTTLE"/>
          <set VALUE="$elevator + $aileron" SERVO="AILEVON_LEFT"/>
          <set VALUE="$elevator - $aileron" SERVO="AILEVON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.7"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_1"/>
          <define NAME="IR2" VALUE="ADC_2"/>
          <define NAME="IR_TOP" VALUE="ADC_0"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
          <define NAME="GYRO_ROLL" VALUE="ADC_3"/>
          <define NAME="GYRO_NB_SAMPLES" VALUE="16"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="512"/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="IR2_SIGN" VALUE="-1"/>
          <define NAME="TOP_SIGN" VALUE="-1"/>
          <define NAME="LATERAL_CORRECTION" VALUE="0.7"/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1."/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="-5.15"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="0"/>
          <define NAME="CORRECTION_UP" VALUE="1.0"/>
          <define NAME="CORRECTION_DOWN" VALUE="1.0"/>
          <define NAME="CORRECTION_LEFT" VALUE="1.0"/>
          <define NAME="CORRECTION_RIGHT" VALUE="1.0"/>
        </section>
        <section NAME="GYRO" PREFIX="GYRO_">
          <define NAME="ADC_ROLL_NEUTRAL" VALUE="500"/>
          <define UNIT="deg/s" NAME="DYNAMIC_RANGE" VALUE="300"/>
          <define NAME="ADXRS300_RESISTOR_BRIDGE" VALUE="(3.3/(3.3+1.8))"/>
          <define UNIT="mV/(deg/s)" NAME="ADXRS300_SENSITIVITY" VALUE="5"/>
          <define UNIT="deg/s/adc_unit" NAME="ROLL_SCALE" VALUE="3.3*1000./1024./(GYRO_ADXRS300_SENSITIVITY*GYRO_ADXRS300_RESISTOR_BRIDGE)"/>
          <define NAME="ROLL_DIRECTION" VALUE="1."/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="8600"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="13."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="XBEE_INIT" VALUE="&quot;ATPL2\\rATRN5\\rATTT80\\r&quot;"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="80."/>
          <define NAME="GLIDE_AIRSPEED" VALUE="10"/>
          <define NAME="GLIDE_VSPEED" VALUE="3."/>
          <define UNIT="deg" NAME="GLIDE_PITCH" VALUE="45"/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL" VALUE="11.1"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.03"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.32"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.25"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.65"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-4000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.15"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.01"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.05"/>
          <define UNIT="s" NAME="THROTTLE_SLEW_LIMITER" VALUE="2"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1.4"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.6"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="PITCH_PGAIN" VALUE="-12000."/>
          <define NAME="PITCH_DGAIN" VALUE="1.5"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="1250"/>
          <define NAME="ROLL_SLEW" VALUE="0.1"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-7500"/>
          <define NAME="ROLL_RATE_GAIN" VALUE="-1500"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="1.00"/>
          <define NAME="CLIMB_PITCH" VALUE="0.3"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.25"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="2"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
        </section>
        <section NAME="DATALINK" PREFIX="DATALINK_">
          <define NAME="DEVICE_TYPE" VALUE="XBEE"/>
          <define NAME="DEVICE_ADDRESS" VALUE="...."/>
        </section>
        <makefile>CONFIG=\&quot;tiny_1_1.h\&quot;
include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=$(CONFIG) -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
ap.CFLAGS += -DACTUATORS=\&quot;servos_4015_MAT_hw.h\&quot; -DSERVOS_4015_MAT
ap.srcs += $(SRC_ARCH)/servos_4015_MAT_hw.c actuators.c
# 41.200MHz
ap.CFLAGS += -DRADIO_CONTROL
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c
ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=XBeeTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DXBEE_UART=Uart0 -DDATALINK=XBEE -DUART0_BAUD=B9600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c xbee.c
# transparent
#ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DPPRZ_UART=Uart0 -DDATALINK=PPRZ -DUART0_BAUD=B57600
#ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c pprz_transport.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_2 -DUSE_ADC_3
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART1 -DGPS_LINK=Uart1 -DUART1_BAUD=B38400
#ap.CFLAGS += -DGPS_CONFIGURE -DGPS_BAUD=38400
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN -DWIND_INFO
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c
ap.CFLAGS += -DGYRO -DADXRS150
# -DESTIMATOR_COMP_FILTER
ap.srcs += gyro.c
ap.srcs += nav_line.c nav_survey_rectangle.c
ap.srcs += traffic_info.c
# PID sensor
ap.CFLAGS += -DUSE_ADC_6 -DUSE_ADC_GENERIC -DADC_CHANNEL_GENERIC1=ADC_6 -DADC_CHANNEL_GENERIC_NB_SAMPLES=16
ap.srcs += adc_generic.c
# Config for SITL simulation
include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN
# -DESTIMATOR_COMP_FILTER
sim.srcs += nav_survey_rectangle.c nav_line.c traffic_info.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="stage_time" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MODULE="downlink" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" PARAM="IR_ROLL_NEUTRAL_DEFAULT" SHORTNAME="roll_neutral" UNIT="rad" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch_neutral" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LATERAL_CORRECTION" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LONGITUDINAL_CORRECTION" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_VERTICAL_CORRECTION" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_LEFT" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_RIGHT" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_UP" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_DOWN" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="0" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" PARAM="H_CTL_ROLL_MAX_SETPOINT" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="1"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_PGAIN" SHORTNAME="pitch_pgain" MIN="-55000" VAR="h_ctl_pitch_pgain" MAX="0"/>
              <dl_setting STEP="10" PARAM="H_CTL_PITCH_DGAIN" SHORTNAME="pitch_dgain" MIN="-50000" VAR="h_ctl_pitch_dgain" MAX="0"/>
              <dl_setting STEP="100" PARAM="H_CTL_ELEVATOR_OF_ROLL" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_RATE_GAIN" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" PARAM="V_CTL_ALTITUDE_PGAIN" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.005" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" PARAM="V_CTL_AUTO_THROTTLE_LOITER_TRIM" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_PGAIN" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_IGAIN" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" PARAM="H_CTL_COURSE_PGAIN" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" PARAM="NAV_GLIDE_PITCH_TRIM" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="1" MIN="1" VAR="nav_mode" MAX="2"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="1" MIN="-20" VAR="fp_pitch" MAX="20"/>
              <dl_setting STEP="0.1" MIN="0" VAR="fp_throttle" MAX="1"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="5" VAR="nav_ground_speed_setpoint" MAX="50"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.2" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MINI" ac_id="17" airframe="airframes/ENAC/quadrotor/mini.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/telemetry_booz2.xml" flight_plan="flight_plans/basic_booz.xml" settings="settings/booz_cam.xml settings/settings_booz2.xml" gui_color="#3cf2d51335a7">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Booz Test Enac" LON0="1 28 52.61" MAX_DIST_FROM_HOME="400" GROUND_ALT="147" SECURITY_HEIGHT="2" ALT="152" LAT0="43 33 50.83">
        <header>    #include &quot;booz_fms.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0.0" X="0.0"/>
          <waypoint NAME="CLIMB" Y="5.0" X="0.0"/>
          <waypoint NAME="STDBY" Y="-5.0" X="-2.0"/>
          <waypoint NAME="p1" Y="-13.9" X="3.6"/>
          <waypoint NAME="p2" Y="-48.2" X="27.5"/>
          <waypoint NAME="p3" Y="-19.6" X="16.7"/>
          <waypoint NAME="p4" Y="-40.7" X="13.7"/>
          <waypoint NAME="CAM" Y="-50" X="-20" HEIGHT="2."/>
          <waypoint NAME="TD" Y="-10.9" X="5.6"/>
        </waypoints>
        <blocks>
          <block NAME="Wait GPS">
            <call FUN="NavKillThrottle()"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 10)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <call FUN="NavKillThrottle()"/>
            <attitude THROTTLE="0" ROLL="0" PITCH="0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
          <block NAME="Start Engine">
            <call FUN="NavResurrect()"/>
            <attitude THROTTLE="0." ROLL="0" PITCH="0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
          <block NAME="Takeoff" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff">
            <exception COND="booz_ins_enu_pos.z > POS_BFP_OF_REAL(2.)" DEROUTE="Standby"/>
            <call FUN="NavSetWaypointHere(WP_CLIMB)"/>
            <stay WP="CLIMB" CLIMB="0.5" VMODE="climb"/>
          </block>
          <block NAME="Standby" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <stay WP="STDBY"/>
          </block>
          <block NAME="stay_p1">
            <stay WP="p1"/>
          </block>
          <block NAME="go_p2">
            <go WP="p2"/>
            <deroute BLOCK="stay_p1"/>
          </block>
          <block NAME="line_p1_p2">
            <go WP="p2" FROM="p1" HMODE="route"/>
            <stay WP="p2" UNTIL="stage_time>10"/>
            <go WP="p1" FROM="p2" HMODE="route"/>
            <deroute BLOCK="stay_p1"/>
          </block>
          <block NAME="route">
            <go WP="p3" FROM="p1" HMODE="route"/>
            <go WP="p4" FROM="p3" HMODE="route"/>
            <go WP="p1" FROM="p4" HMODE="route"/>
            <deroute BLOCK="stay_p1"/>
          </block>
          <block NAME="circle">
            <circle WP="p1" RADIUS="nav_radius"/>
          </block>
          <block NAME="land here" STRIP_ICON="land-right.png" STRIP_BUTTON="Land Here">
            <call FUN="NavSetWaypointHere(WP_TD)"/>
          </block>
          <block NAME="land">
            <go WP="TD"/>
          </block>
          <block NAME="flare">
            <exception COND="NavDetectGround()" DEROUTE="Holding point"/>
            <call FUN="NavStartDetectGround()"/>
            <stay WP="TD" CLIMB="-0.8" VMODE="climb"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe name="Blender">
        <modules main_freq="512">
          <load name="booz_drop.xml"/>
          <load name="booz_cam.xml"/>
        </modules>
        <firmware name="rotorcraft">
          <target name="ap" board="booz_1.0">
            <define name="BOOZ_FAILSAFE_GROUND_DETECT"/>
            <define name="USE_GPS_ACC4R"/>
          </target>
          <target name="sim" board="pc">
            <subsystem name="fdm" type="nps"/>
          </target>
          <subsystem name="radio_control" type="ppm"/>
          <subsystem name="actuators" type="asctec"/>
          <subsystem name="imu" type="b2_v1.1"/>
          <subsystem name="gps" type="ublox"/>
          <subsystem name="ahrs" type="cmpl"/>
          <subsystem name="ins" type="hff"/>
        </firmware>
        <firmware name="booz_test_progs">
          <target name="test_telemetry" board="booz_1.0"/>
          <target name="test_baro" board="booz_1.0"/>
          <target name="test_rc_spektrum" board="booz_1.0"/>
          <target name="test_rc_ppm" board="booz_1.0"/>
        </firmware>
        <servos min="0" neutral="0" max="0xff">
          <servo name="PITCH" no="0" min="0" neutral="0" max="255"/>
          <servo name="ROLL" no="1" min="0" neutral="0" max="255"/>
          <servo name="YAW" no="2" min="0" neutral="0" max="255"/>
          <servo name="THRUST" no="3" min="0" neutral="0" max="255"/>
        </servos>
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <section name="IMU" prefix="IMU_">
          <define name="GYRO_P_CHAN" value="1"/>
          <define name="GYRO_Q_CHAN" value="0"/>
          <define name="GYRO_R_CHAN" value="2"/>
          <define name="GYRO_P_NEUTRAL" value="33100"/>
          <define name="GYRO_Q_NEUTRAL" value="32440"/>
          <define name="GYRO_R_NEUTRAL" value="33033"/>
          <define name="GYRO_P_SENS" value="1.00" integer="16"/>
          <define name="GYRO_Q_SENS" value="1.00" integer="16"/>
          <define name="GYRO_R_SENS" value="1.00" integer="16"/>
          <define name="ACCEL_X_CHAN" value="5"/>
          <define name="ACCEL_Y_CHAN" value="3"/>
          <define name="ACCEL_Z_CHAN" value="4"/>
          <define name="ACCEL_X_NEUTRAL" value="32932"/>
          <define name="ACCEL_Y_NEUTRAL" value="32251"/>
          <define name="ACCEL_Z_NEUTRAL" value="32463"/>
          <define name="ACCEL_X_SENS" value="2.59502439625" integer="16"/>
          <define name="ACCEL_Y_SENS" value="2.57636806334" integer="16"/>
          <define name="ACCEL_Z_SENS" value="2.59680479039" integer="16"/>
          <define name="MAG_X_CHAN" value="0"/>
          <define name="MAG_Y_CHAN" value="1"/>
          <define name="MAG_Z_CHAN" value="2"/>
          <define name="MAG_X_NEUTRAL" value="-75"/>
          <define name="MAG_Y_NEUTRAL" value="17"/>
          <define name="MAG_Z_NEUTRAL" value="7"/>
          <define name="MAG_X_SENS" value="5.50726991669" integer="16"/>
          <define name="MAG_Y_SENS" value="5.43740121157" integer="16"/>
          <define name="MAG_Z_SENS" value="2.60492836649" integer="16"/>
          <define name="BODY_TO_IMU_PHI" value="RadOfDeg(-1.5)"/>
          <define name="BODY_TO_IMU_THETA" value="RadOfDeg(-1.5)"/>
          <define name="BODY_TO_IMU_PSI" value="RadOfDeg(-45)"/>
        </section>
        <section name="STABILIZATION_RATE" prefix="BOOZ_STABILIZATION_RATE_">
          <define name="SP_MAX_P" value="10000"/>
          <define name="SP_MAX_Q" value="10000"/>
          <define name="SP_MAX_R" value="10000"/>
          <define name="GAIN_P" value="-400"/>
          <define name="GAIN_Q" value="-400"/>
          <define name="GAIN_R" value="-350"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="BOOZ_STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="RadOfDeg(45.)"/>
          <define name="SP_MAX_THETA" value="RadOfDeg(45.)"/>
          <define name="SP_MAX_R" value="RadOfDeg(90.)"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="REF_OMEGA_P" value="RadOfDeg(800)"/>
          <define name="REF_ZETA_P" value="0.85"/>
          <define name="REF_MAX_P" value="RadOfDeg(300.)"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_Q" value="RadOfDeg(800)"/>
          <define name="REF_ZETA_Q" value="0.85"/>
          <define name="REF_MAX_Q" value="RadOfDeg(300.)"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_R" value="RadOfDeg(500)"/>
          <define name="REF_ZETA_R" value="0.85"/>
          <define name="REF_MAX_R" value="RadOfDeg(90.)"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(900.)"/>
          <define name="PHI_PGAIN" value="-1500"/>
          <define name="PHI_DGAIN" value="-350"/>
          <define name="PHI_IGAIN" value="-50"/>
          <define name="THETA_PGAIN" value="-1500"/>
          <define name="THETA_DGAIN" value="-350"/>
          <define name="THETA_IGAIN" value="-50"/>
          <define name="PSI_PGAIN" value="-1000"/>
          <define name="PSI_DGAIN" value="-350"/>
          <define name="PSI_IGAIN" value="-10"/>
          <define name="PHI_DDGAIN" value=" 350"/>
          <define name="THETA_DDGAIN" value=" 350"/>
          <define name="PSI_DDGAIN" value=" 300"/>
        </section>
        <section name="SUPERVISION" prefix="SUPERVISION_">
          <define name="TRIM_A" value="0"/>
          <define name="TRIM_E" value="0"/>
          <define name="TRIM_R" value="0"/>
          <define name="HACK_45" value="1"/>
        </section>
        <section name="INS" prefix="BOOZ_INS_">
          <define name="BARO_SENS" value="16.5" integer="16"/>
        </section>
        <section name="GUIDANCE_V" prefix="BOOZ2_GUIDANCE_V_">
          <define name="MIN_ERR_Z" value="POS_BFP_OF_REAL(-10.)"/>
          <define name="MAX_ERR_Z" value="POS_BFP_OF_REAL( 10.)"/>
          <define name="MIN_ERR_ZD" value="SPEED_BFP_OF_REAL(-10.)"/>
          <define name="MAX_ERR_ZD" value="SPEED_BFP_OF_REAL( 10.)"/>
          <define name="MAX_SUM_ERR" value="2000000"/>
          <define name="REF_MIN_ZDD" value="-1.2*9.81"/>
          <define name="REF_MAX_ZDD" value=" 0.8*9.81"/>
          <define name="REF_MIN_ZD" value="-1.5"/>
          <define name="REF_MAX_ZD" value=" 1.5"/>
          <define name="HOVER_KP" value="-500"/>
          <define name="HOVER_KD" value="-250"/>
          <define name="HOVER_KI" value="0"/>
          <define name="RC_CLIMB_COEF" value="163"/>
          <define name="RC_CLIMB_DEAD_BAND" value="160000"/>
        </section>
        <section name="GUIDANCE_H" prefix="BOOZ2_GUIDANCE_H_">
          <define name="PGAIN" value="-140"/>
          <define name="DGAIN" value="-90"/>
          <define name="IGAIN" value="-30"/>
          <define name="NGAIN" value="-0"/>
          <define name="AGAIN" value="100"/>
        </section>
        <section name="BAT">
          <define name="MILLIAMP_PER_PERCENT" value="0.86"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="9.3" unit="V"/>
          <define name="BATTERY_SENS" value="0.25" integer="16"/>
        </section>
        <section name="AUTOPILOT">
          <define name="BOOZ2_MODE_MANUAL" value="BOOZ2_AP_MODE_ATTITUDE_DIRECT"/>
          <define name="BOOZ2_MODE_AUTO1" value="BOOZ2_AP_MODE_ATTITUDE_Z_HOLD"/>
          <define name="BOOZ2_MODE_AUTO2" value="BOOZ2_AP_MODE_NAV"/>
        </section>
        <section name="FMS">
          <define name="BOOZ_FMS_TIMEOUT" value="0"/>
        </section>
        <section name="CAM" prefix="BOOZ_CAM_">
          <define name="TILT_NEUTRAL" value="1500"/>
          <define name="TILT_MIN" value="1060"/>
          <define name="TILT_MAX" value="2250"/>
          <define name="TILT_ANGLE_MIN" value="RadOfDeg(-90.)" unit="rad"/>
          <define name="TILT_ANGLE_MAX" value="RadOfDeg(  0.)" unit="rad"/>
          <define name="PAN_NEUTRAL" value="0"/>
          <define name="PAN_MIN" value="0"/>
          <define name="PAN_MAX" value="25736"/>
          <define name="DEFAULT_MODE" value="BOOZ_CAM_MODE_MANUAL"/>
        </section>
        <section name="MISC">
          <define name="BOOZ_ANALOG_BARO_THRESHOLD" value="800"/>
          <define name="BOOZ2_FACE_REINJ_1" value="1024"/>
          <define name="DEFAULT_CIRCLE_RADIUS" value="10."/>
          <define name="BoozDropPwm(_v)" value="Booz2SetPwm1Value(_v)"/>
          <define name="IMU_MAG_OFFSET" value="-9."/>
        </section>
        <section name="GCS">
          <define name="ALT_SHIFT_PLUS_PLUS" value="5"/>
          <define name="ALT_SHIFT_PLUS" value="1"/>
          <define name="ALT_SHIFT_MINUS" value="-1"/>
        </section>
        <makefile location="after">ap.CFLAGS += -DB2_GUIDANCE_H_USE_REF
ap.CFLAGS += -DUSE_ADAPT_HOVER -DUSE_INS_NAV_INIT -DBOOZ_START_DELAY=3 -DUSE_PWM1
ap.CFLAGS += -DBOOZ_ACTUATORS_MAX_THRUST=160 -DBOOZ_THRUST_LOWPASS=17
ap.srcs += $(SRC_BOOZ_ARCH)/booz2_pwm_hw.c
sim.CFLAGS += -DBSM_PARAMS=\&quot;booz_sensors_model_params_booz2_a2.h\&quot;
sim.CFLAGS += -DNPS_NO_SUPERVISION
sim.CFLAGS += -DB2_GUIDANCE_H_USE_REF
sim.CFLAGS += -DUSE_ADAPT_HOVER -DUSE_INS_NAV_INIT -DBOOZ_START_DELAY=3
sim.srcs += $(SRC_BOOZ_SIM)/booz2_pwm_hw.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Main" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="DL_VALUE" PERIOD="1.1"/>
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="BOOZ2_FP" PERIOD="0.25"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
            <message NAME="BOOZ2_NAV_STATUS" PERIOD="1.6"/>
            <message NAME="WP_MOVED" PERIOD="1.3"/>
            <message NAME="CAM_TRACK" PERIOD="0.1"/>
            <message NAME="BOOZ2_GPS" PERIOD=".25"/>
            <message NAME="BOOZ_INS" PERIOD=".25"/>
          </mode>
          <mode NAME="ppm">
            <message NAME="BOOZ2_CMD" PERIOD=".05"/>
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="BOOZ2_RADIO_CONTROL" PERIOD="0.5"/>
            <message NAME="BOOZ_STATUS" PERIOD="1"/>
          </mode>
          <mode NAME="raw_sensors">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="IMU_ACCEL_RAW" PERIOD=".05"/>
            <message NAME="IMU_GYRO_RAW" PERIOD=".05"/>
            <message NAME="IMU_MAG_RAW" PERIOD=".05"/>
            <message NAME="BARO_RAW" PERIOD=".1"/>
            <message NAME="BOOZ2_SONAR" PERIOD="0.2"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_GYRO" PERIOD=".075"/>
            <message NAME="BOOZ2_ACCEL" PERIOD=".075"/>
            <message NAME="BOOZ2_MAG" PERIOD=".1"/>
          </mode>
          <mode NAME="ahrs">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_FILTER" PERIOD=".5"/>
            <message NAME="BOOZ2_AHRS_EULER" PERIOD=".1"/>
          </mode>
          <mode NAME="rate_loop">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_RATE_LOOP" PERIOD=".02"/>
          </mode>
          <mode NAME="attitude_loop">
            <message NAME="BOOZ_STATUS" PERIOD="2.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="3.1"/>
            <message NAME="BOOZ2_STAB_ATTITUDE" PERIOD=".05"/>
            <message NAME="BOOZ2_STAB_ATTITUDE_REF" PERIOD=".09"/>
          </mode>
          <mode NAME="vert_loop">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="0.9"/>
            <message NAME="BOOZ2_VFF" PERIOD=".05"/>
            <message NAME="BOOZ2_VERT_LOOP" PERIOD=".05"/>
            <message NAME="BOOZ2_INS" PERIOD=".05"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
          </mode>
          <mode NAME="h_loop">
            <message NAME="ALIVE" PERIOD="3.9"/>
            <message NAME="BOOZ2_HOVER_LOOP" PERIOD="0.062"/>
            <message NAME="BOOZ2_GUIDANCE_H_REF" PERIOD="0.1"/>
            <message NAME="BOOZ2_STAB_ATTITUDE" PERIOD=".4"/>
            <message NAME="BOOZ2_FP" PERIOD="0.8"/>
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="BOOZ2_NAV_STATUS" PERIOD="1.6"/>
            <message NAME="BOOZ2_HFF_GPS" PERIOD=".03"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
          </mode>
          <mode NAME="aligner">
            <message NAME="ALIVE" PERIOD="0.9"/>
            <message NAME="BOOZ2_FILTER_ALIGNER" PERIOD="0.02"/>
          </mode>
          <mode NAME="hs_att_roll">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="ALIVE" PERIOD="0.9"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
          </mode>
          <mode NAME="tune_hover">
            <message NAME="DL_VALUE" PERIOD="1.1"/>
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_TUNE_HOVER" PERIOD=".1"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="CAM">
            <dl_setting var="booz_cam_mode" MIN="0" STEP="1" MAX="3" module="cam_control/booz_cam" shortname="mode" values="NONE|MAN|HEADING|WP" handler="SetCamMode">
              <strip_button name="CN" value="0"/>
              <strip_button name="CM" value="1"/>
              <strip_button name="CH" value="2"/>
              <strip_button name="CWP" value="3"/>
              <key_press key="F1" value="0"/>
              <key_press key="F2" value="1"/>
            </dl_setting>
            <dl_setting var="booz_cam_tilt_pwm" min="1000" step="1" max="2500" shortname="tilt_pwm"/>
            <dl_setting var="booz_cam_tilt" min="-90" step="1" max="0" shortname="tilt" alt_unit="deg" alt_unit_coef="0.0139882">
              <strip_button name="Look Foreward" icon="lookfore.png" value="0"/>
              <strip_button name="Look Down" icon="lookdown.png" value="-6434"/>
            </dl_setting>
            <dl_setting var="booz_cam_pan" MIN="0" STEP="1" MAX="360" shortname="pan" unit="1/2^12r" alt_unit="deg" alt_unit_coef="0.0139882"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="Misc">
            <dl_setting STEP="1" SHORTNAME="telemetry" MODULE="booz2_telemetry" MIN="0" VAR="telemetry_mode_Main_DefaultChannel" VALUES="Default|PPM|Raw|Scaled|AHRS|Rate|Attitude|Vertical|Horizontal|Aligner|HS_att_roll|Tune_hover" MAX="11">
              <key_press KEY="d" VALUE="0"/>
              <key_press KEY="v" VALUE="7"/>
              <key_press KEY="h" VALUE="8"/>
            </dl_setting>
            <dl_setting STEP="1" SHORTNAME="auto2" MODULE="booz2_autopilot" MIN="0" VAR="booz2_autopilot_mode_auto2" VALUES="Fail|Kill|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav" MAX="12"/>
            <dl_setting STEP="1" HANDLER="KillThrottle" MODULE="booz2_autopilot" MIN="0" VAR="kill_throttle" VALUES="Resurrect|Kill" MAX="1"/>
            <dl_setting STEP="1" HANDLER="SetPowerSwitch" MODULE="booz2_autopilot" MIN="0" VAR="booz2_autopilot_power_switch" VALUES="OFF|ON" MAX="1">
              <strip_button NAME="POWER ON" VALUE="1" ICON="on.png"/>
              <strip_button NAME="POWER OFF" VALUE="0" ICON="off.png"/>
            </dl_setting>
            <dl_setting STEP="1" MODULE="booz2_autopilot" MIN="0" VAR="booz2_autopilot_rc" VALUES="RC OFF|RC ON" MAX="1">
              <strip_button NAME="RC ON" VALUE="1"/>
              <strip_button NAME="RC OFF" VALUE="0"/>
            </dl_setting>
            <dl_setting STEP="0.1" SHORTNAME="mag_offset" MODULE="booz_ahrs" MIN="-180" VAR="booz_ahrs_mag_offset" MAX="180"/>
          </dl_settings>
          <dl_settings NAME="Rate Loop">
            <dl_setting STEP="1" SHORTNAME="gain p" MODULE="stabilization/booz_stabilization_rate" MIN="-1000" VAR="booz_stabilization_rate_gain.p" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="gain q" MODULE="stabilization/booz_stabilization_rate" MIN="-1000" VAR="booz_stabilization_rate_gain.q" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="gain r" MODULE="stabilization/booz_stabilization_rate" MIN="-1000" VAR="booz_stabilization_rate_gain.r" MAX="-1"/>
          </dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting STEP="1" SHORTNAME="pgain phi" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.p.x" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="dgain p" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.d.x" MAX="-1"/>
            <dl_setting STEP="1" HANDLER="SetKiPhi" SHORTNAME="igain phi" MODULE="stabilization/booz_stabilization_attitude" MIN="-300" VAR="booz_stabilization_gains.i.x" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ddgain p" MODULE="stabilization/booz_stabilization_attitude" MIN="0" VAR="booz_stabilization_gains.dd.x" MAX="1000"/>
            <dl_setting STEP="1" SHORTNAME="pgain theta" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.p.y" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="dgain q" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.d.y" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="igain theta" MODULE="stabilization/booz_stabilization_attitude" MIN="-300" VAR="booz_stabilization_gains.i.y" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ddgain q" MODULE="stabilization/booz_stabilization_attitude" MIN="0" VAR="booz_stabilization_gains.dd.y" MAX="500"/>
            <dl_setting STEP="1" SHORTNAME="pgain psi" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.p.z" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="dgain r" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.d.z" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="igain psi" MODULE="stabilization/booz_stabilization_attitude" MIN="-300" VAR="booz_stabilization_gains.i.z" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ddgain r" MODULE="stabilization/booz_stabilization_attitude" MIN="0" VAR="booz_stabilization_gains.dd.z" MAX="2000"/>
          </dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting STEP="1" SHORTNAME="kp" MODULE="guidance/booz2_guidance_v" MIN="-600" VAR="booz2_guidance_v_kp" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="kd" MODULE="guidance/booz2_guidance_v" MIN="-600" VAR="booz2_guidance_v_kd" MAX="0"/>
            <dl_setting STEP="1" HANDLER="SetKi" SHORTNAME="ki" MODULE="guidance/booz2_guidance_v" MIN="-300" VAR="booz2_guidance_v_ki" MAX="0"/>
            <dl_setting STEP="0.5" ALT_UNIT="m" SHORTNAME="sp" MODULE="guidance/booz2_guidance_v" UNIT="2e-8m" MIN="-5" VAR="booz2_guidance_v_z_sp" MAX="3" ALT_UNIT_COEF="0.00390625"/>
            <dl_setting STEP="1" SHORTNAME="vf_realign" MODULE="booz2_ins" MIN="0" VAR="booz_ins_vf_realign" VALUES="OFF|ON" MAX="1"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting STEP="1" ALT_UNIT="m" SHORTNAME="sp_x_ned" MODULE="guidance/booz2_guidance_h" UNIT="1/2^8m" MIN="-10" VAR="booz2_guidance_h_pos_sp.x" MAX="10" ALT_UNIT_COEF="0.00390625"/>
            <dl_setting STEP="1" ALT_UNIT="m" SHORTNAME="sp_y_ned" MODULE="guidance/booz2_guidance_h" UNIT="1/2^8m" MIN="-10" VAR="booz2_guidance_h_pos_sp.y" MAX="10" ALT_UNIT_COEF="0.00390625"/>
            <dl_setting STEP="5" ALT_UNIT="deg" SHORTNAME="sp_psi" MODULE="guidance/booz2_guidance_h" UNIT="1/2^20r" MIN="-180" VAR="booz2_guidance_h_psi_sp" MAX="180" ALT_UNIT_COEF="0.000054641513360"/>
            <dl_setting STEP="1" SHORTNAME="kp" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_pgain" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="kd" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_dgain" MAX="0"/>
            <dl_setting STEP="1" HANDLER="SetKi" SHORTNAME="ki" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_igain" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="kn" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_ngain" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ka" MODULE="guidance/booz2_guidance_h" MIN="0" VAR="booz2_guidance_h_again" MAX="200"/>
            <dl_setting STEP="1" SHORTNAME="hf_realign" MODULE="booz2_ins" MIN="0" VAR="booz_ins_hf_realign" VALUES="OFF|ON" MAX="1"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting STEP="0.1" HANDLER="SetFlightAltitude" MODULE="booz2_navigation" UNIT="m" MIN="0" VAR="flight_altitude" MAX="400"/>
            <dl_setting STEP="1" ALT_UNIT="deg" MODULE="booz2_navigation" UNIT="1/2^12r" MIN="0" VAR="nav_heading" MAX="360" ALT_UNIT_COEF="0.0139882"/>
            <dl_setting STEP="0.1" MODULE="booz2_navigation" UNIT="m" MIN="-150" VAR="nav_radius" MAX="150"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MJ6" ac_id="7" airframe="airframes/obsolete/microjet6.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/versatile.xml" settings="settings/baro.xml settings/tuning.xml" gui_color="red">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Versatile" LON0="1.2729" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" QFU="270" LAT0="43.4622">
        <header>#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="80" X="20"/>
          <waypoint NAME="1" Y="102.2" X="44.8"/>
          <waypoint NAME="2" Y="122.9" X="-63.5"/>
          <waypoint NAME="MOB" Y="-21.2" X="-11.5"/>
          <waypoint NAME="S1" Y="80.4" X="-151.6"/>
          <waypoint NAME="S2" Y="214.9" X="180.1"/>
          <waypoint NAME="AF" Y="-10" X="200" ALT="30"/>
          <waypoint NAME="TD" Y="20.0" X="80.0" ALT="0"/>
          <waypoint NAME="BASELEG" Y="-23.0" X="26.9"/>
          <waypoint NAME="_1" Y="0" X="-100"/>
          <waypoint NAME="_2" Y="200" X="-100"/>
          <waypoint NAME="_3" Y="200" X="100"/>
          <waypoint NAME="_4" Y="0" X="100"/>
          <waypoint NAME="CLIMB" Y="35.4" X="-122.5"/>
        </waypoints>
        <sectors>
          <sector NAME="Square">
            <corner NAME="_1"/>
            <corner NAME="_2"/>
            <corner NAME="_3"/>
            <corner NAME="_4"/>
          </sector>
        </sectors>
        <exceptions/>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 10)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <go WP="CLIMB"/>
          </block>
          <block NAME="Standby" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <circle WP="MOB" RADIUS="100"/>
          </block>
          <block NAME="Auto pitch (circle wp 1)">
            <circle THROTTLE="0.3" WP="1" PITCH="auto" RADIUS="200"/>
          </block>
          <block NAME="Climb 75% throttle">
            <circle THROTTLE="0.75" WP="1" PITCH="10" RADIUS="50+(estimator_z-ground_alt)/2" VMODE="throttle" UNTIL="(10 > PowerVoltage()) || (estimator_z > ground_alt+ 1350)"/>
          </block>
          <block NAME="Climb 0m/s">
            <circle WP="1" CLIMB="0" RADIUS="nav_radius" VMODE="climb" UNTIL="10 > PowerVoltage()"/>
          </block>
          <block NAME="Climb 1m/s">
            <circle WP="1" PITCH="5" CLIMB="1" RADIUS="50+(estimator_z-ground_alt)/2" VMODE="climb" UNTIL="10 > PowerVoltage()"/>
          </block>
          <block NAME="Climb nav_climb m/s">
            <circle WP="1" CLIMB="nav_climb" RADIUS="nav_radius" VMODE="climb" UNTIL="(10 > PowerVoltage()) || (estimator_z > ground_alt+ 1350)"/>
          </block>
          <block NAME="Circle 0% throttle">
            <circle THROTTLE="0.0" WP="1" PITCH="fp_pitch" RADIUS="nav_radius" VMODE="throttle" UNTIL="ground_alt+50 > estimator_z"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Oval 0% throttle">
            <oval THROTTLE="0.0" PITCH="fp_pitch" RADIUS="nav_radius" P2="2" P1="1" VMODE="throttle" UNTIL="ground_alt+50 > estimator_z"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Route 1-2">
            <go APPROACHING_TIME="0" WP="2" FROM="1" HMODE="route"/>
          </block>
          <block NAME="Stack wp 2">
            <circle WP="2" RADIUS="75"/>
          </block>
          <block NAME="Route 2-1">
            <go APPROACHING_TIME="0" WP="1" FROM="2" HMODE="route"/>
          </block>
          <block NAME="Stack wp 1">
            <circle WP="1" RADIUS="75"/>
          </block>
          <block NAME="Glide 1-2">
            <go WP="2" FROM="1" HMODE="route" VMODE="glide"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP_BASELEG, nav_radius)"/>
            <circle WP="BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <set VAR="v_ctl_auto_throttle_cruise_throttle" VALUE="V_CTL_AUTO_THROTTLE_MIN_CRUISE_THROTTLE"/>
            <circle WP="BASELEG" RADIUS="nav_radius" UNTIL="NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10) && 10 > fabs(estimator_z - WaypointAlt(WP_BASELEG))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
          <block NAME="Steps roll -10, +10">
            <while COND="TRUE">
              <attitude ROLL="10.0" ALT="250" VMODE="alt" UNTIL=" stage_time > 6"/>
              <attitude ROLL="-10.0" ALT="250" VMODE="alt" UNTIL="stage_time > 6"/>
            </while>
          </block>
          <block NAME="Steps roll -20, +20">
            <while COND="TRUE">
              <attitude ROLL="20.0" ALT="250" VMODE="alt" UNTIL=" stage_time > 3"/>
              <attitude ROLL="-20.0" ALT="250" VMODE="alt" UNTIL="stage_time > 3"/>
            </while>
          </block>
          <block NAME="Steps pitch -10, +10">
            <while COND="TRUE">
              <attitude ROLL="0.0" PITCH="10" ALT="250" VMODE="alt" UNTIL=" stage_time > 2"/>
              <attitude ROLL="0.0" PITCH="-10" ALT="250" VMODE="alt" UNTIL=" stage_time > 2"/>
            </while>
          </block>
          <block NAME="Heading 30">
            <heading ALT="ground_alt+50" COURSE="30" UNTIL="FALSE"/>
          </block>
          <block NAME="For loop (circles wp 1)">
            <for VAR="i" FROM="0" TO="3">
              <circle WP="1" RADIUS="DEFAULT_CIRCLE_RADIUS+ $i*10" UNTIL="NavCircleCount() > 1"/>
            </for>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Test datalink (go to wp 2)">
            <exception COND="datalink_time > 22" DEROUTE="Standby"/>
            <go WP="2" FROM="STDBY" HMODE="route"/>
            <go WP="STDBY" FROM="2" HMODE="route"/>
          </block>
          <block NAME="Fly in Square">
            <exception COND="! InsideSquare(estimator_x, estimator_y)" DEROUTE="Come back wp 1"/>
            <attitude ROLL="0" ALT="ground_alt+75" VMODE="alt"/>
          </block>
          <block NAME="Come back wp 1">
            <exception COND="InsideSquare(estimator_x, estimator_y)" DEROUTE="Fly in Square"/>
            <go WP="1"/>
            <deroute BLOCK="Fly in Square"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Microjet6 Tiny 1.1">
        <servos>
          <servo NEUTRAL="1000" MAX="2000" NAME="GAZ" NO="0" MIN="1000"/>
          <servo NEUTRAL="1000" MAX="2000" NAME="HATCH" NO="2" MIN="1000"/>
          <servo NEUTRAL="1518" MAX="2025" NAME="AILEVON_LEFT" NO="6" MIN="1075"/>
          <servo NEUTRAL="1595" MAX="975" NAME="AILEVON_RIGHT" NO="3" MIN="1975"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="HATCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
          <set COMMAND="HATCH" VALUE="@GAIN1"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILEVON_AILERON_RATE" VALUE="0.4"/>
          <define NAME="AILEVON_ELEVATOR_RATE" VALUE="0.7"/>
        </section>
        <command_laws>
          <let VAR="aileron" VALUE="@ROLL  * AILEVON_AILERON_RATE"/>
          <let VAR="elevator" VALUE="@PITCH * AILEVON_ELEVATOR_RATE"/>
          <set VALUE="@THROTTLE" SERVO="GAZ"/>
          <set VALUE="$elevator + $aileron" SERVO="AILEVON_LEFT"/>
          <set VALUE="$elevator - $aileron" SERVO="AILEVON_RIGHT"/>
          <set VALUE="@HATCH" SERVO="HATCH"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.6"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_0"/>
          <define NAME="IR2" VALUE="ADC_1"/>
          <define NAME="IR_TOP" VALUE="ADC_6"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
          <define NAME="GYRO_ROLL" VALUE="ADC_4"/>
          <define NAME="GYRO_NB_SAMPLES" VALUE="16"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="512"/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="IR2_SIGN" VALUE="-1"/>
          <define NAME="TOP_SIGN" VALUE="-1"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1."/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="4."/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="2"/>
          <define NAME="CORRECTION_UP" VALUE="1.0"/>
          <define NAME="CORRECTION_DOWN" VALUE="1.0"/>
          <define NAME="CORRECTION_LEFT" VALUE="1.4"/>
          <define NAME="CORRECTION_RIGHT" VALUE="1.4"/>
        </section>
        <section NAME="GYRO" PREFIX="GYRO_">
          <define NAME="ADC_ROLL_NEUTRAL" VALUE="500"/>
          <define NAME="ADC_TEMP_NEUTRAL" VALUE="476"/>
          <define NAME="ADC_TEMP_SLOPE" VALUE="0"/>
          <define NAME="ROLL_SCALE" VALUE="0.44"/>
          <define NAME="ROLL_DIRECTION" VALUE="1."/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_PER_PERCENT" VALUE="0.86"/>
          <define UNIT="V" NAME="LOW_BATTERY" VALUE="9.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="13."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="80."/>
          <define NAME="GLIDE_AIRSPEED" VALUE="10"/>
          <define NAME="GLIDE_VSPEED" VALUE="3."/>
          <define UNIT="deg" NAME="GLIDE_PITCH" VALUE="45"/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL" VALUE="11.1"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.03"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.32"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.25"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.65"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-4000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.15"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.01"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.05"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.05"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="0.075"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="THROTTLE_SLEW_LIMITER" VALUE="10"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-0.55"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.6"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="ROLL_PGAIN" VALUE="5000."/>
          <define NAME="AILERON_OF_THROTTLE" VALUE="0.0"/>
          <define NAME="PITCH_PGAIN" VALUE="-12500."/>
          <define NAME="PITCH_DGAIN" VALUE="1.5"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="1250"/>
          <define NAME="ROLL_RATE_MODE_DEFAULT" VALUE="1"/>
          <define UNIT="rad/s/rad" NAME="ROLL_RATE_SETPOINT_PGAIN" VALUE="-10."/>
          <define NAME="ROLL_RATE_MAX_SETPOINT" VALUE="10"/>
          <define NAME="LO_THROTTLE_ROLL_RATE_PGAIN" VALUE="3000."/>
          <define NAME="HI_THROTTLE_ROLL_RATE_PGAIN" VALUE="3000."/>
          <define NAME="ROLL_RATE_IGAIN" VALUE="0."/>
          <define NAME="ROLL_RATE_DGAIN" VALUE="0."/>
          <define NAME="ROLL_RATE_SUM_NB_SAMPLES" VALUE="64"/>
          <define NAME="ROLL_SLEW" VALUE="0.1"/>
          <define NAME="SIMPLE_ROLL_PGAIN" VALUE="-15000"/>
          <define NAME="SIMPLE_ROLL_DGAIN" VALUE="-3000"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
          <define NAME="NAV_GROUND_SPEED_PGAIN" VALUE="-0.015"/>
          <define NAME="NAV_FOLLOW_PGAIN" VALUE="-0.05"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="1.00"/>
          <define NAME="CLIMB_PITCH" VALUE="0.3"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.25"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="1"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
        <makefile>include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=\&quot;tiny_1_1.h\&quot; -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
ap.CFLAGS += -DACTUATORS=\&quot;servos_4015_MAT_hw.h\&quot; -DSERVOS_4015_MAT
ap.srcs += $(SRC_ARCH)/servos_4015_MAT_hw.c actuators.c
ap.CFLAGS += -DRADIO_CONTROL
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c
# API mode
# ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=XBeeTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DXBEE_UART=Uart0 -DDATALINK=XBEE -DUART0_BAUD=B57600
#ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c xbee.c
# transparent
ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DPPRZ_UART=Uart0 -DDATALINK=PPRZ -DUART0_BAUD=B9600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c pprz_transport.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_4 -DUSE_ADC_6
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART1 -DGPS_LINK=Uart1 -DUART1_BAUD=B19200
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED -DALT_KALMAN -DWIND_INFO
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DH_CTL_RATE_LOOP -DAGR_CLIMB -DLOITER_TRIM
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c nav_survey_rectangle.c
ap.CFLAGS += -DGYRO -DADXRS150
ap.srcs += gyro.c
ap.CFLAGS += -DUSE_SPI -DSPI_MASTER -DUSE_SPI_SLAVE0 -DUSE_BARO_MS5534A
ap.srcs += spi.c $(SRC_ARCH)/spi_hw.c $(SRC_ARCH)/baro_MS5534A.c
ap.srcs += nav_line.c
# Harware In The Loop
#ap.CFLAGS += -DHITL
# Config for SITL simulation
include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN -DUSE_BARO_MS5534A
sim.srcs += nav_survey_rectangle.c $(SRC_ARCH)/sim_baro.c bomb.c nav_line.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings NAME="control">
          <dl_settings NAME="baro">
            <dl_setting STEP="1" MODULE="baro_MS5534A" MIN="0" VAR="alt_baro_enabled" MAX="1"/>
            <dl_setting STEP="10" MODULE="baro_MS5534A" MIN="90000" VAR="baro_MS5534A_ground_pressure" MAX="103000"/>
            <dl_setting STEP="0.1" MODULE="baro_MS5534A" MIN="0.5" VAR="baro_MS5534A_r" MAX="20"/>
            <dl_setting STEP="0.1" MODULE="baro_MS5534A" MIN="0.1" VAR="baro_MS5534A_sigma2" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="stage_time" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MODULE="downlink" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" PARAM="IR_ROLL_NEUTRAL_DEFAULT" SHORTNAME="roll_neutral" UNIT="rad" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch_neutral" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LATERAL_CORRECTION" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LONGITUDINAL_CORRECTION" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_VERTICAL_CORRECTION" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_LEFT" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_RIGHT" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_UP" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_DOWN" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="0" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" PARAM="H_CTL_ROLL_MAX_SETPOINT" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="1"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_PGAIN" SHORTNAME="pitch_pgain" MIN="-55000" VAR="h_ctl_pitch_pgain" MAX="0"/>
              <dl_setting STEP="10" PARAM="H_CTL_PITCH_DGAIN" SHORTNAME="pitch_dgain" MIN="-50000" VAR="h_ctl_pitch_dgain" MAX="0"/>
              <dl_setting STEP="100" PARAM="H_CTL_ELEVATOR_OF_ROLL" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_RATE_GAIN" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" PARAM="V_CTL_ALTITUDE_PGAIN" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.005" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" PARAM="V_CTL_AUTO_THROTTLE_LOITER_TRIM" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_PGAIN" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_IGAIN" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" PARAM="H_CTL_COURSE_PGAIN" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" PARAM="NAV_GLIDE_PITCH_TRIM" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="1" MIN="1" VAR="nav_mode" MAX="2"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="1" MIN="-20" VAR="fp_pitch" MAX="20"/>
              <dl_setting STEP="0.1" MIN="0" VAR="fp_throttle" MAX="1"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="5" VAR="nav_ground_speed_setpoint" MAX="50"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.2" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MKK1" ac_id="15" airframe="airframes/ENAC/quadrotor/mkk1.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/telemetry_booz2.xml" flight_plan="flight_plans/booz_vision.xml" settings="settings/settings_booz2.xml" gui_color="blue">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Booz Vision" LON0="1 28 52.61" MAX_DIST_FROM_HOME="400" GROUND_ALT="0" SECURITY_HEIGHT="0.5" ALT="1.5" LAT0="43 33 50.83">
        <waypoints>
          <waypoint NAME="HOME" Y="0.0" X="0.0"/>
        </waypoints>
        <blocks>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 3)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <exception COND="booz_ins_enu_pos.z > POS_BFP_OF_REAL(1.)" DEROUTE="Standby"/>
            <call FUN="NavKillThrottle()"/>
            <attitude THROTTLE="0" ROLL="0" PITCH="0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
          <block NAME="Start Engine">
            <call FUN="NavResurrect()"/>
            <attitude THROTTLE="0" ROLL="0" PITCH="0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
          <block NAME="Standby" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <stay WP="HOME"/>
          </block>
          <block NAME="land">
            <go WP="HOME"/>
          </block>
          <block NAME="flare">
            <exception COND="NavDetectGround()" DEROUTE="Holding point"/>
            <call FUN="NavStartDetectGround()"/>
            <stay WP="HOME" CLIMB="-0.8" VMODE="climb"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe name="Booz Mkk1 Enac">
        <firmware name="rotorcraft">
          <target name="ap" board="lisa_l_1.0">
            <define name="BOOZ_FAILSAFE_GROUND_DETECT"/>
            <define name="USE_GPS_ACC4R"/>
          </target>
          <target name="sim" board="pc">
            <subsystem name="fdm" type="nps"/>
          </target>
          <subsystem name="radio_control" type="ppm"/>
          <subsystem name="actuators" type="mkk"/>
          <subsystem name="imu" type="b2_v1.1"/>
          <subsystem name="gps" type="ublox"/>
          <subsystem name="ahrs" type="cmpl"/>
          <subsystem name="ins" type="hff"/>
        </firmware>
        <firmware name="lisa_l_test_progs">
          <target name="test_imu_b2" board="lisa_l_1.0"/>
          <target name="test_telemetry" board="lisa_l_1.0"/>
          <target name="test_baro" board="lisa_l_1.0"/>
          <target name="test_rc_spektrum" board="lisa_l_1.0"/>
          <target name="test_rc_ppm" board="lisa_l_1.0"/>
          <target name="test_actuators_mkk" board="lisa_l_1.0"/>
        </firmware>
        <servos min="0" neutral="0" max="0xff">
          <servo name="FRONT" no="0" min="0" neutral="0" max="255"/>
          <servo name="BACK" no="1" min="0" neutral="0" max="255"/>
          <servo name="RIGHT" no="2" min="0" neutral="0" max="255"/>
          <servo name="LEFT" no="3" min="0" neutral="0" max="255"/>
        </servos>
        <commands>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="YAW" failsafe_value="0"/>
          <axis name="THRUST" failsafe_value="0"/>
        </commands>
        <section name="ACTUATORS_MKK" prefix="ACTUATORS_MKK_">
          <define name="NB" value="4"/>
          <define name="ADDR" value="{ 0x58, 0x56, 0x54, 0x52 }"/>
        </section>
        <section name="SUPERVISION" prefix="SUPERVISION_">
          <define name="MIN_MOTOR" value="2"/>
          <define name="MAX_MOTOR" value="210"/>
          <define name="TRIM_A" value="0"/>
          <define name="TRIM_E" value="0"/>
          <define name="TRIM_R" value="0"/>
          <define name="NB_MOTOR" value="4"/>
          <define name="SCALE" value="256"/>
          <define name="ROLL_COEF" value="{    0,    0, -256,  256}"/>
          <define name="PITCH_COEF" value="{  256, -256,    0,    0}"/>
          <define name="YAW_COEF" value="{ -256, -256,  256,  256}"/>
          <define name="THRUST_COEF" value="{ 256,  256,  256,  256}"/>
        </section>
        <section name="IMU" prefix="IMU_">
          <define name="GYRO_P_CHAN" value="1"/>
          <define name="GYRO_Q_CHAN" value="0"/>
          <define name="GYRO_R_CHAN" value="2"/>
          <define name="GYRO_P_NEUTRAL" value="30907"/>
          <define name="GYRO_Q_NEUTRAL" value="33253"/>
          <define name="GYRO_R_NEUTRAL" value="32329"/>
          <define name="GYRO_P_SENS" value="1.00" integer="16"/>
          <define name="GYRO_Q_SENS" value="1.00" integer="16"/>
          <define name="GYRO_R_SENS" value="1.00" integer="16"/>
          <define name="ACCEL_X_CHAN" value="5"/>
          <define name="ACCEL_Y_CHAN" value="3"/>
          <define name="ACCEL_Z_CHAN" value="4"/>
          <define name="ACCEL_X_NEUTRAL" value="32913"/>
          <define name="ACCEL_Y_NEUTRAL" value="33032"/>
          <define name="ACCEL_Z_NEUTRAL" value="32843"/>
          <define name="ACCEL_X_SENS" value="2.5749914646" integer="16"/>
          <define name="ACCEL_Y_SENS" value="2.56940516083" integer="16"/>
          <define name="ACCEL_Z_SENS" value="2.56940374188" integer="16"/>
          <define name="MAG_X_CHAN" value="0"/>
          <define name="MAG_Y_CHAN" value="1"/>
          <define name="MAG_Z_CHAN" value="2"/>
          <define name="MAG_X_NEUTRAL" value="-62"/>
          <define name="MAG_Y_NEUTRAL" value="-13"/>
          <define name="MAG_Z_NEUTRAL" value="-95"/>
          <define name="MAG_X_SENS" value="6.42348671436" integer="16"/>
          <define name="MAG_Y_SENS" value="6.95371185551" integer="16"/>
          <define name="MAG_Z_SENS" value="3.12322557454" integer="16"/>
          <define name="BODY_TO_IMU_PHI" value="RadOfDeg(0.)"/>
          <define name="BODY_TO_IMU_THETA" value="RadOfDeg(0.)"/>
          <define name="BODY_TO_IMU_PSI" value="RadOfDeg(0.)"/>
        </section>
        <section name="STABILIZATION_RATE" prefix="BOOZ_STABILIZATION_RATE_">
          <define name="SP_MAX_P" value="10000"/>
          <define name="SP_MAX_Q" value="10000"/>
          <define name="SP_MAX_R" value="10000"/>
          <define name="GAIN_P" value="-400"/>
          <define name="GAIN_Q" value="-400"/>
          <define name="GAIN_R" value="-350"/>
        </section>
        <section name="STABILIZATION_RATE" prefix="BOOZ_STABILIZATION_RATE_">
          <define name="SP_MAX_P" value="10000"/>
          <define name="SP_MAX_Q" value="10000"/>
          <define name="SP_MAX_R" value="10000"/>
          <define name="GAIN_P" value="-400"/>
          <define name="GAIN_Q" value="-400"/>
          <define name="GAIN_R" value="-350"/>
        </section>
        <section name="STABILIZATION_ATTITUDE" prefix="BOOZ_STABILIZATION_ATTITUDE_">
          <define name="SP_MAX_PHI" value="RadOfDeg(45.)"/>
          <define name="SP_MAX_THETA" value="RadOfDeg(45.)"/>
          <define name="SP_MAX_R" value="RadOfDeg(90.)"/>
          <define name="DEADBAND_R" value="250"/>
          <define name="REF_OMEGA_P" value="RadOfDeg(800)"/>
          <define name="REF_ZETA_P" value="0.9"/>
          <define name="REF_MAX_P" value="RadOfDeg(300.)"/>
          <define name="REF_MAX_PDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_Q" value="RadOfDeg(800)"/>
          <define name="REF_ZETA_Q" value="0.9"/>
          <define name="REF_MAX_Q" value="RadOfDeg(300.)"/>
          <define name="REF_MAX_QDOT" value="RadOfDeg(7000.)"/>
          <define name="REF_OMEGA_R" value="RadOfDeg(500)"/>
          <define name="REF_ZETA_R" value="0.9"/>
          <define name="REF_MAX_R" value="RadOfDeg(90.)"/>
          <define name="REF_MAX_RDOT" value="RadOfDeg(900.)"/>
          <define name="PHI_PGAIN" value="-650"/>
          <define name="PHI_DGAIN" value="-200"/>
          <define name="PHI_IGAIN" value="-100"/>
          <define name="THETA_PGAIN" value="-650"/>
          <define name="THETA_DGAIN" value="-200"/>
          <define name="THETA_IGAIN" value="-100"/>
          <define name="PSI_PGAIN" value="-800"/>
          <define name="PSI_DGAIN" value="-320"/>
          <define name="PSI_IGAIN" value="-20"/>
          <define name="PHI_DDGAIN" value=" 300"/>
          <define name="THETA_DDGAIN" value=" 300"/>
          <define name="PSI_DDGAIN" value=" 300"/>
        </section>
        <section name="INS" prefix="BOOZ_INS_">
          <define name="BARO_SENS" value="15." integer="16"/>
          <define name="UNTILT_ACCEL" value="1"/>
        </section>
        <section name="GUIDANCE_V" prefix="BOOZ2_GUIDANCE_V_">
          <define name="MIN_ERR_Z" value="POS_BFP_OF_REAL(-10.)"/>
          <define name="MAX_ERR_Z" value="POS_BFP_OF_REAL( 10.)"/>
          <define name="MIN_ERR_ZD" value="SPEED_BFP_OF_REAL(-10.)"/>
          <define name="MAX_ERR_ZD" value="SPEED_BFP_OF_REAL( 10.)"/>
          <define name="MAX_SUM_ERR" value="2000000"/>
          <define name="REF_MIN_ZDD" value="-1.5*9.81"/>
          <define name="REF_MAX_ZDD" value=" 0.5*9.81"/>
          <define name="REF_MIN_ZD" value="-1.5"/>
          <define name="REF_MAX_ZD" value=" 1.5"/>
          <define name="HOVER_KP" value="-200"/>
          <define name="HOVER_KD" value="-100"/>
          <define name="HOVER_KI" value="0"/>
          <define name="RC_CLIMB_COEF" value="163"/>
          <define name="RC_CLIMB_DEAD_BAND" value="160000"/>
        </section>
        <section name="GUIDANCE_H" prefix="BOOZ2_GUIDANCE_H_">
          <define name="PGAIN" value="-60"/>
          <define name="DGAIN" value="-120"/>
          <define name="IGAIN" value="-10"/>
          <define name="NGAIN" value="-0"/>
          <define name="AGAIN" value="100"/>
        </section>
        <section name="BAT">
          <define name="MILLIAMP_PER_PERCENT" value="0.86"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="9." unit="V"/>
          <define name="BATTERY_SENS" value="0.183" integer="16"/>
        </section>
        <section name="AUTOPILOT">
          <define name="BOOZ2_MODE_MANUAL" value="BOOZ2_AP_MODE_ATTITUDE_DIRECT"/>
          <define name="BOOZ2_MODE_AUTO1" value="BOOZ2_AP_MODE_ATTITUDE_Z_HOLD"/>
          <define name="BOOZ2_MODE_AUTO2" value="BOOZ2_AP_MODE_NAV"/>
        </section>
        <section name="FMS"/>
        <section name="MISC">
          <define name="BOOZ2_FACE_REINJ_1" value="1024"/>
        </section>
        <section name="SIMULATOR" prefix="NPS_">
          <define name="ACTUATOR_NAMES" value="{&quot;front_motor&quot;, &quot;back_motor&quot;, &quot;right_motor&quot;, &quot;left_motor&quot;}"/>
          <define name="SENSORS_PARAMS" value="&quot;nps_sensors_params_booz2_a1.h&quot;"/>
        </section>
        <makefile>## prevents motors from ever starting
##ap.CFLAGS += -DKILL_MOTORS
#
##set GPS lag for horizontal filter
##ap.CFLAGS += -DUSE_GPS_ACC4R
#
##ap.CFLAGS += -DB2_GUIDANCE_H_USE_REF
ap.CFLAGS += -DUSE_ADAPT_HOVER -DUSE_INS_NAV_INIT
#sim.CFLAGS += -DB2_GUIDANCE_H_USE_REF
sim.CFLAGS += -DUSE_ADAPT_HOVER -DUSE_INS_NAV_INIT</makefile>
      </airframe>
      <telemetry>
        <process NAME="Main" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="DL_VALUE" PERIOD="1.1"/>
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="BOOZ2_FP" PERIOD="0.25"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
            <message NAME="BOOZ2_NAV_STATUS" PERIOD="1.6"/>
            <message NAME="WP_MOVED" PERIOD="1.3"/>
            <message NAME="CAM_TRACK" PERIOD="0.1"/>
            <message NAME="BOOZ2_GPS" PERIOD=".25"/>
            <message NAME="BOOZ_INS" PERIOD=".25"/>
          </mode>
          <mode NAME="ppm">
            <message NAME="BOOZ2_CMD" PERIOD=".05"/>
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="BOOZ2_RADIO_CONTROL" PERIOD="0.5"/>
            <message NAME="BOOZ_STATUS" PERIOD="1"/>
          </mode>
          <mode NAME="raw_sensors">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="IMU_ACCEL_RAW" PERIOD=".05"/>
            <message NAME="IMU_GYRO_RAW" PERIOD=".05"/>
            <message NAME="IMU_MAG_RAW" PERIOD=".05"/>
            <message NAME="BARO_RAW" PERIOD=".1"/>
            <message NAME="BOOZ2_SONAR" PERIOD="0.2"/>
          </mode>
          <mode NAME="scaled_sensors">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_GYRO" PERIOD=".075"/>
            <message NAME="BOOZ2_ACCEL" PERIOD=".075"/>
            <message NAME="BOOZ2_MAG" PERIOD=".1"/>
          </mode>
          <mode NAME="ahrs">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_FILTER" PERIOD=".5"/>
            <message NAME="BOOZ2_AHRS_EULER" PERIOD=".1"/>
          </mode>
          <mode NAME="rate_loop">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_RATE_LOOP" PERIOD=".02"/>
          </mode>
          <mode NAME="attitude_loop">
            <message NAME="BOOZ_STATUS" PERIOD="2.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="3.1"/>
            <message NAME="BOOZ2_STAB_ATTITUDE" PERIOD=".05"/>
            <message NAME="BOOZ2_STAB_ATTITUDE_REF" PERIOD=".09"/>
          </mode>
          <mode NAME="vert_loop">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
            <message NAME="ALIVE" PERIOD="0.9"/>
            <message NAME="BOOZ2_VFF" PERIOD=".05"/>
            <message NAME="BOOZ2_VERT_LOOP" PERIOD=".05"/>
            <message NAME="BOOZ2_INS" PERIOD=".05"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
          </mode>
          <mode NAME="h_loop">
            <message NAME="ALIVE" PERIOD="3.9"/>
            <message NAME="BOOZ2_HOVER_LOOP" PERIOD="0.062"/>
            <message NAME="BOOZ2_GUIDANCE_H_REF" PERIOD="0.1"/>
            <message NAME="BOOZ2_STAB_ATTITUDE" PERIOD=".4"/>
            <message NAME="BOOZ2_FP" PERIOD="0.8"/>
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="BOOZ2_NAV_STATUS" PERIOD="1.6"/>
            <message NAME="BOOZ2_HFF_GPS" PERIOD=".03"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
          </mode>
          <mode NAME="aligner">
            <message NAME="ALIVE" PERIOD="0.9"/>
            <message NAME="BOOZ2_FILTER_ALIGNER" PERIOD="0.02"/>
          </mode>
          <mode NAME="hs_att_roll">
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="ALIVE" PERIOD="0.9"/>
            <message NAME="DL_VALUE" PERIOD="0.5"/>
          </mode>
          <mode NAME="tune_hover">
            <message NAME="DL_VALUE" PERIOD="1.1"/>
            <message NAME="BOOZ_STATUS" PERIOD="1.2"/>
            <message NAME="ALIVE" PERIOD="2.1"/>
            <message NAME="BOOZ2_TUNE_HOVER" PERIOD=".1"/>
            <message NAME="BOOZ2_INS_REF" PERIOD="5.1"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="Misc">
            <dl_setting STEP="1" SHORTNAME="telemetry" MODULE="booz2_telemetry" MIN="0" VAR="telemetry_mode_Main_DefaultChannel" VALUES="Default|PPM|Raw|Scaled|AHRS|Rate|Attitude|Vertical|Horizontal|Aligner|HS_att_roll|Tune_hover" MAX="11">
              <key_press KEY="d" VALUE="0"/>
              <key_press KEY="v" VALUE="7"/>
              <key_press KEY="h" VALUE="8"/>
            </dl_setting>
            <dl_setting STEP="1" SHORTNAME="auto2" MODULE="booz2_autopilot" MIN="0" VAR="booz2_autopilot_mode_auto2" VALUES="Fail|Kill|Rate|Att|Rate_rcC|Att_rcC|Att_C|Rate_Z|Att_Z|Hover|Hover_C|Hover_Z|Nav" MAX="12"/>
            <dl_setting STEP="1" HANDLER="KillThrottle" MODULE="booz2_autopilot" MIN="0" VAR="kill_throttle" VALUES="Resurrect|Kill" MAX="1"/>
            <dl_setting STEP="1" HANDLER="SetPowerSwitch" MODULE="booz2_autopilot" MIN="0" VAR="booz2_autopilot_power_switch" VALUES="OFF|ON" MAX="1">
              <strip_button NAME="POWER ON" VALUE="1" ICON="on.png"/>
              <strip_button NAME="POWER OFF" VALUE="0" ICON="off.png"/>
            </dl_setting>
            <dl_setting STEP="1" MODULE="booz2_autopilot" MIN="0" VAR="booz2_autopilot_rc" VALUES="RC OFF|RC ON" MAX="1">
              <strip_button NAME="RC ON" VALUE="1"/>
              <strip_button NAME="RC OFF" VALUE="0"/>
            </dl_setting>
            <dl_setting STEP="0.1" SHORTNAME="mag_offset" MODULE="booz_ahrs" MIN="-180" VAR="booz_ahrs_mag_offset" MAX="180"/>
          </dl_settings>
          <dl_settings NAME="Rate Loop">
            <dl_setting STEP="1" SHORTNAME="gain p" MODULE="stabilization/booz_stabilization_rate" MIN="-1000" VAR="booz_stabilization_rate_gain.p" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="gain q" MODULE="stabilization/booz_stabilization_rate" MIN="-1000" VAR="booz_stabilization_rate_gain.q" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="gain r" MODULE="stabilization/booz_stabilization_rate" MIN="-1000" VAR="booz_stabilization_rate_gain.r" MAX="-1"/>
          </dl_settings>
          <dl_settings NAME="Att Loop">
            <dl_setting STEP="1" SHORTNAME="pgain phi" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.p.x" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="dgain p" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.d.x" MAX="-1"/>
            <dl_setting STEP="1" HANDLER="SetKiPhi" SHORTNAME="igain phi" MODULE="stabilization/booz_stabilization_attitude" MIN="-300" VAR="booz_stabilization_gains.i.x" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ddgain p" MODULE="stabilization/booz_stabilization_attitude" MIN="0" VAR="booz_stabilization_gains.dd.x" MAX="1000"/>
            <dl_setting STEP="1" SHORTNAME="pgain theta" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.p.y" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="dgain q" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.d.y" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="igain theta" MODULE="stabilization/booz_stabilization_attitude" MIN="-300" VAR="booz_stabilization_gains.i.y" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ddgain q" MODULE="stabilization/booz_stabilization_attitude" MIN="0" VAR="booz_stabilization_gains.dd.y" MAX="500"/>
            <dl_setting STEP="1" SHORTNAME="pgain psi" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.p.z" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="dgain r" MODULE="stabilization/booz_stabilization_attitude" MIN="-4000" VAR="booz_stabilization_gains.d.z" MAX="-1"/>
            <dl_setting STEP="1" SHORTNAME="igain psi" MODULE="stabilization/booz_stabilization_attitude" MIN="-300" VAR="booz_stabilization_gains.i.z" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ddgain r" MODULE="stabilization/booz_stabilization_attitude" MIN="0" VAR="booz_stabilization_gains.dd.z" MAX="2000"/>
          </dl_settings>
          <dl_settings NAME="Vert Loop">
            <dl_setting STEP="1" SHORTNAME="kp" MODULE="guidance/booz2_guidance_v" MIN="-600" VAR="booz2_guidance_v_kp" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="kd" MODULE="guidance/booz2_guidance_v" MIN="-600" VAR="booz2_guidance_v_kd" MAX="0"/>
            <dl_setting STEP="1" HANDLER="SetKi" SHORTNAME="ki" MODULE="guidance/booz2_guidance_v" MIN="-300" VAR="booz2_guidance_v_ki" MAX="0"/>
            <dl_setting STEP="0.5" ALT_UNIT="m" SHORTNAME="sp" MODULE="guidance/booz2_guidance_v" UNIT="2e-8m" MIN="-5" VAR="booz2_guidance_v_z_sp" MAX="3" ALT_UNIT_COEF="0.00390625"/>
            <dl_setting STEP="1" SHORTNAME="vf_realign" MODULE="booz2_ins" MIN="0" VAR="booz_ins_vf_realign" VALUES="OFF|ON" MAX="1"/>
          </dl_settings>
          <dl_settings NAME="Horiz Loop">
            <dl_setting STEP="1" ALT_UNIT="m" SHORTNAME="sp_x_ned" MODULE="guidance/booz2_guidance_h" UNIT="1/2^8m" MIN="-10" VAR="booz2_guidance_h_pos_sp.x" MAX="10" ALT_UNIT_COEF="0.00390625"/>
            <dl_setting STEP="1" ALT_UNIT="m" SHORTNAME="sp_y_ned" MODULE="guidance/booz2_guidance_h" UNIT="1/2^8m" MIN="-10" VAR="booz2_guidance_h_pos_sp.y" MAX="10" ALT_UNIT_COEF="0.00390625"/>
            <dl_setting STEP="5" ALT_UNIT="deg" SHORTNAME="sp_psi" MODULE="guidance/booz2_guidance_h" UNIT="1/2^20r" MIN="-180" VAR="booz2_guidance_h_psi_sp" MAX="180" ALT_UNIT_COEF="0.000054641513360"/>
            <dl_setting STEP="1" SHORTNAME="kp" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_pgain" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="kd" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_dgain" MAX="0"/>
            <dl_setting STEP="1" HANDLER="SetKi" SHORTNAME="ki" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_igain" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="kn" MODULE="guidance/booz2_guidance_h" MIN="-400" VAR="booz2_guidance_h_ngain" MAX="0"/>
            <dl_setting STEP="1" SHORTNAME="ka" MODULE="guidance/booz2_guidance_h" MIN="0" VAR="booz2_guidance_h_again" MAX="200"/>
            <dl_setting STEP="1" SHORTNAME="hf_realign" MODULE="booz2_ins" MIN="0" VAR="booz_ins_hf_realign" VALUES="OFF|ON" MAX="1"/>
          </dl_settings>
          <dl_settings NAME="NAV">
            <dl_setting STEP="0.1" HANDLER="SetFlightAltitude" MODULE="booz2_navigation" UNIT="m" MIN="0" VAR="flight_altitude" MAX="400"/>
            <dl_setting STEP="1" ALT_UNIT="deg" MODULE="booz2_navigation" UNIT="1/2^12r" MIN="0" VAR="nav_heading" MAX="360" ALT_UNIT_COEF="0.0139882"/>
            <dl_setting STEP="0.1" MODULE="booz2_navigation" UNIT="m" MIN="-150" VAR="nav_radius" MAX="150"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="MM1" ac_id="12" airframe="airframes/ENAC/fixed-wing/minimag1.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/basic.xml" settings="settings/tuning.xml" gui_color="#eda5ebfc17d0">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="2" Y="139.1" X="132.3"/>
          <waypoint NAME="MOB" Y="-11.6" X="137.0"/>
          <waypoint NAME="S1" Y="69.6" X="-119.2"/>
          <waypoint NAME="S2" Y="209.5" X="274.4"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions>
          <exception COND="datalink_time > 22" DEROUTE="Standby"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" KEY="F8" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <circle WP="MOB" RADIUS="nav_radius"/>
          </block>
          <block NAME="Line 1-2" STRIP_ICON="line.png" STRIP_BUTTON="Line (wp 1-2)">
            <call FUN="nav_line_init()"/>
            <call FUN="nav_line(WP_1, WP_2, nav_radius)"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Path 1,2,S1,S2,STDBY" STRIP_ICON="path.png" STRIP_BUTTON="Path (1,2,S1,S2,STDBY)">
            <path WPTS="1,2 S1"/>
            <path APPROACHING_TIME="1" THROTTLE="0.4" PITCH="auto" WPTS="S1, S2 STDBY"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="MiniMag Tiny 0.99">
        <servos>
          <servo NEUTRAL="1200" MAX="2000" NAME="THROTTLE" NO="0" MIN="1200"/>
          <servo NEUTRAL="1500" MAX="1050" NAME="AILERON_LEFT" NO="1" MIN="1775"/>
          <servo NEUTRAL="1475" MAX="1225" NAME="AILERON_RIGHT" NO="3" MIN="1875"/>
          <servo NEUTRAL="1500" MAX="1250" NAME="RUDDER" NO="4" MIN="1875"/>
          <servo NEUTRAL="1586" MAX="1150" NAME="ELEVATOR" NO="5" MIN="1850"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="HATCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
          <set COMMAND="YAW" VALUE="@YAW"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILERON_DIFF" VALUE="0.66"/>
          <define NAME="COMBI_SWITCH" VALUE="1.0"/>
        </section>
        <command_laws>
          <set VALUE="@THROTTLE" SERVO="THROTTLE"/>
          <set VALUE="@PITCH" SERVO="ELEVATOR"/>
          <set VALUE="@YAW + @ROLL*COMBI_SWITCH" SERVO="RUDDER"/>
          <let VAR="roll" VALUE="@ROLL"/>
          <set VALUE="($roll > 0 ? 1 : AILERON_DIFF) * $roll" SERVO="AILERON_LEFT"/>
          <set VALUE="($roll > 0 ? AILERON_DIFF : 1) * $roll" SERVO="AILERON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.6"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_0"/>
          <define NAME="IR2" VALUE="ADC_1"/>
          <define NAME="IR_TOP" VALUE="ADC_4"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="512"/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1."/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="-6"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="12"/>
          <define NAME="CORRECTION_UP" VALUE="1."/>
          <define NAME="CORRECTION_DOWN" VALUE="1."/>
          <define NAME="CORRECTION_LEFT" VALUE="1."/>
          <define NAME="CORRECTION_RIGHT" VALUE="1."/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="10000"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="11."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="XBEE_INIT" VALUE="\"ATPL2\\rATRN1\\rATTT80\\r\""/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="TRIGGER_DELAY" VALUE="1."/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="50."/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL" VALUE="11.1"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.07"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.55"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.30"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.80"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-500"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.15"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.025"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.05"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.05"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="0.075"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="THROTTLE_SLEW" VALUE="0.05"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1.2"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.6"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="ROLL_PGAIN" VALUE="12000."/>
          <define NAME="AILERON_OF_THROTTLE" VALUE="0.0"/>
          <define NAME="PITCH_PGAIN" VALUE="-9000."/>
          <define NAME="PITCH_DGAIN" VALUE="1.5"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="1250"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.8"/>
          <define NAME="CLIMB_PITCH" VALUE="0.3"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.25"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="1"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
        </section>
        <section NAME="DATALINK" PREFIX="DATALINK_">
          <define NAME="DEVICE_TYPE" VALUE="XBEE"/>
          <define NAME="DEVICE_ADDRESS" VALUE="...."/>
        </section>
        <makefile>include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=\&quot;tiny_0_99.h\&quot; -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
ap.CFLAGS += -DACTUATORS=\&quot;servos_4015_MAT_hw.h\&quot; -DSERVOS_4015_MAT
ap.srcs += $(SRC_ARCH)/servos_4015_MAT_hw.c actuators.c
ap.CFLAGS += -DRADIO_CONTROL
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c  
ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=XBeeTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DXBEE_UART=Uart0 -DDATALINK=XBEE -DUART0_BAUD=B9600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c xbee.c
#TRANSPARENT   ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DPPRZ_UART=Uart0 -DDATALINK=PPRZ -DUART0_BAUD=B9600
#TRANSPARENT ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c pprz_transport.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c 
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_4
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART1 -DGPS_LINK=Uart1 -DUART1_BAUD=B19200
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED -DALT_KALMAN
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c nav_survey_rectangle.c nav_line.c
# Config for SITL simulation
include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN
sim.srcs += nav_survey_rectangle.c nav_line.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="stage_time" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MODULE="downlink" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" PARAM="IR_ROLL_NEUTRAL_DEFAULT" SHORTNAME="roll_neutral" UNIT="rad" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch_neutral" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LATERAL_CORRECTION" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LONGITUDINAL_CORRECTION" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_VERTICAL_CORRECTION" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_LEFT" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_RIGHT" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_UP" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_DOWN" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="0" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" PARAM="H_CTL_ROLL_MAX_SETPOINT" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="1"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_PGAIN" SHORTNAME="pitch_pgain" MIN="-55000" VAR="h_ctl_pitch_pgain" MAX="0"/>
              <dl_setting STEP="10" PARAM="H_CTL_PITCH_DGAIN" SHORTNAME="pitch_dgain" MIN="-50000" VAR="h_ctl_pitch_dgain" MAX="0"/>
              <dl_setting STEP="100" PARAM="H_CTL_ELEVATOR_OF_ROLL" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_RATE_GAIN" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" PARAM="V_CTL_ALTITUDE_PGAIN" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.005" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" PARAM="V_CTL_AUTO_THROTTLE_LOITER_TRIM" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_PGAIN" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_IGAIN" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" PARAM="H_CTL_COURSE_PGAIN" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" PARAM="NAV_GLIDE_PITCH_TRIM" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="1" MIN="1" VAR="nav_mode" MAX="2"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="1" MIN="-20" VAR="fp_pitch" MAX="20"/>
              <dl_setting STEP="0.1" MIN="0" VAR="fp_throttle" MAX="1"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="5" VAR="nav_ground_speed_setpoint" MAX="50"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.2" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="N1" ac_id="21" airframe="airframes/LAAS/mmlaas_N1.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/form_leader.xml" settings="settings/tuning_laas.xml settings/formation.xml" gui_color="blue">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="formation flight" LON0="1.27289" MAX_DIST_FROM_HOME="400" GROUND_ALT="185" SECURITY_HEIGHT="25" ALT="250" QFU="270" LAT0="43.46223">
        <waypoints>
          <waypoint NAME="HOME" Y="0.0" X="0.0"/>
          <waypoint NAME="mid" Y="133.0" X="72.9"/>
          <waypoint NAME="wp0" Y="35.9" X="161.9"/>
          <waypoint NAME="wp1" Y="159.2" X="225.5"/>
          <waypoint NAME="wp2" Y="290.9" X="57.4"/>
          <waypoint NAME="wp3" Y="220.4" X="-79.8"/>
          <waypoint NAME="wp4" Y="148.4" X="20.4"/>
          <waypoint NAME="wp5" Y="69.5" X="22.9"/>
          <waypoint NAME="IAF" Y="92.9" X="239.7" ALT="215.0"/>
          <waypoint NAME="AF" Y="-2.8" X="187.0" ALT="210.0"/>
          <waypoint NAME="RWAY" Y="47.5" X="42.3" ALT="185.0"/>
        </waypoints>
        <blocks>
          <block NAME="init formation">
            <call FUN="add_slot(21, 10, 0, 0)"/>
            <call FUN="add_slot(22, -20, 20, 10)"/>
            <call FUN="add_slot(23, -20, -20, -10)"/>
            <set VAR="form_mode" VALUE="0"/>
            <set VAR="leader_id" VALUE="21"/>
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
          </block>
          <block NAME="cirle">
            <circle WP="mid" RADIUS="nav_radius" UNTIL="FALSE"/>
          </block>
          <block NAME="start formation">
            <call FUN="start_formation()"/>
          </block>
          <block NAME="traj" PRE_CALL="formation_pre_call()" POST_CALL="formation_flight()">
            <go WP="wp0" FROM="wp5" HMODE="route"/>
            <go WP="wp1" FROM="wp0" HMODE="route"/>
            <go WP="wp2" FROM="wp1" HMODE="route"/>
            <go WP="wp3" FROM="wp2" HMODE="route"/>
            <go WP="wp4" FROM="wp3" HMODE="route"/>
            <go WP="wp5" FROM="wp4" HMODE="route"/>
            <deroute BLOCK="traj"/>
          </block>
          <block NAME="stop formation">
            <call FUN="stop_formation()"/>
          </block>
          <block NAME="land">
            <exception COND="(GROUND_ALT+10> estimator_z)" DEROUTE="stop"/>
            <circle WP="IAF" RADIUS="50" UNTIL="WaypointAlt(WP_IAF) > estimator_z"/>
            <go WP="AF" ALT="WaypointAlt(WP_AF)"/>
            <go WP="RWAY" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="stop">
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="MiniMag Laas N1 Tiny 0.99">
        <modules>
          <load NAME="formation_flight.xml"/>
        </modules>
        <servos>
          <servo NEUTRAL="1200" MAX="2000" NAME="THROTTLE" NO="0" MIN="1200"/>
          <servo NEUTRAL="1450" MAX="1100" NAME="AILERON_LEFT" NO="3" MIN="1900"/>
          <servo NEUTRAL="1520" MAX="1100" NAME="AILERON_RIGHT" NO="1" MIN="1900"/>
          <servo NEUTRAL="1500" MAX="1150" NAME="RUDDER" NO="4" MIN="1850"/>
          <servo NEUTRAL="1568" MAX="1150" NAME="ELEVATOR" NO="5" MIN="2000"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="HATCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
          <set COMMAND="YAW" VALUE="@YAW"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILERON_DIFF" VALUE="0.66"/>
          <define NAME="COMBI_SWITCH" VALUE="1.0"/>
        </section>
        <command_laws>
          <set VALUE="@THROTTLE" SERVO="THROTTLE"/>
          <set VALUE="@PITCH" SERVO="ELEVATOR"/>
          <set VALUE="@YAW + @ROLL*COMBI_SWITCH" SERVO="RUDDER"/>
          <let VAR="roll" VALUE="@ROLL"/>
          <set VALUE="($roll > 0 ? 1 : AILERON_DIFF) * $roll" SERVO="AILERON_LEFT"/>
          <set VALUE="($roll > 0 ? AILERON_DIFF : 1) * $roll" SERVO="AILERON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.6"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_0"/>
          <define NAME="IR2" VALUE="ADC_1"/>
          <define NAME="IR_TOP" VALUE="ADC_2"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="-2.6"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="8.6"/>
          <linear COEFF1="0.7" NAME="RollOfIrs" ARITY="2" COEFF2="0.7"/>
          <linear COEFF1="-0.7" NAME="PitchOfIrs" ARITY="2" COEFF2="0.7"/>
          <linear COEFF1="1.5" NAME="TopOfIr" ARITY="1"/>
          <define NAME="ADC_IR1_NEUTRAL" VALUE="507"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="509"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="515"/>
          <define NAME="CORRECTION_UP" VALUE="1."/>
          <define NAME="CORRECTION_DOWN" VALUE="1."/>
          <define NAME="CORRECTION_LEFT" VALUE="1."/>
          <define NAME="CORRECTION_RIGHT" VALUE="1."/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1."/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="8600"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="11."/>
          <define UNIT="m/s" NAME="MINIMUM_AIRSPEED" VALUE="8."/>
          <define UNIT="m/s" NAME="MAXIMUM_AIRSPEED" VALUE="16."/>
          <define UNIT="s" NAME="CARROT" VALUE="3."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="XBEE_INIT" VALUE="\"ATPL2\\rATRN1\\rATTT80\\r\""/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="TRIGGER_DELAY" VALUE="1."/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="60."/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL" VALUE="11.1"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.15"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.55"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.30"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.90"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-2000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.15"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.05"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.05"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.065"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="0.15"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="THROTTLE_SLEW" VALUE="0.05"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1."/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.6"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="ROLL_PGAIN" VALUE="10000."/>
          <define NAME="AILERON_OF_THROTTLE" VALUE="0.0"/>
          <define NAME="PITCH_PGAIN" VALUE="-12000."/>
          <define NAME="PITCH_DGAIN" VALUE="1.5"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="1250"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
          <define NAME="NAV_GROUND_SPEED_PGAIN" VALUE="-0.015"/>
          <define NAME="NAV_FOLLOW_PGAIN" VALUE="-0.05"/>
        </section>
        <section NAME="FORMATION" PREFIX="FORM_">
          <define UNIT="s" NAME="CARROT" VALUE="3."/>
          <define NAME="POS_PGAIN" VALUE="0.02"/>
          <define NAME="SPEED_PGAIN" VALUE="0.4"/>
          <define NAME="COURSE_PGAIN" VALUE="0.8"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="0.1"/>
          <define UNIT="m" NAME="PROX" VALUE="60."/>
          <define NAME="MODE" VALUE="0"/>
        </section>
        <section NAME="TCAS" PREFIX="TCAS_">
          <define UNIT="s" NAME="TAU_TA" VALUE="10."/>
          <define UNIT="s" NAME="TAU_RA" VALUE="6."/>
          <define UNIT="m" NAME="ALIM" VALUE="15."/>
          <define UNIT="ms" NAME="DT_MAX" VALUE="2000"/>
        </section>
        <section NAME="POTENTIAL">
          <define NAME="FORCE_POS_GAIN" VALUE="50"/>
          <define NAME="FORCE_SPEED_GAIN" VALUE="1"/>
          <define NAME="FORCE_CLIMB_GAIN" VALUE="8"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.8"/>
          <define NAME="CLIMB_PITCH" VALUE="0.3"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.25"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="1"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
        <section NAME="DATALINK" PREFIX="DATALINK_">
          <define NAME="DEVICE_TYPE" VALUE="XBEE"/>
          <define NAME="DEVICE_ADDRESS" VALUE="...."/>
        </section>
        <section NAME="SIMU">
          <define NAME="YAW_RESPONSE_FACTOR" VALUE="1."/>
        </section>
        <makefile>include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=\&quot;tiny_0_99.h\&quot; -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
ap.CFLAGS += -DACTUATORS=\&quot;servos_4015_MAT_hw.h\&quot; -DSERVOS_4015_MAT
ap.srcs += $(SRC_ARCH)/servos_4015_MAT_hw.c actuators.c
ap.CFLAGS += -DRADIO_CONTROL
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c  
ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=XBeeTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DXBEE_UART=Uart0 -DDATALINK=XBEE -DUART0_BAUD=B57600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c xbee.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c 
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_2
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART1 -DGPS_LINK=Uart1 -DUART1_BAUD=B38400
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED -DALT_KALMAN
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c nav_survey_rectangle.c nav_line.c
# Hack to use the same tuning file than slayer1
#ap.CFLAGS += -DUSE_GPIO
# ap.srcs += $(SRC_ARCH)/gpio.c
# traffic
ap.CFLAGS += -DTRAFFIC_INFO
ap.srcs += traffic_info.c snav.c
# external module
ap.srcs += external.c
# tcas
ap.CFLAGS += -DTCAS
ap.srcs += tcas.c
# Harware In The Loop
#ap.CFLAGS += -DHITL
ap.CFLAGS += -DUSE_MODULES
sim.CFLAGS += -DUSE_MODULES
# Config for SITL simulation
include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN -DTRAFFIC_INFO -DTCAS
sim.srcs += nav_survey_rectangle.c nav_line.c external.c traffic_info.c snav.c tcas.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="10" MODULE="external" MIN="0" VAR="nav_alt" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" SHORTNAME="roll_neutral" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" SHORTNAME="pitch_neutral" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="1" SHORTNAME="roll_setpoint" MODULE="external" MIN="-35" VAR="nav_roll" MAX="35"/>
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="000" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="0.6"/>
              <dl_setting STEP="250" SHORTNAME="pitch_pgain" MIN="-25000" VAR="h_ctl_pitch_pgain" MAX="000"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_dgain" MIN="0." VAR="h_ctl_pitch_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.05" SHORTNAME="cruise setpoint" MODULE="external" MIN="0.0" VAR="nav_cruise" MAX="1.0"/>
              <dl_setting STEP="0.005" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.05" HANDLER="SetNavThrottle" SHORTNAME="throttle setpoint" MODULE="external" MIN="0.0" VAR="nav_throttle" MAX="1.0"/>
              <dl_setting STEP="0.01" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="10" VAR="nav_ground_speed_setpoint" MAX="20"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.05" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="formation">
            <dl_setting STEP="1" MODULE="multi/formation" MIN="0" VAR="leader_id" MAX="24"/>
            <dl_setting STEP="0.01" MODULE="multi/formation" MIN="0" VAR="coef_form_pos" MAX="1"/>
            <dl_setting STEP="0.01" MODULE="multi/formation" MIN="0" VAR="coef_form_speed" MAX="1"/>
            <dl_setting STEP="0.01" MODULE="multi/formation" MIN="0" VAR="coef_form_course" MAX="1"/>
            <dl_setting STEP="0.01" MODULE="multi/formation" MIN="0" VAR="coef_form_alt" MAX="1"/>
            <dl_setting STEP="1" MODULE="multi/formation" MIN="0" VAR="form_mode" VALUES="GLOBAL|LOCAL" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="N2" ac_id="22" airframe="airframes/LAAS/mmlaas_N2.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/form_follow.xml" settings="settings/formation.xml settings/tuning_laas.xml" gui_color="#ffffffffffff">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="test laas" LON0="1.27289" MAX_DIST_FROM_HOME="400" GROUND_ALT="185" SECURITY_HEIGHT="25" ALT="250" QFU="270" LAT0="43.46223">
        <waypoints>
          <waypoint NAME="HOME" Y="0.0" X="0.0" ALT="250"/>
          <waypoint NAME="IAF" Y="92.9" X="239.7" ALT="215.0"/>
          <waypoint NAME="AF" Y="-2.8" X="187.0" ALT="215.0"/>
          <waypoint NAME="RWAY" Y="47.5" X="42.3" ALT="185.0"/>
          <waypoint NAME="WAIT1" Y="84.9" X="118.0" ALT="260.0"/>
          <waypoint NAME="WAIT2" Y="143.5" X="-34.4" ALT="240.0"/>
        </waypoints>
        <blocks>
          <block NAME="init formation">
            <call FUN="add_slot(21, 10, 0, 0)"/>
            <call FUN="add_slot(22, -20, 20, 10)"/>
            <call FUN="add_slot(23, -20, -20, -10)"/>
            <set VAR="form_mode" VALUE="0"/>
            <set VAR="leader_id" VALUE="21"/>
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
          </block>
          <block NAME="cirle 1">
            <call FUN="stop_formation()"/>
            <circle WP="WAIT1" RADIUS="nav_radius" UNTIL="FALSE"/>
          </block>
          <block NAME="cirle 2">
            <call FUN="stop_formation()"/>
            <circle WP="WAIT2" RADIUS="nav_radius" UNTIL="FALSE"/>
          </block>
          <block NAME="formation">
            <call FUN="start_formation()"/>
            <call FUN="formation_flight()"/>
          </block>
          <block NAME="land">
            <call FUN="stop_formation()"/>
            <exception COND="(GROUND_ALT+10> estimator_z)" DEROUTE="stop"/>
            <circle WP="IAF" RADIUS="50" UNTIL="225 > estimator_z"/>
            <go WP="AF" ALT="215"/>
            <go WP="RWAY" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="stop">
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="MiniMag Laas N2 Tiny 1.1">
        <modules>
          <load NAME="formation_flight.xml"/>
        </modules>
        <servos>
          <servo NEUTRAL="1200" MAX="2000" NAME="THROTTLE" NO="0" MIN="1200"/>
          <servo NEUTRAL="1500" MAX="1100" NAME="AILERON_LEFT" NO="1" MIN="1900"/>
          <servo NEUTRAL="1500" MAX="1100" NAME="AILERON_RIGHT" NO="3" MIN="1900"/>
          <servo NEUTRAL="1500" MAX="1150" NAME="RUDDER" NO="4" MIN="1850"/>
          <servo NEUTRAL="1350" MAX="900" NAME="ELEVATOR" NO="5" MIN="1850"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="HATCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
          <set COMMAND="YAW" VALUE="@YAW"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILERON_DIFF" VALUE="0.66"/>
          <define NAME="COMBI_SWITCH" VALUE="1.0"/>
        </section>
        <command_laws>
          <set VALUE="@THROTTLE" SERVO="THROTTLE"/>
          <set VALUE="@PITCH" SERVO="ELEVATOR"/>
          <set VALUE="@YAW + @ROLL*COMBI_SWITCH" SERVO="RUDDER"/>
          <let VAR="roll" VALUE="@ROLL"/>
          <set VALUE="($roll > 0 ? 1 : AILERON_DIFF) * $roll" SERVO="AILERON_LEFT"/>
          <set VALUE="($roll > 0 ? AILERON_DIFF : 1) * $roll" SERVO="AILERON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.6"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_0"/>
          <define NAME="IR2" VALUE="ADC_1"/>
          <define NAME="IR_TOP" VALUE="ADC_2"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="-1.6"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="8.5"/>
          <linear COEFF1="0.7" NAME="RollOfIrs" ARITY="2" COEFF2="-0.7"/>
          <linear COEFF1="-0.7" NAME="PitchOfIrs" ARITY="2" COEFF2="-0.7"/>
          <linear COEFF1="-1" NAME="TopOfIr" ARITY="1"/>
          <define NAME="ADC_IR1_NEUTRAL" VALUE="515"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="518"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="513"/>
          <define NAME="CORRECTION_UP" VALUE="1."/>
          <define NAME="CORRECTION_DOWN" VALUE="1."/>
          <define NAME="CORRECTION_LEFT" VALUE="0.8"/>
          <define NAME="CORRECTION_RIGHT" VALUE="0.8"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1."/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="8600"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="11."/>
          <define UNIT="m/s" NAME="MINIMUM_AIRSPEED" VALUE="8."/>
          <define UNIT="m/s" NAME="MAXIMUM_AIRSPEED" VALUE="16."/>
          <define UNIT="s" NAME="CARROT" VALUE="3."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="XBEE_INIT" VALUE="\"ATPL2\\rATRN1\\rATTT80\\r\""/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="TRIGGER_DELAY" VALUE="1."/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="60."/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL" VALUE="11.1"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.15"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.55"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.30"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.90"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-2000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.15"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.05"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.05"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.065"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="0.15"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="THROTTLE_SLEW" VALUE="0.05"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1."/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.6"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="ROLL_PGAIN" VALUE="10000."/>
          <define NAME="AILERON_OF_THROTTLE" VALUE="0.0"/>
          <define NAME="PITCH_PGAIN" VALUE="-12000."/>
          <define NAME="PITCH_DGAIN" VALUE="1.5"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="1250"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
          <define NAME="NAV_GROUND_SPEED_PGAIN" VALUE="-0.015"/>
          <define NAME="NAV_FOLLOW_PGAIN" VALUE="-0.05"/>
        </section>
        <section NAME="FORMATION" PREFIX="FORM_">
          <define UNIT="s" NAME="CARROT" VALUE="3."/>
          <define NAME="POS_PGAIN" VALUE="0.02"/>
          <define NAME="SPEED_PGAIN" VALUE="0.4"/>
          <define NAME="COURSE_PGAIN" VALUE="0.8"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="0.1"/>
          <define UNIT="m" NAME="PROX" VALUE="60."/>
          <define NAME="MODE" VALUE="0"/>
        </section>
        <section NAME="TCAS" PREFIX="TCAS_">
          <define UNIT="s" NAME="TAU_TA" VALUE="10."/>
          <define UNIT="s" NAME="TAU_RA" VALUE="6."/>
          <define UNIT="m" NAME="ALIM" VALUE="15."/>
          <define UNIT="ms" NAME="DT_MAX" VALUE="2000"/>
        </section>
        <section NAME="POTENTIAL">
          <define NAME="FORCE_POS_GAIN" VALUE="50"/>
          <define NAME="FORCE_SPEED_GAIN" VALUE="1"/>
          <define NAME="FORCE_CLIMB_GAIN" VALUE="8"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.8"/>
          <define NAME="CLIMB_PITCH" VALUE="0.3"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.25"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="1"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
        <section NAME="DATALINK" PREFIX="DATALINK_">
          <define NAME="DEVICE_TYPE" VALUE="XBEE"/>
          <define NAME="DEVICE_ADDRESS" VALUE="...."/>
        </section>
        <section NAME="SIMU">
          <define NAME="YAW_RESPONSE_FACTOR" VALUE="0.5"/>
        </section>
        <makefile>CONFIG=\&quot;tiny_1_1.h\&quot;
include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=$(CONFIG) -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
ap.CFLAGS += -DACTUATORS=\&quot;servos_4015_MAT_hw.h\&quot; -DSERVOS_4015_MAT
ap.srcs += $(SRC_ARCH)/servos_4015_MAT_hw.c actuators.c
ap.CFLAGS += -DRADIO_CONTROL
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c  
ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=XBeeTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DXBEE_UART=Uart0 -DDATALINK=XBEE -DUART0_BAUD=B57600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c xbee.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c 
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_2
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART1 -DGPS_LINK=Uart1 -DUART1_BAUD=B38400 -DGPS_BAUD=38400
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED -DALT_KALMAN
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c nav_survey_rectangle.c nav_line.c
#traffic
ap.CFLAGS += -DTRAFFIC_INFO
ap.srcs += traffic_info.c snav.c
# external module
ap.srcs += external.c
# tcas
ap.CFLAGS += -DTCAS
ap.srcs += tcas.c
# Harware In The Loop
#ap.CFLAGS += -DHITL
ap.CFLAGS += -DUSE_MODULES
sim.CFLAGS += -DUSE_MODULES
# Config for SITL simulation
include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN -DTRAFFIC_INFO -DTCAS
sim.srcs += nav_survey_rectangle.c nav_line.c external.c traffic_info.c snav.c tcas.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="formation">
            <dl_setting STEP="1" MODULE="multi/formation" MIN="0" VAR="leader_id" MAX="24"/>
            <dl_setting STEP="0.01" MODULE="multi/formation" MIN="0" VAR="coef_form_pos" MAX="1"/>
            <dl_setting STEP="0.01" MODULE="multi/formation" MIN="0" VAR="coef_form_speed" MAX="1"/>
            <dl_setting STEP="0.01" MODULE="multi/formation" MIN="0" VAR="coef_form_course" MAX="1"/>
            <dl_setting STEP="0.01" MODULE="multi/formation" MIN="0" VAR="coef_form_alt" MAX="1"/>
            <dl_setting STEP="1" MODULE="multi/formation" MIN="0" VAR="form_mode" VALUES="GLOBAL|LOCAL" MAX="1"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="10" MODULE="external" MIN="0" VAR="nav_alt" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" SHORTNAME="roll_neutral" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" SHORTNAME="pitch_neutral" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="1" SHORTNAME="roll_setpoint" MODULE="external" MIN="-35" VAR="nav_roll" MAX="35"/>
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="000" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="0.6"/>
              <dl_setting STEP="250" SHORTNAME="pitch_pgain" MIN="-25000" VAR="h_ctl_pitch_pgain" MAX="000"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_dgain" MIN="0." VAR="h_ctl_pitch_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.05" SHORTNAME="cruise setpoint" MODULE="external" MIN="0.0" VAR="nav_cruise" MAX="1.0"/>
              <dl_setting STEP="0.005" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.05" HANDLER="SetNavThrottle" SHORTNAME="throttle setpoint" MODULE="external" MIN="0.0" VAR="nav_throttle" MAX="1.0"/>
              <dl_setting STEP="0.01" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="10" VAR="nav_ground_speed_setpoint" MAX="20"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.05" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="N3" ac_id="23" airframe="airframes/LAAS/mmlaas_N3.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/form_follow.xml" settings="settings/tuning_laas.xml" gui_color="red">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="test laas" LON0="1.27289" MAX_DIST_FROM_HOME="400" GROUND_ALT="185" SECURITY_HEIGHT="25" ALT="250" QFU="270" LAT0="43.46223">
        <waypoints>
          <waypoint NAME="HOME" Y="0.0" X="0.0" ALT="250"/>
          <waypoint NAME="IAF" Y="92.9" X="239.7" ALT="215.0"/>
          <waypoint NAME="AF" Y="-2.8" X="187.0" ALT="215.0"/>
          <waypoint NAME="RWAY" Y="47.5" X="42.3" ALT="185.0"/>
          <waypoint NAME="WAIT1" Y="84.9" X="118.0" ALT="260.0"/>
          <waypoint NAME="WAIT2" Y="143.5" X="-34.4" ALT="240.0"/>
        </waypoints>
        <blocks>
          <block NAME="init formation">
            <call FUN="add_slot(21, 10, 0, 0)"/>
            <call FUN="add_slot(22, -20, 20, 10)"/>
            <call FUN="add_slot(23, -20, -20, -10)"/>
            <set VAR="form_mode" VALUE="0"/>
            <set VAR="leader_id" VALUE="21"/>
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
          </block>
          <block NAME="cirle 1">
            <call FUN="stop_formation()"/>
            <circle WP="WAIT1" RADIUS="nav_radius" UNTIL="FALSE"/>
          </block>
          <block NAME="cirle 2">
            <call FUN="stop_formation()"/>
            <circle WP="WAIT2" RADIUS="nav_radius" UNTIL="FALSE"/>
          </block>
          <block NAME="formation">
            <call FUN="start_formation()"/>
            <call FUN="formation_flight()"/>
          </block>
          <block NAME="land">
            <call FUN="stop_formation()"/>
            <exception COND="(GROUND_ALT+10> estimator_z)" DEROUTE="stop"/>
            <circle WP="IAF" RADIUS="50" UNTIL="225 > estimator_z"/>
            <go WP="AF" ALT="215"/>
            <go WP="RWAY" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="stop">
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="MiniMag Laas N3 Tiny 1.1">
        <modules>
          <load NAME="formation_flight.xml"/>
          <load NAME="potential.xml"/>
        </modules>
        <servos>
          <servo NEUTRAL="1200" MAX="2000" NAME="THROTTLE" NO="0" MIN="1200"/>
          <servo NEUTRAL="1525" MAX="1150" NAME="AILERON_LEFT" NO="1" MIN="1775"/>
          <servo NEUTRAL="1520" MAX="1200" NAME="AILERON_RIGHT" NO="3" MIN="1775"/>
          <servo NEUTRAL="1550" MAX="1150" NAME="RUDDER" NO="4" MIN="1850"/>
          <servo NEUTRAL="1580" MAX="1150" NAME="ELEVATOR" NO="5" MIN="2000"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
          <axis NAME="HATCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
          <set COMMAND="YAW" VALUE="@YAW"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILERON_DIFF" VALUE="0.66"/>
          <define NAME="COMBI_SWITCH" VALUE="1.0"/>
        </section>
        <command_laws>
          <set VALUE="@THROTTLE" SERVO="THROTTLE"/>
          <set VALUE="@PITCH" SERVO="ELEVATOR"/>
          <set VALUE="@YAW + @ROLL*COMBI_SWITCH" SERVO="RUDDER"/>
          <let VAR="roll" VALUE="@ROLL"/>
          <set VALUE="($roll > 0 ? 1 : AILERON_DIFF) * $roll" SERVO="AILERON_LEFT"/>
          <set VALUE="($roll > 0 ? AILERON_DIFF : 1) * $roll" SERVO="AILERON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.6"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_0"/>
          <define NAME="IR2" VALUE="ADC_1"/>
          <define NAME="IR_TOP" VALUE="ADC_2"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="3"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="9"/>
          <linear COEFF1="-0.7" NAME="RollOfIrs" ARITY="2" COEFF2="0.7"/>
          <linear COEFF1="-0.7" NAME="PitchOfIrs" ARITY="2" COEFF2="-0.7"/>
          <linear COEFF1="1" NAME="TopOfIr" ARITY="1"/>
          <define NAME="ADC_IR1_NEUTRAL" VALUE="519"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="508"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="516"/>
          <define NAME="CORRECTION_UP" VALUE="1."/>
          <define NAME="CORRECTION_DOWN" VALUE="1."/>
          <define NAME="CORRECTION_LEFT" VALUE="1."/>
          <define NAME="CORRECTION_RIGHT" VALUE="1."/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1.4"/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="8600"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="11."/>
          <define UNIT="m/s" NAME="MINIMUM_AIRSPEED" VALUE="8."/>
          <define UNIT="m/s" NAME="MAXIMUM_AIRSPEED" VALUE="16."/>
          <define UNIT="s" NAME="CARROT" VALUE="3."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="XBEE_INIT" VALUE="\"ATPL2\\rATRN1\\rATTT80\\r\""/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="TRIGGER_DELAY" VALUE="1."/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="40."/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL" VALUE="11.1"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.15"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.55"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.30"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.90"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-2000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.15"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.05"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.05"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.065"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="0.15"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="THROTTLE_SLEW" VALUE="0.05"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1."/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.6"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="ROLL_PGAIN" VALUE="10000."/>
          <define NAME="AILERON_OF_THROTTLE" VALUE="0.0"/>
          <define NAME="PITCH_PGAIN" VALUE="-12000."/>
          <define NAME="PITCH_DGAIN" VALUE="1.5"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="1250"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
          <define NAME="NAV_GROUND_SPEED_PGAIN" VALUE="-0.015"/>
          <define NAME="NAV_FOLLOW_PGAIN" VALUE="-0.05"/>
        </section>
        <section NAME="FORMATION" PREFIX="FORM_">
          <define UNIT="s" NAME="CARROT" VALUE="3."/>
          <define NAME="POS_PGAIN" VALUE="0.02"/>
          <define NAME="SPEED_PGAIN" VALUE="0.4"/>
          <define NAME="COURSE_PGAIN" VALUE="0.8"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="0.1"/>
          <define UNIT="m" NAME="PROX" VALUE="60."/>
          <define NAME="MODE" VALUE="0"/>
        </section>
        <section NAME="TCAS" PREFIX="TCAS_">
          <define UNIT="s" NAME="TAU_TA" VALUE="10."/>
          <define UNIT="s" NAME="TAU_RA" VALUE="6."/>
          <define UNIT="m" NAME="ALIM" VALUE="15."/>
          <define UNIT="ms" NAME="DT_MAX" VALUE="2000"/>
        </section>
        <section NAME="POTENTIAL">
          <define NAME="FORCE_POS_GAIN" VALUE="50"/>
          <define NAME="FORCE_SPEED_GAIN" VALUE="1"/>
          <define NAME="FORCE_CLIMB_GAIN" VALUE="8"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.8"/>
          <define NAME="CLIMB_PITCH" VALUE="0.3"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.25"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="1"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
        <section NAME="DATALINK" PREFIX="DATALINK_">
          <define NAME="DEVICE_TYPE" VALUE="XBEE"/>
          <define NAME="DEVICE_ADDRESS" VALUE="...."/>
        </section>
        <section NAME="SIMU">
          <define NAME="YAW_RESPONSE_FACTOR" VALUE="1."/>
        </section>
        <makefile>include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=\&quot;tiny_1_1.h\&quot; -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
ap.CFLAGS += -DACTUATORS=\&quot;servos_4015_MAT_hw.h\&quot; -DSERVOS_4015_MAT
ap.srcs += $(SRC_ARCH)/servos_4015_MAT_hw.c actuators.c
ap.CFLAGS += -DRADIO_CONTROL
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c  
ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=XBeeTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DXBEE_UART=Uart0 -DDATALINK=XBEE -DUART0_BAUD=B57600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c xbee.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c 
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_2
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART1 -DGPS_LINK=Uart1 -DUART1_BAUD=B38400 -DGPS_BAUD=38400
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED -DALT_KALMAN
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c nav_survey_rectangle.c nav_line.c
# traffic
ap.CFLAGS += -DTRAFFIC_INFO
ap.srcs += traffic_info.c snav.c
# external module
ap.srcs += external.c
# tcas
ap.CFLAGS += -DTCAS
ap.srcs += tcas.c
# Harware In The Loop
#ap.CFLAGS += -DHITL
ap.CFLAGS += -DUSE_MODULES
sim.CFLAGS += -DUSE_MODULES
# Config for SITL simulation
include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN -DTRAFFIC_INFO -DTCAS
sim.srcs += nav_survey_rectangle.c nav_line.c external.c traffic_info.c snav.c tcas.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="10" MODULE="external" MIN="0" VAR="nav_alt" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" SHORTNAME="roll_neutral" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" SHORTNAME="pitch_neutral" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="1" SHORTNAME="roll_setpoint" MODULE="external" MIN="-35" VAR="nav_roll" MAX="35"/>
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="000" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="0.6"/>
              <dl_setting STEP="250" SHORTNAME="pitch_pgain" MIN="-25000" VAR="h_ctl_pitch_pgain" MAX="000"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_dgain" MIN="0." VAR="h_ctl_pitch_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.05" SHORTNAME="cruise setpoint" MODULE="external" MIN="0.0" VAR="nav_cruise" MAX="1.0"/>
              <dl_setting STEP="0.005" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.05" HANDLER="SetNavThrottle" SHORTNAME="throttle setpoint" MODULE="external" MIN="0.0" VAR="nav_throttle" MAX="1.0"/>
              <dl_setting STEP="0.01" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="10" VAR="nav_ground_speed_setpoint" MAX="20"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.05" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="S1" ac_id="10" airframe="airframes/obsolete/slicer1.xml" radio="radios/T9cap.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/basic.xml" settings="settings/cam.xml settings/switch.xml settings/tuning.xml" gui_color="blue">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="NEGATIVE" NAME="T9cap" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="right_stick_horiz" NEUTRAL="1525" MAX="1114" FUNCTION="ROLL" MIN="1939" AVERAGE="0"/>
        <channel CTL="right_stick_vert" NEUTRAL="1518" MAX="1937" FUNCTION="PITCH" MIN="1112" AVERAGE="0"/>
        <channel CTL="left_stick_vert" NEUTRAL="1940" MAX="1115" FUNCTION="THROTTLE" MIN="1940" AVERAGE="0"/>
        <channel CTL="left_stick_horiz" NEUTRAL="1498" MAX="1115" FUNCTION="YAW" MIN="1940" AVERAGE="0"/>
        <channel CTL="switch_G" NEUTRAL="1525" MAX="969" FUNCTION="CALIB" MIN="2080" AVERAGE="10"/>
        <channel CTL="VRA" NEUTRAL="1520" MAX="2078" FUNCTION="GAIN1" MIN="970" AVERAGE="10"/>
        <channel CTL="VRC" NEUTRAL="1518" MAX="2077" FUNCTION="GAIN2" MIN="970" AVERAGE="10"/>
        <channel CTL="switch_C" NEUTRAL="1526" MAX="966" FUNCTION="MODE" MIN="2079" AVERAGE="10"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="2" Y="139.1" X="132.3"/>
          <waypoint NAME="MOB" Y="-11.6" X="137.0"/>
          <waypoint NAME="S1" Y="69.6" X="-119.2"/>
          <waypoint NAME="S2" Y="209.5" X="274.4"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions>
          <exception COND="datalink_time > 22" DEROUTE="Standby"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" KEY="F8" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <circle WP="MOB" RADIUS="nav_radius"/>
          </block>
          <block NAME="Line 1-2" STRIP_ICON="line.png" STRIP_BUTTON="Line (wp 1-2)">
            <call FUN="nav_line_init()"/>
            <call FUN="nav_line(WP_1, WP_2, nav_radius)"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Path 1,2,S1,S2,STDBY" STRIP_ICON="path.png" STRIP_BUTTON="Path (1,2,S1,S2,STDBY)">
            <path WPTS="1,2 S1"/>
            <path APPROACHING_TIME="1" THROTTLE="0.4" PITCH="auto" WPTS="S1, S2 STDBY"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Slicer 1">
        <servos>
          <servo NEUTRAL="1620" MAX="2000" NAME="AILEVON_RIGHT" NO="0" MIN="1000"/>
          <servo NEUTRAL="1400" MAX="1000" NAME="AILEVON_LEFT" NO="1" MIN="2000"/>
          <servo NEUTRAL="1270" MAX="1810" NAME="THROTTLE" NO="2" MIN="1270"/>
          <servo NEUTRAL="1550" MAX="1000" NAME="CAM_PAN" NO="3" MIN="2000"/>
          <servo NEUTRAL="1550" MAX="2000" NAME="CAM_TILT" NO="6" MIN="1000"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="CAM_TILT" FAILSAFE_VALUE="0"/>
          <axis NAME="CAM_PAN" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
          <set COMMAND="CAM_PAN" VALUE="@YAW"/>
          <set COMMAND="CAM_TILT" VALUE="@GAIN1"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILEVON_AILERON_RATE" VALUE="0.8"/>
          <define NAME="AILEVON_ELEVATOR_RATE" VALUE="0.7"/>
        </section>
        <command_laws>
          <let VAR="aileron" VALUE="@ROLL  * AILEVON_AILERON_RATE"/>
          <let VAR="elevator" VALUE="- @PITCH * AILEVON_ELEVATOR_RATE"/>
          <set VALUE="@THROTTLE" SERVO="THROTTLE"/>
          <set VALUE="$elevator + $aileron" SERVO="AILEVON_LEFT"/>
          <set VALUE="$elevator - $aileron" SERVO="AILEVON_RIGHT"/>
          <set VALUE="@CAM_PAN" SERVO="CAM_PAN"/>
          <set VALUE="@CAM_TILT" SERVO="CAM_TILT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="1"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_1"/>
          <define NAME="IR2" VALUE="ADC_0"/>
          <define NAME="IR_TOP" VALUE="ADC_2"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
          <define NAME="GYRO_ROLL" VALUE="ADC_3"/>
          <define NAME="GYRO_NB_SAMPLES" VALUE="16"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="517"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="495"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="514"/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="IR2_SIGN" VALUE="-1"/>
          <define NAME="TOP_SIGN" VALUE="-1"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1.0"/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="-4"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="6"/>
          <define NAME="CORRECTION_UP" VALUE="1.0"/>
          <define NAME="CORRECTION_DOWN" VALUE="1.0"/>
          <define NAME="CORRECTION_LEFT" VALUE="1.0"/>
          <define NAME="CORRECTION_RIGHT" VALUE="1.0"/>
        </section>
        <section NAME="GYRO" PREFIX="GYRO_">
          <define NAME="ADC_ROLL_NEUTRAL" VALUE="537"/>
          <define UNIT="deg/s" NAME="DYNAMIC_RANGE" VALUE="300"/>
          <define NAME="ADXRS300_RESISTOR_BRIDGE" VALUE="(3.3/(3.3+1.8))"/>
          <define UNIT="mV/(deg/s)" NAME="ADXRS300_SENSITIVITY" VALUE="5"/>
          <define UNIT="deg/s/adc_unit" NAME="ROLL_SCALE" VALUE="3.3*1000./1024./(GYRO_ADXRS300_SENSITIVITY*GYRO_ADXRS300_RESISTOR_BRIDGE)"/>
          <define NAME="ROLL_DIRECTION" VALUE="-1."/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_PER_PERCENT" VALUE="0.86"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="13."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="UNLOCKED_HOME_MODE" VALUE="TRUE"/>
          <define NAME="RC_LOST_MODE" VALUE="PPRZ_MODE_AUTO2"/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="45."/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL" VALUE="11.1"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.03"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.61"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.40"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.85"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-4000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.15"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.01"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.05"/>
          <define UNIT="s" NAME="THROTTLE_SLEW_LIMITER" VALUE="2"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1.3"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.6"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="PITCH_PGAIN" VALUE="-10000."/>
          <define NAME="PITCH_DGAIN" VALUE="1.5"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="1250"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-7500"/>
          <define NAME="ROLL_RATE_GAIN" VALUE="-1500"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.90"/>
          <define NAME="CLIMB_PITCH" VALUE="0.3"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.25"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="2"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
        </section>
        <section NAME="CAM" PREFIX="CAM_">
          <define UNIT="deg" NAME="TILT_MAX" VALUE="30"/>
          <define UNIT="deg" NAME="TILT_NEUTRAL" VALUE="0"/>
          <define UNIT="deg" NAME="TILT_MIN" VALUE="-30"/>
          <define UNIT="deg" NAME="TILT0" VALUE="0"/>
          <define UNIT="deg" NAME="PAN_MAX" VALUE="45"/>
          <define UNIT="deg" NAME="PAN_NEUTRAL" VALUE="0"/>
          <define UNIT="deg" NAME="PAN_MIN" VALUE="-45"/>
          <define UNIT="deg" NAME="PAN0" VALUE="0"/>
        </section>
        <makefile>CONFIG=\&quot;tiny_1_1.h\&quot;
include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=$(CONFIG) -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
ap.CFLAGS += -DACTUATORS=\&quot;servos_4015_MAT_hw.h\&quot; -DSERVOS_4015_MAT
ap.srcs += $(SRC_ARCH)/servos_4015_MAT_hw.c actuators.c
# 72MHz
ap.CFLAGS += -DRADIO_CONTROL
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c
# Radiotronix
ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DPPRZ_UART=Uart0 -DDATALINK=PPRZ -DUART0_BAUD=B9600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c pprz_transport.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_2 -DUSE_ADC_3
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DGYRO -DADXRS150
ap.srcs += gyro.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART1 -DGPS_LINK=Uart1 -DUART1_BAUD=B9600 -DGPS_LED=2 -DDOWNLINK_GPS_1Hz
ap.CFLAGS += -DGPS_CONFIGURE -DGPS_BAUD=38400
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN -DWIND_INFO
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c
ap.srcs += nav_line.c nav_survey_rectangle.c
ap.CFLAGS += -DCAM -DMOBILE_CAM -DPOINT_CAM -DPOINT_CAM_PITCH_ROLL
# -DTEST_CAM
ap.srcs += cam.c point.c
# traffic_info.c
# Config for SITL simulation
include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN
sim.srcs += nav_survey_rectangle.c nav_line.c
sim.CFLAGS += -DCAM -DMOBILE_CAM -DPOINT_CAM -DPOINT_CAM_PITCH_ROLL
sim.srcs += cam.c point.c traffic_info.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings NAME="control">
          <dl_settings NAME="cam">
            <dl_setting STEP="1" MODULE="cam_control/cam" MIN="0" VAR="cam_mode" MAX="5">
              <strip_button NAME="AC_TARGET" VALUE="5"/>
              <strip_button NAME="WP_TARGET" VALUE="4"/>
              <strip_button NAME="XY_TARGET" VALUE="3"/>
              <strip_button NAME="NADIR" VALUE="2"/>
              <strip_button NAME="ANGLES" VALUE="1"/>
              <strip_button NAME="OFF" VALUE="0"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="angles">
            <dl_setting STEP="0.1" MODULE="cam_control/cam" MIN="-0.5" VAR="cam_tilt_c" MAX="0.5"/>
            <dl_setting STEP="0.1" MODULE="cam_control/cam" MIN="-0.5" VAR="cam_pan_c" MAX="0.5"/>
          </dl_settings>
          <dl_settings NAME="target">
            <dl_setting STEP="1" SHORTNAME="wp" MODULE="cam_control/cam" MIN="1" VAR="cam_target_wp" MAX="27"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings NAME="Power switch control">
          <dl_settings NAME="Power switch">
            <dl_setting STEP="1" HANDLER="SetPowerSwitch" MODULE="autopilot" MIN="0" VAR="power_switch" MAX="1">
              <strip_button NAME="Switch on" VALUE="1" ICON="on.png"/>
              <strip_button NAME="Switch off" VALUE="0" ICON="off.png"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="stage_time" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MODULE="downlink" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" PARAM="IR_ROLL_NEUTRAL_DEFAULT" SHORTNAME="roll_neutral" UNIT="rad" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch_neutral" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LATERAL_CORRECTION" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LONGITUDINAL_CORRECTION" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_VERTICAL_CORRECTION" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_LEFT" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_RIGHT" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_UP" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_DOWN" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="0" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" PARAM="H_CTL_ROLL_MAX_SETPOINT" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="1"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_PGAIN" SHORTNAME="pitch_pgain" MIN="-55000" VAR="h_ctl_pitch_pgain" MAX="0"/>
              <dl_setting STEP="10" PARAM="H_CTL_PITCH_DGAIN" SHORTNAME="pitch_dgain" MIN="-50000" VAR="h_ctl_pitch_dgain" MAX="0"/>
              <dl_setting STEP="100" PARAM="H_CTL_ELEVATOR_OF_ROLL" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_RATE_GAIN" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" PARAM="V_CTL_ALTITUDE_PGAIN" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.005" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" PARAM="V_CTL_AUTO_THROTTLE_LOITER_TRIM" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_PGAIN" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_IGAIN" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" PARAM="H_CTL_COURSE_PGAIN" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" PARAM="NAV_GLIDE_PITCH_TRIM" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="1" MIN="1" VAR="nav_mode" MAX="2"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="1" MIN="-20" VAR="fp_pitch" MAX="20"/>
              <dl_setting STEP="0.1" MIN="0" VAR="fp_throttle" MAX="1"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="5" VAR="nav_ground_speed_setpoint" MAX="50"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.2" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="S2" ac_id="4" airframe="airframes/ENAC/fixed-wing/slayer2.xml" radio="radios/T9cap.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/basic.xml" settings="settings/tuning.xml" gui_color="#e69826584378">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="NEGATIVE" NAME="T9cap" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="right_stick_horiz" NEUTRAL="1525" MAX="1114" FUNCTION="ROLL" MIN="1939" AVERAGE="0"/>
        <channel CTL="right_stick_vert" NEUTRAL="1518" MAX="1937" FUNCTION="PITCH" MIN="1112" AVERAGE="0"/>
        <channel CTL="left_stick_vert" NEUTRAL="1940" MAX="1115" FUNCTION="THROTTLE" MIN="1940" AVERAGE="0"/>
        <channel CTL="left_stick_horiz" NEUTRAL="1498" MAX="1115" FUNCTION="YAW" MIN="1940" AVERAGE="0"/>
        <channel CTL="switch_G" NEUTRAL="1525" MAX="969" FUNCTION="CALIB" MIN="2080" AVERAGE="10"/>
        <channel CTL="VRA" NEUTRAL="1520" MAX="2078" FUNCTION="GAIN1" MIN="970" AVERAGE="10"/>
        <channel CTL="VRC" NEUTRAL="1518" MAX="2077" FUNCTION="GAIN2" MIN="970" AVERAGE="10"/>
        <channel CTL="switch_C" NEUTRAL="1526" MAX="966" FUNCTION="MODE" MIN="2079" AVERAGE="10"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="2" Y="139.1" X="132.3"/>
          <waypoint NAME="MOB" Y="-11.6" X="137.0"/>
          <waypoint NAME="S1" Y="69.6" X="-119.2"/>
          <waypoint NAME="S2" Y="209.5" X="274.4"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions>
          <exception COND="datalink_time > 22" DEROUTE="Standby"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" KEY="F8" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <circle WP="MOB" RADIUS="nav_radius"/>
          </block>
          <block NAME="Line 1-2" STRIP_ICON="line.png" STRIP_BUTTON="Line (wp 1-2)">
            <call FUN="nav_line_init()"/>
            <call FUN="nav_line(WP_1, WP_2, nav_radius)"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Path 1,2,S1,S2,STDBY" STRIP_ICON="path.png" STRIP_BUTTON="Path (1,2,S1,S2,STDBY)">
            <path WPTS="1,2 S1"/>
            <path APPROACHING_TIME="1" THROTTLE="0.4" PITCH="auto" WPTS="S1, S2 STDBY"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe name="Miraterre Slayer 2">
        <servos>
          <servo name="AILEVON_RIGHT" no="1" min="1000" neutral="1500" max="2000"/>
          <servo name="AILEVON_LEFT" no="0" min="2000" neutral="1480" max="900"/>
          <servo name="THROTTLE" no="4" min="1250" neutral="1250" max="1850"/>
          <servo name="HATCH" no="3" min="2000" neutral="2000" max="1000"/>
        </servos>
        <commands>
          <axis name="THROTTLE" failsafe_value="0"/>
          <axis name="ROLL" failsafe_value="0"/>
          <axis name="PITCH" failsafe_value="0"/>
          <axis name="HATCH" failsafe_value="0"/>
        </commands>
        <rc_commands>
          <set command="THROTTLE" value="@THROTTLE"/>
          <set command="ROLL" value="@ROLL"/>
          <set command="PITCH" value="@PITCH"/>
        </rc_commands>
        <section name="MIXER">
          <define name="AILEVON_AILERON_RATE" value="0.8"/>
          <define name="AILEVON_ELEVATOR_RATE" value="0.8"/>
        </section>
        <command_laws>
          <let var="aileron" value="@ROLL  * AILEVON_AILERON_RATE"/>
          <let var="elevator" value="@PITCH * AILEVON_ELEVATOR_RATE"/>
          <set servo="THROTTLE" value="@THROTTLE"/>
          <set servo="AILEVON_LEFT" value="$elevator + $aileron"/>
          <set servo="AILEVON_RIGHT" value="$elevator - $aileron"/>
          <set servo="HATCH" value="@HATCH"/>
        </command_laws>
        <section name="AUTO1" prefix="AUTO1_">
          <define name="MAX_ROLL" value="0.96"/>
          <define name="MAX_PITCH" value="0.8"/>
        </section>
        <section name="adc" prefix="ADC_CHANNEL_">
          <define name="IR1" value="ADC_1"/>
          <define name="IR2" value="ADC_0"/>
          <define name="IR_TOP" value="ADC_4"/>
          <define name="IR_NB_SAMPLES" value="16"/>
          <define name="GYRO_ROLL" value="ADC_5"/>
          <define name="GYRO_NB_SAMPLES" value="16"/>
        </section>
        <section name="INFRARED" prefix="IR_">
          <define name="ADC_IR1_NEUTRAL" value="512"/>
          <define name="ADC_IR2_NEUTRAL" value="512"/>
          <define name="ADC_TOP_NEUTRAL" value="510"/>
          <define name="HORIZ_SENSOR_TILTED" value="1"/>
          <define name="IR2_SIGN" value="1"/>
          <define name="TOP_SIGN" value="-1"/>
          <define name="LATERAL_CORRECTION" value="0.356000006199"/>
          <define name="LONGITUDINAL_CORRECTION" value="0.381000012159"/>
          <define name="VERTICAL_CORRECTION" value="1.5"/>
          <define name="ROLL_NEUTRAL_DEFAULT" value="-9" unit="deg"/>
          <define name="PITCH_NEUTRAL_DEFAULT" value="3" unit="deg"/>
          <define name="CORRECTION_UP" value="1.5"/>
          <define name="CORRECTION_DOWN" value="1.5"/>
          <define name="CORRECTION_LEFT" value="1."/>
          <define name="CORRECTION_RIGHT" value="1."/>
        </section>
        <section name="GYRO" prefix="GYRO_">
          <define name="ADC_ROLL_NEUTRAL" value="484"/>
          <define name="ROLL_SCALE" value="1.3846"/>
          <define name="ROLL_DIRECTION" value="-1."/>
        </section>
        <section name="BAT">
          <define name="MILLIAMP_AT_FULL_THROTTLE" value="5000"/>
          <define name="CATASTROPHIC_BAT_LEVEL" value="9.3" unit="V"/>
          <define name="VoltageOfAdc(adc)" value="(0.0183*adc)"/>
        </section>
        <section name="MISC">
          <define name="NOMINAL_AIRSPEED" value="20." unit="m/s"/>
          <define name="MAXIMUM_AIRSPEED" value="25." unit="m/s"/>
          <define name="MINIMUM_AIRSPEED" value="15." unit="m/s"/>
          <define name="CARROT" value="3." unit="s"/>
          <define name="KILL_MODE_DISTANCE" value="(1.5*MAX_DIST_FROM_HOME)"/>
          <define name="CONTROL_RATE" value="60" unit="Hz"/>
          <define name="ALT_KALMAN_ENABLED" value="TRUE"/>
          <define name="DEFAULT_CIRCLE_RADIUS" value="90"/>
          <define name="UNLOCKED_HOME_MODE" value="TRUE"/>
          <define name="RC_LOST_MODE" value="PPRZ_MODE_AUTO2"/>
          <define name="GLIDE_AIRSPEED" value="12.5"/>
          <define name="GLIDE_VSPEED" value="2."/>
          <define name="GLIDE_PITCH" value="45" unit="deg"/>
          <define name="TELEMETRY_MODE_AP" value="1"/>
        </section>
        <section name="VERTICAL CONTROL" prefix="V_CTL_">
          <define name="ALTITUDE_PGAIN" value="-0.065"/>
          <define name="ALTITUDE_MAX_CLIMB" value="3."/>
          <define name="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" value="0.5"/>
          <define name="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" value=".47"/>
          <define name="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" value="1"/>
          <define name="AUTO_THROTTLE_LOITER_TRIM" value="1250"/>
          <define name="AUTO_THROTTLE_DASH_TRIM" value="-2000"/>
          <define name="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" value="0.15" unit="%/(m/s)"/>
          <define name="AUTO_THROTTLE_PGAIN" value="-0.01"/>
          <define name="AUTO_THROTTLE_IGAIN" value="0.15"/>
          <define name="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" value="0.15"/>
          <define name="AUTO_THROTTLE_PITCH_OF_VZ_DGAIN" value="-1"/>
          <define name="AUTO_PITCH_PGAIN" value="-0.1"/>
          <define name="AUTO_PITCH_IGAIN" value="0.025"/>
          <define name="AUTO_PITCH_MAX_PITCH" value="0.5"/>
          <define name="AUTO_PITCH_MIN_PITCH" value="-0.5"/>
          <define name="THROTTLE_SLEW" value="0.05"/>
        </section>
        <section name="HORIZONTAL CONTROL" prefix="H_CTL_">
          <define name="COURSE_PGAIN" value="-2.6"/>
          <define name="COURSE_DGAIN" value="1"/>
          <define name="COURSE_PRE_BANK_CORRECTION" value="1."/>
          <define name="ROLL_MAX_SETPOINT" value="0.73" unit="radians"/>
          <define name="PITCH_MAX_SETPOINT" value="0.5" unit="radians"/>
          <define name="PITCH_MIN_SETPOINT" value="-0.5" unit="radians"/>
          <define name="PITCH_PGAIN" value="-9000."/>
          <define name="PITCH_DGAIN" value="0."/>
          <define name="ELEVATOR_OF_ROLL" value="1000"/>
          <define name="ROLL_ATTITUDE_GAIN" value="-7500"/>
          <define name="ROLL_RATE_GAIN" value="-1500"/>
          <define name="COURSE_SLEW_INCREMENT" value="RadOfDeg(3)"/>
        </section>
        <section name="NAV">
          <define name="NAV_PITCH" value="0."/>
          <define name="NAV_GLIDE_PITCH_TRIM" value="0"/>
        </section>
        <section name="AGGRESSIVE" prefix="AGR_">
          <define name="BLEND_START" value="50"/>
          <define name="BLEND_END" value="15"/>
          <define name="CLIMB_THROTTLE" value="1."/>
          <define name="CLIMB_PITCH" value="0.42"/>
          <define name="DESCENT_THROTTLE" value="0.1"/>
          <define name="DESCENT_PITCH" value="-0.5"/>
          <define name="CLIMB_NAV_RATIO" value="0.4"/>
          <define name="DESCENT_NAV_RATIO" value="1.0"/>
        </section>
        <section name="FAILSAFE" prefix="FAILSAFE_">
          <define name="DELAY_WITHOUT_GPS" value="1" unit="s"/>
          <define name="DEFAULT_THROTTLE" value="0." unit="%"/>
          <define name="DEFAULT_ROLL" value="0.3" unit="rad"/>
          <define name="DEFAULT_PITCH" value="0.2" unit="rad"/>
          <define name="HOME_RADIUS" value="100" unit="m"/>
        </section>
        <makefile>include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=\&quot;tiny_0_99.h\&quot; -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
ap.CFLAGS += -DACTUATORS=\&quot;servos_4015_MAT_hw.h\&quot; -DSERVOS_4015_MAT
ap.srcs += $(SRC_ARCH)/servos_4015_MAT_hw.c actuators.c
ap.CFLAGS += -DRADIO_CONTROL
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c  
#ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=XBeeTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DXBEE_UART=Uart0 -DDATALINK=XBEE -DUART0_BAUD=B9600
#ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c xbee.c
# AEROCOMM
#ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DPPRZ_UART=Uart0 -DDATALINK=PPRZ -DUART0_BAUD=B57600
# RADIOTRONIX
ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DDOWNLINK_AP_DEVICE=Uart0 -DPPRZ_UART=Uart0 -DDATALINK=PPRZ -DUART0_BAUD=B9600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c pprz_transport.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c 
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_4 -DUSE_ADC_5 -DUSE_ADC_6
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART1 -DGPS_LINK=Uart1 -DUART1_BAUD=B38400
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED -DALT_KALMAN
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c nav_survey_rectangle.c traffic_info.c nav_line.c
# Camera power switch on ADC_7 pin
ap.CFLAGS += -DLED_3_BANK=0 -DLED_3_PIN=10 -DPOWER_SWITCH_LED=3
ap.CFLAGS += -DGYRO -DADXRS150
# -DIDG300
ap.srcs += gyro.c
# ap.srcs += bomb.c
# Hack to use the same tuning file than slayer1
ap.CFLAGS += -DUSE_GPIO
ap.srcs += $(SRC_ARCH)/gpio.c
# Harware In The Loop
#ap.CFLAGS += -DHITL
# ap.CFLAGS += -DTELEMETRY_MODE_FBW=1
ap.CFLAGS += -DUSE_SPI -DSPI_MASTER -DUSE_SPI_SLAVE0 -DUSE_BARO_MS5534A
ap.srcs += spi.c $(SRC_ARCH)/spi_hw.c $(SRC_ARCH)/baro_MS5534A.c
ap.CFLAGS += -D BARO_MS5534A_W1=0xAC20 -D BARO_MS5534A_W2=0x87D9 -D BARO_MS5534A_W3=0X8D9C -D BARO_MS5534A_W4=0xB080
# C1 = 22032 UT1=24568
# Config for SITL simulation
# Config for SITL simulation
#include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.ARCHDIR = $(ARCHI)
sim.ARCH = sitl
sim.CFLAGS += -DSITL -DAP -DFBW -DRADIO_CONTROL -DINTER_MCU -DDOWNLINK -DDOWNLINK_TRANSPORT=IvyTransport -DINFRARED -DNAV -DLED -DWIND_INFO
sim.srcs = latlong.c radio_control.c downlink.c commands.c gps.c inter_mcu.c infrared.c fw_v_ctl.c nav.c estimator.c sys_time.c main_fbw.c main_ap.c datalink.c $(SRC_ARCH)/ppm_hw.c $(SRC_ARCH)/sim_gps.c $(SRC_ARCH)/sim_ir.c $(SRC_ARCH)/sim_ap.c $(SRC_ARCH)/ivy_transport.c $(SRC_ARCH)/sim_adc_generic.c $(SRC_ARCH)/led_hw.c
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN  -DUSE_BARO_MS5534A 
sim.srcs += nav_survey_rectangle.c nav_line.c $(SRC_ARCH)/sim_baro.c 
sim.srcs += fw_h_ctl.c
# sim.srcs += fw_h_ctl_a.c
# sim.CFLAGS += -DH_CTL_ROLL_IGAIN=-500 -DH_CTL_ROLL_KFF=-500</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="stage_time" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MODULE="downlink" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" PARAM="IR_ROLL_NEUTRAL_DEFAULT" SHORTNAME="roll_neutral" UNIT="rad" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch_neutral" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LATERAL_CORRECTION" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LONGITUDINAL_CORRECTION" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_VERTICAL_CORRECTION" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_LEFT" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_RIGHT" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_UP" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_DOWN" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="0" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" PARAM="H_CTL_ROLL_MAX_SETPOINT" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="1"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_PGAIN" SHORTNAME="pitch_pgain" MIN="-55000" VAR="h_ctl_pitch_pgain" MAX="0"/>
              <dl_setting STEP="10" PARAM="H_CTL_PITCH_DGAIN" SHORTNAME="pitch_dgain" MIN="-50000" VAR="h_ctl_pitch_dgain" MAX="0"/>
              <dl_setting STEP="100" PARAM="H_CTL_ELEVATOR_OF_ROLL" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_RATE_GAIN" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" PARAM="V_CTL_ALTITUDE_PGAIN" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.005" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" PARAM="V_CTL_AUTO_THROTTLE_LOITER_TRIM" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_PGAIN" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_IGAIN" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" PARAM="H_CTL_COURSE_PGAIN" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" PARAM="NAV_GLIDE_PITCH_TRIM" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="1" MIN="1" VAR="nav_mode" MAX="2"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="1" MIN="-20" VAR="fp_pitch" MAX="20"/>
              <dl_setting STEP="0.1" MIN="0" VAR="fp_throttle" MAX="1"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="5" VAR="nav_ground_speed_setpoint" MAX="50"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.2" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="SPOC" ac_id="16" airframe="airframes/ENAC/fixed-wing/spocII.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/corsica.xml" settings="settings/tuning.xml" gui_color="blue">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Corsica" LON0="7.512539" MAX_DIST_FROM_HOME="200000" GROUND_ALT="0" SECURITY_HEIGHT="70" ALT="120" QFU="130" LAT0="43.781498">
        <waypoints>
          <waypoint LAT="42.644957" NAME="HOME" LON="9.015701"/>
          <waypoint LAT="43.78" NAME="STDBY_MENTON" LON="7.5145"/>
          <waypoint LAT="42.6444" NAME="STDBY_LOZARI" LON="9.016"/>
          <waypoint LAT="43.779365" NAME="MENTON" LON="7.514127"/>
          <waypoint LAT="43.540596" NAME="TMA_NICE" LON="7.830192"/>
          <waypoint LAT="42.815734" NAME="TMA_CALVI" LON="8.789095"/>
          <waypoint LAT="42.645772" NAME="LOZARI" LON="9.014937"/>
          <waypoint LAT="42.640243" NAME="AF" ALT="30.0" LON="9.011551"/>
          <waypoint LAT="42.640735" NAME="TD" ALT="0.0" LON="9.014385"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint LAT="43.78" NAME="CLIMB" LON="7.513"/>
        </waypoints>
        <includes>
          <include NAME="ZRT" PROCEDURE="corsica_sectors.xml"/>
        </includes>
        <exceptions>
          <exception COND="Or(! InsideZRT(GetPosX(), GetPosY()), GetPosAlt() > ground_alt + 200)" DEROUTE="Kill"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby Menton"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" VMODE="throttle"/>
          </block>
          <block NAME="Standby Menton" STRIP_ICON="home.png" STRIP_BUTTON="Standby Menton">
            <circle WP="STDBY_MENTON" RADIUS="nav_radius"/>
          </block>
          <block NAME="Mission to Corsica" STRIP_ICON="path.png" STRIP_BUTTON="Mission to Corsica">
            <go WP="TMA_NICE" FROM="MENTON" HMODE="route"/>
            <go WP="TMA_CALVI" FROM="TMA_NICE" HMODE="route"/>
            <go WP="LOZARI" FROM="TMA_CALVI" HMODE="route"/>
            <deroute BLOCK="Standby Lozari"/>
          </block>
          <block NAME="Standby Lozari" STRIP_ICON="home.png" STRIP_BUTTON="Standby Lozari">
            <circle WP="STDBY_LOZARI" RADIUS="nav_radius"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
          <block NAME="Kill">
            <exception COND="And(InsideZRT(GetPosX(), GetPosY()), ground_alt + 200 > GetPosAlt())" DEROUTE="Resume Mission"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="30" VMODE="throttle"/>
          </block>
          <block NAME="Resume Mission">
            <set VAR="kill_throttle" VALUE="0"/>
            <deroute BLOCK="Mission to Corsica"/>
          </block>
          <block NAME="Back to Menton">
            <go WP="TMA_CALVI" FROM="LOZARI" HMODE="route"/>
            <go WP="TMA_NICE" FROM="TMA_CALVI" HMODE="route"/>
            <go WP="MENTON" FROM="TMA_NICE" HMODE="route"/>
            <deroute BLOCK="Standby Menton"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Spoc II Tiny 2.1">
        <modules>
          <load NAME="gsm.xml"/>
          <load NAME="max3100.xml"/>
        </modules>
        <servos>
          <servo NEUTRAL="1000" MAX="2000" NAME="MOTOR" NO="0" MIN="1000"/>
          <servo NEUTRAL="1500" MAX="1100" NAME="AILERON_LEFT" NO="6" MIN="1900"/>
          <servo NEUTRAL="1500" MAX="1100" NAME="AILERON_RIGHT" NO="2" MIN="1900"/>
          <servo NEUTRAL="1420" MAX="1170" NAME="ELEVATOR" NO="7" MIN="1980"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILERON_DIFF" VALUE="0.66"/>
        </section>
        <command_laws>
          <set VALUE="@THROTTLE" SERVO="MOTOR"/>
          <set VALUE="@PITCH" SERVO="ELEVATOR"/>
          <let VAR="roll" VALUE="@ROLL"/>
          <set VALUE="($roll > 0 ? 1 : AILERON_DIFF) * $roll" SERVO="AILERON_LEFT"/>
          <set VALUE="($roll > 0 ? AILERON_DIFF : 1) * $roll" SERVO="AILERON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.85"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="ADC_2"/>
          <define NAME="IR2" VALUE="ADC_1"/>
          <define NAME="IR_TOP" VALUE="ADC_0"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
          <define NAME="GYRO_ROLL" VALUE="ADC_5"/>
          <define NAME="GYRO_NB_SAMPLES" VALUE="16"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="512"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1."/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="IR2_SIGN" VALUE="-1"/>
          <define NAME="TOP_SIGN" VALUE="-1"/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="0"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="0"/>
          <define NAME="CORRECTION_UP" VALUE="1."/>
          <define NAME="CORRECTION_DOWN" VALUE="1."/>
          <define NAME="CORRECTION_LEFT" VALUE="1."/>
          <define NAME="CORRECTION_RIGHT" VALUE="1."/>
        </section>
        <section NAME="GYRO" PREFIX="GYRO_">
          <define NAME="ADC_ROLL_NEUTRAL" VALUE="490"/>
          <define NAME="ADC_TEMP_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TEMP_SLOPE" VALUE="0"/>
          <define UNIT="deg/s" NAME="DYNAMIC_RANGE" VALUE="300"/>
          <define NAME="ADXRS300_RESISTOR_BRIDGE" VALUE="(3.3/(3.3+1.8))"/>
          <define UNIT="mV/(deg/s)" NAME="ADXRS300_SENSITIVITY" VALUE="5"/>
          <define UNIT="deg/s/adc_unit" NAME="ROLL_SCALE" VALUE="3.3*1000./1024./(GYRO_ADXRS300_SENSITIVITY*GYRO_ADXRS300_RESISTOR_BRIDGE)"/>
          <define NAME="ROLL_DIRECTION" VALUE="(-1)"/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="10000"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
          <define NAME="MilliAmpereOfAdc(_adc)" VALUE="(_adc-156)*17.4"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="MINIMUM_AIRSPEED" VALUE="12."/>
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="15."/>
          <define UNIT="m/s" NAME="MAXIMUM_AIRSPEED" VALUE="25."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="TRIGGER_DELAY" VALUE="1."/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="80."/>
          <define NAME="MIN_CIRCLE_RADIUS" VALUE="50."/>
          <define NAME="UNLOCKED_HOME_MODE" VALUE="TRUE"/>
          <define NAME="RC_LOST_MODE" VALUE="PPRZ_MODE_AUTO2"/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.04"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.305000007153"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.25"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.80"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-1000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.02"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.1"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.05"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="0.075"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="THROTTLE_SLEW" VALUE="0.5"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-1.20599997044"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.805000007153"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="PITCH_PGAIN" VALUE="-7627.11914062"/>
          <define NAME="PITCH_DGAIN" VALUE="1.5"/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="2500"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-12584.7460938"/>
          <define NAME="ROLL_RATE_GAIN" VALUE="-1779.66101074"/>
          <define NAME="ROLL_KFF" VALUE="-500"/>
          <define NAME="ROLL_IGAIN" VALUE="-500"/>
          <define NAME="PITCH_IGAIN" VALUE="-500"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.6"/>
          <define NAME="CLIMB_PITCH" VALUE="0.20"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.15"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="GYRO_GAINS">
          <define NAME="GYRO_MAX_RATE" VALUE="200."/>
          <define NAME="ROLLRATESUM_NB_SAMPLES" VALUE="64"/>
          <define NAME="ALT_ROLL__PGAIN" VALUE="1.0"/>
          <define NAME="ROLL_RATE_PGAIN" VALUE="1000.0"/>
          <define NAME="ROLL_RATE_IGAIN" VALUE="0.0"/>
          <define NAME="ROLL_RATE_DGAIN" VALUE="0.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="1"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
        <section NAME="SIMU">
          <define NAME="JSBSIM_MODEL" VALUE="&quot;Corsica&quot;"/>
          <define NAME="JSBSIM_IR_ROLL_NEUTRAL" VALUE="RadOfDeg(0.)"/>
          <define NAME="JSBSIM_IR_PITCH_NEUTRAL" VALUE="RadOfDeg(0.)"/>
        </section>
        <makefile>CONFIG = \&quot;tiny_2_1_1.h\&quot;
include $(PAPARAZZI_SRC)/conf/autopilot/tiny.makefile
FLASH_MODE=IAP
ap.CFLAGS +=  -DFBW -DAP -DBOARD_CONFIG=$(CONFIG) -DLED -DTIME_LED=1
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main_ap.c main.c
ap.srcs += commands.c
ap.CFLAGS += -DACTUATORS=\&quot;servos_4017_hw.h\&quot; -DSERVOS_4017
ap.srcs += $(SRC_ARCH)/servos_4017_hw.c actuators.c
ap.CFLAGS += -DRADIO_CONTROL
ap.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c  
#TRANSPARENT
ap.CFLAGS += -DDOWNLINK -DUSE_UART1 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_FBW_DEVICE=Uart1 -DDOWNLINK_AP_DEVICE=Uart1 -DPPRZ_UART=Uart1 -DDATALINK=PPRZ -DUART1_BAUD=B57600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c pprz_transport.c
ap.CFLAGS += -DINTER_MCU
ap.srcs += inter_mcu.c 
ap.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_2 -DUSE_ADC_5
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART0 -DGPS_LINK=Uart0 -DUART0_BAUD=B38400 -DGPS_USE_LATLONG
# -DGPS_LED=2
ap.srcs += gps_ubx.c gps.c latlong.c
ap.CFLAGS += -DINFRARED -DALT_KALMAN
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c
ap.srcs += nav_survey_rectangle.c nav_line.c
ap.CFLAGS += -DGYRO -DADXRS150
ap.srcs += gyro.c
# Current sensor
ap.CFLAGS += -DUSE_ADC_3 -DADC_CHANNEL_CURRENT=ADC_3
######### max3100
ap.CFLAGS += -DMAX3100_FOSC=3686400 -DMAX3100_BAUD_RATE=MAX3100_B9600 -DMAX3100_IRQ_PIN=16
#ap.CFLAGS += -DMAX3100_FOSC=1843200 -DMAX3100_BAUD_RATE=MAX3100_B9600 -DMAX3100_IRQ_PIN=16
######### GSM
ap.CFLAGS += -DGSM_LINK=Uart3100 -DGSM_ONOFF_LED=CAM_SWITCH_LED
# ap.CFLAGS += -DUART1_BAUD=B9600 -DUSE_UART1 -DGSM_LINK=Uart1
ap.CFLAGS += -DGCS_NUMBER_2=\&quot;+33640286530\&quot;
ap.CFLAGS += -DGCS_NUMBER_1=\&quot;+33640286564\&quot;
ap.CFLAGS += -DSAFETY_NUMBER_1=\&quot;+33675740959\&quot;
ap.CFLAGS += -DGSM_CMD_LINE_TERMINATION=\&apos;\\r\&apos; -DGSM_RESPONSE_FORMATING=\&apos;\\n\&apos;
########## Modules
ap.CFLAGS += -DUSE_MODULES
# Config for SITL simulation
#include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.ARCHDIR = $(ARCHI)
sim.ARCH = sitl
sim.CFLAGS += -DSITL -DAP -DFBW -DRADIO_CONTROL -DINTER_MCU -DDOWNLINK -DDOWNLINK_TRANSPORT=IvyTransport -DINFRARED -DNAV -DLED -DWIND_INFO
sim.srcs = latlong.c radio_control.c downlink.c commands.c gps.c inter_mcu.c infrared.c fw_h_ctl.c fw_v_ctl.c nav.c estimator.c sys_time.c main_fbw.c main_ap.c datalink.c $(SRC_ARCH)/ppm_hw.c $(SRC_ARCH)/sim_gps.c $(SRC_ARCH)/sim_ir.c $(SRC_ARCH)/sim_ap.c $(SRC_ARCH)/ivy_transport.c $(SRC_ARCH)/sim_adc_generic.c $(SRC_ARCH)/led_hw.c
sim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN
sim.srcs += nav_line.c nav_survey_rectangle.c
sim.CFLAGS += -DUSE_MODULES
# Config for JSBSim simulation
include $(PAPARAZZI_SRC)/conf/autopilot/sitl_jsbsim.makefile
jsbsim.CFLAGS += -I/home/cocoleon/usr/include/JSBSim
jsbsim.LDFLAGS += -L/home/cocoleon/usr/lib/
jsbsim.CFLAGS += -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DAGR_CLIMB -DLOITER_TRIM -DALT_KALMAN
jsbsim.srcs += nav_line.c nav_survey_rectangle.c
jsbsim.srcs += $(SIMDIR)/sim_ac_fw.c
# a test program to setup actuators 
setup_actuators.ARCHDIR = $(ARCHI)
setup_actuators.ARCH = arm7tdmi
setup_actuators.CFLAGS += -DFBW -DBOARD_CONFIG=\&quot;tiny.h\&quot; -DLED -DTIME_LED=1 -DACTUATORS=\&quot;servos_4015_hw.h\&quot; -DSERVOS_4015 -DUSE_UART1 -DUART1_BAUD=B9600 -DDATALINK=PPRZ -DPPRZ_UART=Uart1
setup_actuators.srcs += sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c pprz_transport.c setup_actuators.c $(SRC_ARCH)/uart_hw.c $(SRC_ARCH)/servos_4015_hw.c main.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_east" MAX="10"/>
            <dl_setting STEP="0.5" MIN="-10" VAR="wind_north" MAX="10"/>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="autopilot" MIN="0" VAR="pprz_mode" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="alt_kalman" MODULE="estimator" MIN="0" VAR="alt_kalman_enabled" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="flight time" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="1" MIN="0" VAR="stage_time" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" SHORTNAME="tele_FBW" MODULE="downlink" MIN="0" VAR="telemetry_mode_Fbw_DefaultChannel" MAX="1"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="ir">
              <dl_setting STEP="0.01" PARAM="IR_ROLL_NEUTRAL_DEFAULT" SHORTNAME="roll_neutral" UNIT="rad" MIN="-0.3" VAR="ir_roll_neutral" MAX="0.3"/>
              <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch_neutral" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LATERAL_CORRECTION" SHORTNAME="360_lat_corr" MODULE="infrared" MIN="0." VAR="ir_lateral_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_LONGITUDINAL_CORRECTION" SHORTNAME="360_log_corr" MIN="0." VAR="ir_longitudinal_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_VERTICAL_CORRECTION" SHORTNAME="360_vert_corr" MIN="0.5" VAR="ir_vertical_correction" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_LEFT" SHORTNAME="corr_left" MIN="0.5" VAR="ir_correction_left" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_RIGHT" SHORTNAME="corr_right" MIN="0.5" VAR="ir_correction_right" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_UP" SHORTNAME="corr_up" MIN="0.5" VAR="ir_correction_up" MAX="1.5"/>
              <dl_setting STEP="0.1" PARAM="IR_CORRECTION_DOWN" SHORTNAME="corr_down" MIN="0.5" VAR="ir_correction_down" MAX="1.5"/>
            </dl_settings>
            <dl_settings NAME="attitude">
              <dl_setting STEP="250" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="0" VAR="h_ctl_roll_pgain" MAX="25000"/>
              <dl_setting STEP="0.05" PARAM="H_CTL_ROLL_MAX_SETPOINT" SHORTNAME="max_roll" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="1"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_PGAIN" SHORTNAME="pitch_pgain" MIN="-55000" VAR="h_ctl_pitch_pgain" MAX="0"/>
              <dl_setting STEP="10" PARAM="H_CTL_PITCH_DGAIN" SHORTNAME="pitch_dgain" MIN="-50000" VAR="h_ctl_pitch_dgain" MAX="0"/>
              <dl_setting STEP="100" PARAM="H_CTL_ELEVATOR_OF_ROLL" SHORTNAME="elevator_of_roll" MIN="0" VAR="h_ctl_elevator_of_roll" MAX="5000"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" SHORTNAME="roll attitude pgain" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_RATE_GAIN" SHORTNAME="roll rate gain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" PARAM="V_CTL_ALTITUDE_PGAIN" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="auto_throttle">
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1">
                <strip_button NAME="Dash" VALUE="1"/>
                <strip_button NAME="Loiter" VALUE="0.1"/>
                <strip_button NAME="Cruise" VALUE="0"/>
              </dl_setting>
              <dl_setting STEP="0.005" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" SHORTNAME="throttle_pgain" MIN="-0.05" VAR="v_ctl_auto_throttle_pgain" MAX="0.00"/>
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" SHORTNAME="throttle_igain" MIN="0.0" VAR="v_ctl_auto_throttle_igain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="throttle_dgain" MIN="0.0" VAR="v_ctl_auto_throttle_dgain" MAX="2"/>
              <dl_setting STEP="100" SHORTNAME="dash trim" MIN="-4000" VAR="v_ctl_auto_throttle_dash_trim" MAX="0"/>
              <dl_setting STEP="100" PARAM="V_CTL_AUTO_THROTTLE_LOITER_TRIM" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_auto_throttle_loiter_trim" MAX="3000"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
              <dl_setting STEP="0.1" SHORTNAME="pitch_of_vz (d)" MIN="-10" VAR="v_ctl_auto_throttle_pitch_of_vz_dgain" MAX="10"/>
            </dl_settings>
            <dl_settings NAME="auto_pitch">
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_PGAIN" SHORTNAME="pgain" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="-0.01"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_PITCH_IGAIN" SHORTNAME="igain" MIN="0" VAR="v_ctl_auto_pitch_igain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" PARAM="H_CTL_COURSE_PGAIN" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" PARAM="NAV_GLIDE_PITCH_TRIM" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="1" MIN="1" VAR="nav_mode" MAX="2"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="1" MIN="-20" VAR="fp_pitch" MAX="20"/>
              <dl_setting STEP="0.1" MIN="0" VAR="fp_throttle" MAX="1"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="5" VAR="nav_ground_speed_setpoint" MAX="50"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.2" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="TB" ac_id="1" airframe="airframes/ENAC/test_board.xml" radio="radios/fc16.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/dummy.xml" settings="settings/basic.xml" gui_color="blue">
      <radio DATA_MAX="2200" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="fc16" DATA_MIN="850" SYNC_MIN="5000">
        <channel CTL="C" NEUTRAL="1530" MAX="1038" FUNCTION="ROLL" MIN="2032" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1519" MAX="1991" FUNCTION="PITCH" MIN="1072" AVERAGE="0"/>
        <channel CTL="D" NEUTRAL="1981" MAX="1065" FUNCTION="THROTTLE" MIN="1981" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1513" MAX="1087" FUNCTION="YAW" MIN="1959" AVERAGE="0"/>
        <channel CTL="E" NEUTRAL="1537" MAX="2080" FUNCTION="GAIN1" MIN="964" AVERAGE="10"/>
        <channel CTL="G" NEUTRAL="1521" MAX="2118" FUNCTION="MODE" MIN="944" AVERAGE="10"/>
        <channel CTL="I" NEUTRAL="1520" MAX="2118" FUNCTION="CALIB" MIN="943" AVERAGE="10"/>
        <channel CTL="F" NEUTRAL="1600" MAX="2200" FUNCTION="GAIN2" MIN="1000" AVERAGE="10"/>
      </radio>
      <flight_plan NAME="Dummy" LON0="1.27289" MAX_DIST_FROM_HOME="1000" GROUND_ALT="185" SECURITY_HEIGHT="25" QFU="270" ALT="250" LAT0="43.46223">
        <waypoints>
          <waypoint name="HOME" x="0.0" y="120.0" alt="250."/>
        </waypoints>
        <blocks/>
      </flight_plan>
      <airframe name="TEST_BOARD">
        <servos min="0" neutral="0" max="0xff">
          <servo name="S0" no="0" min="1000" neutral="1500" max="2000"/>
          <servo name="S1" no="1" min="1000" neutral="1500" max="2000"/>
          <servo name="S2" no="2" min="1000" neutral="1500" max="2000"/>
          <servo name="S3" no="3" min="1000" neutral="1500" max="2000"/>
          <servo name="S4" no="4" min="1000" neutral="1500" max="2000"/>
          <servo name="S5" no="5" min="1000" neutral="1500" max="2000"/>
          <servo name="S6" no="6" min="1000" neutral="1500" max="2000"/>
          <servo name="S7" no="7" min="1000" neutral="1500" max="2000"/>
        </servos>
        <commands>
          <axis name="S0" failsafe_value="0"/>
          <axis name="S1" failsafe_value="0"/>
          <axis name="S2" failsafe_value="0"/>
          <axis name="S3" failsafe_value="0"/>
          <axis name="S4" failsafe_value="0"/>
          <axis name="S5" failsafe_value="0"/>
          <axis name="S6" failsafe_value="0"/>
          <axis name="S7" failsafe_value="0"/>
        </commands>
        <command_laws>
          <set servo="S0" value="@S0"/>
          <set servo="S1" value="@S1"/>
          <set servo="S2" value="@S2"/>
          <set servo="S3" value="@S3"/>
          <set servo="S4" value="@S4"/>
          <set servo="S5" value="@S5"/>
          <set servo="S6" value="@S6"/>
          <set servo="S7" value="@S7"/>
        </command_laws>
        <section name="ADC">
          <define name="ADC_R12" value="15."/>
          <define name="ADC_R13" value="1.8"/>
          <define name="ADC_R14" value="3.3"/>
          <define name="ADC_R15" value="3.3"/>
          <define name="ADC1Coef(x)" value="(x)"/>
          <define name="ADC2Coef(x)" value="(x)"/>
          <define name="ADC3Coef(x)" value="(x)"/>
          <define name="ADC4Coef(x)" value="(x)"/>
          <define name="ADC5Coef(x)" value="(x * (ADC_R15+ADC_R13)/ADC_R15)"/>
          <define name="ADC6Coef(x)" value="(x * (ADC_R14+ADC_R12)/ADC_R14)"/>
          <define name="ADC7Coef(x)" value="(x)"/>
          <define name="ADC8Coef(x)" value="(x)"/>
        </section>
        <makefile>ARCHI=arm7
TEST=test_board
FLASH_MODE = IAP
test_board.ARCHDIR = $(ARCHI)
test_board.ARCH = arm7tdmi
test_board.TARGET = test_board
test_board.TARGETDIR = test_board
test_board.CFLAGS += -I$(TEST)
test_board.CFLAGS += -DCONFIG=\&quot;test_board.h\&quot;
test_board.srcs = $(TEST)/main_test_board.c
test_board.CFLAGS += -DPERIODIC_TASK_PERIOD=&apos;SYS_TICS_OF_SEC((1./60.))&apos;
test_board.srcs += sys_time.c $(SRC_ARCH)/sys_time_hw.c
test_board.CFLAGS += -DLED
test_board.srcs += $(SRC_ARCH)/armVIC.c
test_board.CFLAGS += -DACTUATORS=\&quot;servos_tb_hw.h\&quot; -DSERVOS_TB
test_board.srcs += $(TEST)/servos_tb_hw.c actuators.c
test_board.CFLAGS += -DPWM_CAPTURE
test_board.srcs += $(SRC_ARCH)/pwm_hw.c
#test_board.srcs += $(SRC_ARCH)/dac_hw.c
test_board.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_2 -DUSE_ADC_3 -DUSE_ADC_4 -DUSE_ADC_5 -DUSE_ADC_6 -DUSE_ADC_7
test_board.srcs += $(SRC_ARCH)/adc_hw.c
test_board.CFLAGS += -DUSE_UART1 -DUART1_BAUD=B57600 -DUSE_UART0 -DUART0_BAUD=B57600
test_board.srcs += $(SRC_ARCH)/uart_hw.c
test_board.CFLAGS += -DDOWNLINK -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_DEVICE=Uart0 -DDATALINK=PPRZ -DPPRZ_UART=Uart0
test_board.srcs += downlink.c pprz_transport.c
test_tiny_2_1.ARCHDIR = $(ARCHI)
test_tiny_2_1.ARCH = arm7tdmi
test_tiny_2_1.TARGET = test_tiny_2_1
test_tiny_2_1.TARGETDIR = test_tiny_2_1
test_tiny_2_1.CFLAGS += -I$(TEST)
test_tiny_2_1.CFLAGS += -DCONFIG=\&quot;tiny_2_1.h\&quot;
test_tiny_2_1.srcs = $(TEST)/main_test_tiny.c
test_tiny_2_1.CFLAGS += -DPERIODIC_TASK_PERIOD=&apos;SYS_TICS_OF_SEC((1./60.))&apos;
test_tiny_2_1.srcs += sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c
test_tiny_2_1.CFLAGS += -DLED
test_tiny_2_1.CFLAGS += -DACTUATORS=\&quot;servos_4017_hw.h\&quot; -DSERVOS_4017
test_tiny_2_1.srcs += $(SRC_ARCH)/servos_4017_hw.c actuators.c
test_tiny_2_1.CFLAGS += -DRADIO_CONTROL -DRADIO_CONTROL_TYPE=RC_FUTABA
test_tiny_2_1.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c 
test_tiny_2_1.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1 -DUSE_ADC_2 -DUSE_ADC_3 -DUSE_ADC_4 -DUSE_ADC_5 -DUSE_ADC_6 -DUSE_ADC_7
test_tiny_2_1.srcs += $(SRC_ARCH)/adc_hw.c
test_tiny_2_1.CFLAGS += -DUSE_UART1 -DUART1_BAUD=B57600 -DUSE_UART0 -DUART0_BAUD=B57600 -DTB_LINK=Uart1
test_tiny_2_1.srcs += $(SRC_ARCH)/uart_hw.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="nav_course" MAX="360"/>
            <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-10" VAR="nav_shift" MAX="10"/>
            <dl_setting STEP="1" HANDLER="ResetFlightTimeAndLaunch" SHORTNAME="flight time" MODULE="autopilot" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="estimator" MIN="0" VAR="pprz_mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" MAX="2"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
          </dl_settings>
          <dl_settings NAME="Infrared">
            <dl_setting STEP="1" PARAM="IR_ROLL_NEUTRAL_DEFAULT" ALT_UNIT="deg" SHORTNAME="roll neutral" MODULE="infrared" UNIT="rad" MIN="-15" VAR="ir_roll_neutral" MAX="15" ALT_UNIT_COEF="57.3"/>
            <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch neutral" MODULE="infrared" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="TJ1" ac_id="6" airframe="airframes/obsolete/twinjet1.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/basic.xml" settings="settings/basic.xml settings/light.xml settings/switch.xml" gui_color="#ba6293">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="2" Y="139.1" X="132.3"/>
          <waypoint NAME="MOB" Y="-11.6" X="137.0"/>
          <waypoint NAME="S1" Y="69.6" X="-119.2"/>
          <waypoint NAME="S2" Y="209.5" X="274.4"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions>
          <exception COND="datalink_time > 22" DEROUTE="Standby"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" KEY="F8" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <circle WP="MOB" RADIUS="nav_radius"/>
          </block>
          <block NAME="Line 1-2" STRIP_ICON="line.png" STRIP_BUTTON="Line (wp 1-2)">
            <call FUN="nav_line_init()"/>
            <call FUN="nav_line(WP_1, WP_2, nav_radius)"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Path 1,2,S1,S2,STDBY" STRIP_ICON="path.png" STRIP_BUTTON="Path (1,2,S1,S2,STDBY)">
            <path WPTS="1,2 S1"/>
            <path APPROACHING_TIME="1" THROTTLE="0.4" PITCH="auto" WPTS="S1, S2 STDBY"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Twinjet">
        <servos>
          <servo NEUTRAL="1000" MAX="2000" NAME="THROTTLE" NO="0" MIN="1000"/>
          <servo NEUTRAL="1710" MAX="2100" NAME="AILEVON_RIGHT" NO="1" MIN="1230"/>
          <servo NEUTRAL="1785" MAX="1300" NAME="AILEVON_LEFT" NO="2" MIN="2120"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILEVON_AILERON_RATE" VALUE="0.75"/>
          <define NAME="AILEVON_ELEVATOR_RATE" VALUE="1.00"/>
        </section>
        <command_laws>
          <set VALUE="@THROTTLE" SERVO="THROTTLE"/>
          <let VAR="aileron" VALUE="@ROLL * AILEVON_AILERON_RATE"/>
          <let VAR="elevator" VALUE="@PITCH * AILEVON_ELEVATOR_RATE"/>
          <set VALUE="$aileron + $elevator" SERVO="AILEVON_LEFT"/>
          <set VALUE="-$aileron + $elevator" SERVO="AILEVON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.6"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="adc" PREFIX="ADC_CHANNEL_">
          <define NAME="IR1" VALUE="AdcBank0(1)"/>
          <define NAME="IR2" VALUE="AdcBank0(2)"/>
          <define NAME="IR_TOP" VALUE="AdcBank0(3)"/>
          <define NAME="GYRO_ROLL" VALUE="AdcBank1(2)"/>
          <define NAME="GYRO_TEMP" VALUE="AdcBank1(3)"/>
          <define NAME="IR_NB_SAMPLES" VALUE="16"/>
          <define NAME="GYRO_NB_SAMPLES" VALUE="16"/>
          <define NAME="VSUPPLY" VALUE="AdcBank0(6)"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="512"/>
          <define NAME="HORIZ_SENSOR_ALIGNED" VALUE="1"/>
          <define NAME="IR1_SIGN" VALUE="1"/>
          <define NAME="IR2_SIGN" VALUE="-1"/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="5"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="10"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1.25"/>
          <define NAME="CORRECTION_UP" VALUE="1."/>
          <define NAME="CORRECTION_DOWN" VALUE="1."/>
          <define NAME="CORRECTION_LEFT" VALUE="1."/>
          <define NAME="CORRECTION_RIGHT" VALUE="1."/>
        </section>
        <section NAME="GYRO" PREFIX="GYRO_">
          <define NAME="ADC_ROLL_NEUTRAL" VALUE="316"/>
          <define NAME="ADC_TEMP_NEUTRAL" VALUE="328"/>
          <define NAME="ADC_TEMP_SLOPE" VALUE="-0.36"/>
          <define NAME="ROLL_DIRECTION" VALUE="1."/>
          <define NAME="ROLL_SCALE" VALUE="0.44"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-0.9"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.53"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="PITCH_PGAIN" VALUE="-6000."/>
          <define NAME="PITCH_DGAIN" VALUE="0."/>
          <define NAME="ELEVATOR_OF_ROLL" VALUE="0"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-7500"/>
          <define NAME="ROLL_RATE_GAIN" VALUE="-1500"/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.05"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="3."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.40"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE=".3"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.8"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="2000"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-1500"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.15"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.008"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="0.25"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.14"/>
          <define UNIT="s" NAME="THROTTLE_SLEW_LIMITER" VALUE="2"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="75."/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="1000"/>
          <define NAME="VOLTAGE_ADC_A" VALUE="0.0156"/>
          <define NAME="VOLTAGE_ADC_B" VALUE="-0.029"/>
          <define NAME="VoltageOfAdc(adc)" VALUE="(VOLTAGE_ADC_A * adc + VOLTAGE_ADC_B)"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
          <define UNIT="V" NAME="CRITIC_BAT_LEVEL" VALUE="10"/>
          <define UNIT="V" NAME="LOW_BAT_LEVEL" VALUE="10.5"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="12."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define UNIT="s" NAME="KILL_MODE_DISTANCE" VALUE="(MAX_DIST_FROM_HOME*1.5)"/>
          <define NAME="LIGHT_LED_1" VALUE="3"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="2"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE+0.05"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.17"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.08"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="50"/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="CLIMB_THROTTLE" VALUE="0.65"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="CLIMB_PITCH" VALUE="0.2"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.25"/>
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="DATALINK" PREFIX="DATALINK_">
          <define NAME="DEVICE_TYPE" VALUE="AEROCOMM"/>
          <define NAME="DEVICE_ADDRESS" VALUE="0x005067361851"/>
        </section>
        <makefile>include $(PAPARAZZI_SRC)/conf/autopilot/classix.makefile
# FLASH_MODE=ISP
FLASH_MODE=IAP
fbw.CFLAGS += -DFBW -DBOARD_CONFIG=\&quot;classix.h\&quot; -DLED -DTIME_LED=1
fbw.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_fbw.c main.c
fbw.srcs += commands.c
fbw.CFLAGS += -DACTUATORS=\&quot;servos_4017_hw.h\&quot; -DSERVOS_4017 -DSERVOS_4017_CLOCK_FALLING
fbw.srcs += $(SRC_ARCH)/servos_4017_hw.c actuators.c
fbw.CFLAGS += -DRADIO_CONTROL
fbw.srcs += radio_control.c $(SRC_ARCH)/ppm_hw.c
fbw.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_FBW_DEVICE=Uart0 -DUART0_BAUD=B9600
fbw.srcs += downlink.c pprz_transport.c $(SRC_ARCH)/uart_hw.c
fbw.CFLAGS += -DINTER_MCU -DMCU_SPI_LINK -DUSE_SPI -DSPI_SLAVE
fbw.srcs += inter_mcu.c link_mcu.c spi.c $(SRC_ARCH)/spi_hw.c
fbw.CFLAGS += -DADC -DUSE_AD0
fbw.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DAP -DRADIO_CONTROL_AUTO1 -DBOARD_CONFIG=\&quot;classix.h\&quot; -DLED -DTIME_LED=2
ap.srcs = sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c main_ap.c main.c
#ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=XBeeTransport -DDOWNLINK_AP_DEVICE=Uart0 -DXBEE_UART=Uart0 -DDATALINK=XBEE -DUART0_BAUD=B9600
#ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c traffic_info.c xbee.c
ap.CFLAGS += -DDOWNLINK -DUSE_UART0 -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_AP_DEVICE=Uart0  -DPPRZ_UART=Uart0 -DDATALINK=PPRZ -DUART0_BAUD=B57600
ap.srcs += downlink.c $(SRC_ARCH)/uart_hw.c datalink.c pprz_transport.c
ap.CFLAGS += -DINTER_MCU -DMCU_SPI_LINK -DUSE_SPI -DSPI_MASTER -DUSE_SPI_SLAVE0
ap.srcs += inter_mcu.c link_mcu.c spi.c $(SRC_ARCH)/spi_hw.c
ap.CFLAGS += -DGPS -DUBX -DUSE_UART1 -DGPS_LINK=Uart1 -DUART1_BAUD=B38400
ap.srcs += gps_ubx.c gps.c latlong.c
# ADCs for infrared
ap.CFLAGS += -DADC -DUSE_AD0 -DUSE_AD0_1 -DUSE_AD0_2 -DUSE_AD0_3
# ADCs for gyro
ap.CFLAGS += -DUSE_AD1 -DUSE_AD1_2 -DUSE_AD1_3
ap.srcs += $(SRC_ARCH)/adc_hw.c
ap.CFLAGS += -DINFRARED
ap.srcs += infrared.c estimator.c
ap.CFLAGS += -DGYRO -DADXRS150
ap.srcs += gyro.c
ap.CFLAGS += -DNAV -DAGR_CLIMB -DLOITER_TRIM -DWIND_INFO
ap.srcs += nav.c fw_h_ctl.c fw_v_ctl.c
ap.srcs += nav_line.c
# chemotaxis.c anemotaxis.c discsurvey.c
ap.srcs += nav_survey_rectangle.c snav.c
ap.srcs += light.c
ap.CFLAGS += -DUSE_LIGHT
# ap.CFLAGS += -DUSE_JOYSTICK
test.CFLAGS += -DFBW -DBOARD_CONFIG=\&quot;classix.h\&quot; -DLED -DTIME_LED=1 -DACTUATORS=\&quot;servos_4017_hw.h\&quot; -DSERVOS_4017 -DSERVOS_4017_CLOCK_FALLING  -DUSE_UART0 -DDATALINK -DPPRZ_INPUT -DPPRZ_UART=Uart0 -DUART0_BAUD=B9600
test.srcs += sys_time.c $(SRC_ARCH)/sys_time_hw.c $(SRC_ARCH)/armVIC.c pprz_transport.c setup_actuators.c $(SRC_ARCH)/uart_hw.c $(SRC_ARCH)/servos_4017_hw.c main.c
# Config for SITL simulation
include $(PAPARAZZI_SRC)/conf/autopilot/sitl.makefile
sim.CFLAGS += -DBOARD_CONFIG=\&quot;classix.h\&quot; -DAGR_CLIMB -DLOITER_TRIM
#sim.srcs += traffic_info.c
#sim.srcs += nav_line.c chemotaxis.c anemotaxis.c discsurvey.c bomb.c nav_survey_rectangle.c
sim.srcs += nav_survey_rectangle.c nav_line.c light.c snav.c
sim.CFLAGS += -DUSE_LIGHT
sim.CFLAGS += -DUSE_ADC_GENERIC
sim.srcs += joystick.c
sim.CFLAGS += -DUSE_JOYSTICK</makefile>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="nav_course" MAX="360"/>
            <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-10" VAR="nav_shift" MAX="10"/>
            <dl_setting STEP="1" HANDLER="ResetFlightTimeAndLaunch" SHORTNAME="flight time" MODULE="autopilot" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="estimator" MIN="0" VAR="pprz_mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" MAX="2"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
          </dl_settings>
          <dl_settings NAME="Infrared">
            <dl_setting STEP="1" PARAM="IR_ROLL_NEUTRAL_DEFAULT" ALT_UNIT="deg" SHORTNAME="roll neutral" MODULE="infrared" UNIT="rad" MIN="-15" VAR="ir_roll_neutral" MAX="15" ALT_UNIT_COEF="57.3"/>
            <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch neutral" MODULE="infrared" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings NAME="lights control">
          <dl_settings NAME="lights">
            <dl_setting STEP="1" MODULE="light/light" MIN="0" VAR="strobe_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3|COMPLEX_1|COMPLEX_2" MAX="6">
              <strip_button NAME="LightOn" VALUE="1" ICON="on.png"/>
              <strip_button NAME="LightOff" VALUE="0" ICON="off.png"/>
            </dl_setting>
            <dl_setting STEP="1" MIN="0" VAR="nav_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3" MAX="4"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings NAME="Power switch control">
          <dl_settings NAME="Power switch">
            <dl_setting STEP="1" HANDLER="SetPowerSwitch" MODULE="autopilot" MIN="0" VAR="power_switch" MAX="1">
              <strip_button NAME="Switch on" VALUE="1" ICON="on.png"/>
              <strip_button NAME="Switch off" VALUE="0" ICON="off.png"/>
            </dl_setting>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="TJ2" ac_id="203" airframe="airframes/ENAC/fixed-wing/twinjet2.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/default.xml" flight_plan="flight_plans/basic.xml" settings="settings/basic.xml settings/fw_ctl_n.xml settings/fw_h_ctl_a_settings.xml settings/light.xml" gui_color="white">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="2" Y="139.1" X="132.3"/>
          <waypoint NAME="MOB" Y="-11.6" X="137.0"/>
          <waypoint NAME="S1" Y="69.6" X="-119.2"/>
          <waypoint NAME="S2" Y="209.5" X="274.4"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions>
          <exception COND="datalink_time > 22" DEROUTE="Standby"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" KEY="F8" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <circle WP="MOB" RADIUS="nav_radius"/>
          </block>
          <block NAME="Line 1-2" STRIP_ICON="line.png" STRIP_BUTTON="Line (wp 1-2)">
            <call FUN="nav_line_init()"/>
            <call FUN="nav_line(WP_1, WP_2, nav_radius)"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Path 1,2,S1,S2,STDBY" STRIP_ICON="path.png" STRIP_BUTTON="Path (1,2,S1,S2,STDBY)">
            <path WPTS="1,2 S1"/>
            <path APPROACHING_TIME="1" THROTTLE="0.4" PITCH="auto" WPTS="S1, S2 STDBY"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe NAME="Twinjet 2 Tiny 2.12">
        <modules>
          <load NAME="demo_module.xml">
            <flag NAME="TEST" VALUE="1"/>
            <flag NAME="TEST_FLAG"/>
          </load>
          <load NAME="light.xml"/>
        </modules>
        <firmware NAME="fixedwing">
          <target NAME="ap" BOARD="tiny_2.11">
            <define NAME="PITCH_TRIM"/>
            <define NAME="ALT_KALMAN"/>
            <define NAME="USE_I2C0"/>
          </target>
          <target NAME="sim" BOARD="pc">
            <define NAME="PITCH_TRIM"/>
            <define NAME="ALT_KALMAN"/>
            <define NAME="USE_I2C0"/>
          </target>
          <subsystem NAME="radio_control" TYPE="ppm"/>
          <subsystem NAME="telemetry" TYPE="xbee_api"/>
          <subsystem NAME="control" TYPE="new"/>
          <subsystem NAME="attitude" TYPE="infrared"/>
          <subsystem NAME="gps" TYPE="ublox_lea5h"/>
          <subsystem NAME="navigation"/>
          <subsystem NAME="i2c"/>
        </firmware>
        <firmware NAME="setup">
          <target NAME="tunnel" BOARD="tiny_2.11"/>
          <target NAME="setup_actuators" BOARD="tiny_2.11"/>
        </firmware>
        <servos>
          <servo NEUTRAL="1000" MAX="2000" NAME="MOTOR_LEFT" NO="3" MIN="1000"/>
          <servo NEUTRAL="1000" MAX="2000" NAME="MOTOR_RIGHT" NO="4" MIN="1000"/>
          <servo NEUTRAL="1515" MAX="1100" NAME="AILEVON_LEFT" NO="6" MIN="1900"/>
          <servo NEUTRAL="1500" MAX="1900" NAME="AILEVON_RIGHT" NO="7" MIN="1100"/>
        </servos>
        <commands>
          <axis NAME="THROTTLE" FAILSAFE_VALUE="0"/>
          <axis NAME="ROLL" FAILSAFE_VALUE="0"/>
          <axis NAME="PITCH" FAILSAFE_VALUE="0"/>
          <axis NAME="YAW" FAILSAFE_VALUE="0"/>
        </commands>
        <rc_commands>
          <set COMMAND="THROTTLE" VALUE="@THROTTLE"/>
          <set COMMAND="ROLL" VALUE="@ROLL"/>
          <set COMMAND="PITCH" VALUE="@PITCH"/>
          <set COMMAND="YAW" VALUE="@YAW"/>
        </rc_commands>
        <section NAME="MIXER">
          <define NAME="AILEVON_AILERON_RATE" VALUE="0.75"/>
          <define NAME="AILEVON_ELEVATOR_RATE" VALUE="0.75"/>
          <define NAME="MOTOR_YAW_RATE" VALUE="0.0"/>
        </section>
        <command_laws>
          <let VAR="aileron" VALUE="@ROLL  * AILEVON_AILERON_RATE"/>
          <let VAR="elevator" VALUE="@PITCH * AILEVON_ELEVATOR_RATE"/>
          <let VAR="yaw" VALUE="@YAW   * MOTOR_YAW_RATE"/>
          <set VALUE="@THROTTLE - $yaw" SERVO="MOTOR_LEFT"/>
          <set VALUE="@THROTTLE + $yaw" SERVO="MOTOR_RIGHT"/>
          <set VALUE="$elevator + $aileron" SERVO="AILEVON_LEFT"/>
          <set VALUE="$elevator - $aileron" SERVO="AILEVON_RIGHT"/>
        </command_laws>
        <section NAME="AUTO1" PREFIX="AUTO1_">
          <define NAME="MAX_ROLL" VALUE="0.85"/>
          <define NAME="MAX_PITCH" VALUE="0.6"/>
        </section>
        <section NAME="INFRARED" PREFIX="IR_">
          <define NAME="ADC_IR1_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_IR2_NEUTRAL" VALUE="512"/>
          <define NAME="ADC_TOP_NEUTRAL" VALUE="512"/>
          <define NAME="LATERAL_CORRECTION" VALUE="1."/>
          <define NAME="LONGITUDINAL_CORRECTION" VALUE="1."/>
          <define NAME="VERTICAL_CORRECTION" VALUE="1.25"/>
          <define NAME="HORIZ_SENSOR_TILTED" VALUE="1"/>
          <define NAME="IR1_SIGN" VALUE="-1"/>
          <define NAME="IR2_SIGN" VALUE="1"/>
          <define NAME="TOP_SIGN" VALUE="1"/>
          <define UNIT="deg" NAME="ROLL_NEUTRAL_DEFAULT" VALUE="-1.146"/>
          <define UNIT="deg" NAME="PITCH_NEUTRAL_DEFAULT" VALUE="0.15"/>
          <define NAME="I2C_DEFAULT_CONF" VALUE="1"/>
        </section>
        <section NAME="BAT">
          <define NAME="MILLIAMP_AT_FULL_THROTTLE" VALUE="8600"/>
          <define UNIT="V" NAME="CATASTROPHIC_BAT_LEVEL" VALUE="9.3"/>
        </section>
        <section NAME="MISC">
          <define UNIT="m/s" NAME="MINIMUM_AIRSPEED" VALUE="10."/>
          <define UNIT="m/s" NAME="NOMINAL_AIRSPEED" VALUE="12."/>
          <define UNIT="m/s" NAME="MAXIMUM_AIRSPEED" VALUE="20."/>
          <define UNIT="s" NAME="CARROT" VALUE="5."/>
          <define NAME="KILL_MODE_DISTANCE" VALUE="(1.5*MAX_DIST_FROM_HOME)"/>
          <define UNIT="Hz" NAME="CONTROL_RATE" VALUE="60"/>
          <define NAME="ALT_KALMAN_ENABLED" VALUE="TRUE"/>
          <define NAME="DEFAULT_CIRCLE_RADIUS" VALUE="80."/>
          <define NAME="MIN_CIRCLE_RADIUS" VALUE="50."/>
          <define NAME="LIGHT_LED_1" VALUE="3"/>
          <define NAME="LIGHT_LED_2" VALUE="5"/>
        </section>
        <section NAME="VERTICAL CONTROL" PREFIX="V_CTL_">
          <define UNIT="volt" NAME="POWER_CTL_BAT_NOMINAL" VALUE="11.1"/>
          <define NAME="ALTITUDE_PGAIN" VALUE="-0.0450000017881"/>
          <define NAME="ALTITUDE_MAX_CLIMB" VALUE="2."/>
          <define NAME="AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" VALUE="0.319999992847"/>
          <define NAME="AUTO_THROTTLE_MIN_CRUISE_THROTTLE" VALUE="0.25"/>
          <define NAME="AUTO_THROTTLE_MAX_CRUISE_THROTTLE" VALUE="0.80"/>
          <define NAME="AUTO_THROTTLE_LOITER_TRIM" VALUE="1500"/>
          <define NAME="AUTO_THROTTLE_DASH_TRIM" VALUE="-1000"/>
          <define UNIT="%/(m/s)" NAME="AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" VALUE="0.1"/>
          <define NAME="AUTO_THROTTLE_PGAIN" VALUE="-0.035000000149"/>
          <define NAME="AUTO_THROTTLE_IGAIN" VALUE="-0.01"/>
          <define NAME="AUTO_THROTTLE_DGAIN" VALUE="-0"/>
          <define NAME="AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" VALUE="0.12"/>
          <define NAME="AUTO_PITCH_PGAIN" VALUE="-0.035000000149"/>
          <define NAME="AUTO_PITCH_IGAIN" VALUE="-0.01"/>
          <define NAME="AUTO_PITCH_DGAIN" VALUE="-0"/>
          <define NAME="AUTO_PITCH_MAX_PITCH" VALUE="0.35"/>
          <define NAME="AUTO_PITCH_MIN_PITCH" VALUE="-0.35"/>
          <define NAME="AUTO_PITCH_CLIMB_THROTTLE_INCREMENT" VALUE="0.15"/>
          <define NAME="PITCH_LOITER_TRIM" VALUE="RadOfDeg(5.)"/>
          <define NAME="PITCH_DASH_TRIM" VALUE="RadOfDeg(-5.)"/>
          <define NAME="THROTTLE_SLEW" VALUE="0.3"/>
        </section>
        <section NAME="HORIZONTAL CONTROL" PREFIX="H_CTL_">
          <define NAME="COURSE_PGAIN" VALUE="-0.995000004768"/>
          <define UNIT="radians" NAME="ROLL_MAX_SETPOINT" VALUE="0.6"/>
          <define UNIT="radians" NAME="PITCH_MAX_SETPOINT" VALUE="0.5"/>
          <define UNIT="radians" NAME="PITCH_MIN_SETPOINT" VALUE="-0.5"/>
          <define NAME="ROLL_ATTITUDE_GAIN" VALUE="-3553.89208984"/>
          <define NAME="ROLL_RATE_GAIN" VALUE="0."/>
          <define NAME="ROLL_IGAIN" VALUE="-500"/>
          <define NAME="ROLL_KFFA" VALUE="-500"/>
          <define NAME="ROLL_KFFD" VALUE="-500"/>
          <define NAME="PITCH_PGAIN" VALUE="-14522.4716797"/>
          <define NAME="PITCH_DGAIN" VALUE="-0."/>
          <define NAME="PITCH_IGAIN" VALUE="-500"/>
          <define NAME="PITCH_KFFA" VALUE="0."/>
          <define NAME="PITCH_KFFD" VALUE="0."/>
          <define NAME="PITCH_OF_ROLL" VALUE="RadOfDeg(0.2)"/>
        </section>
        <section NAME="NAV">
          <define NAME="NAV_PITCH" VALUE="0."/>
          <define NAME="NAV_GLIDE_PITCH_TRIM" VALUE="0"/>
          <define NAME="NAV_CROSS_TRACK_ERROR_IGAIN" VALUE="0."/>
          <define UNIT="deg" NAME="NAV_CROSS_TRACK_ERROR_MAX" VALUE="10."/>
        </section>
        <section NAME="AGGRESSIVE" PREFIX="AGR_">
          <define NAME="BLEND_START" VALUE="20"/>
          <define NAME="BLEND_END" VALUE="10"/>
          <define NAME="CLIMB_THROTTLE" VALUE="0.7"/>
          <define NAME="CLIMB_PITCH" VALUE="0.25"/>
          <define NAME="DESCENT_THROTTLE" VALUE="0.1"/>
          <define NAME="DESCENT_PITCH" VALUE="-0.15"/>
          <define NAME="CLIMB_NAV_RATIO" VALUE="0.8"/>
          <define NAME="DESCENT_NAV_RATIO" VALUE="1.0"/>
        </section>
        <section NAME="FAILSAFE" PREFIX="FAILSAFE_">
          <define UNIT="s" NAME="DELAY_WITHOUT_GPS" VALUE="1"/>
          <define UNIT="%" NAME="DEFAULT_THROTTLE" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_ROLL" VALUE="0.3"/>
          <define UNIT="rad" NAME="DEFAULT_PITCH" VALUE="0.5"/>
          <define UNIT="m" NAME="HOME_RADIUS" VALUE="100"/>
        </section>
        <section NAME="SIMU">
          <define NAME="YAW_RESPONSE_FACTOR" VALUE="1."/>
        </section>
      </airframe>
      <telemetry>
        <process NAME="Ap" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="AIRSPEED" PERIOD="1"/>
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="0.25"/>
            <message NAME="NAVIGATION" PERIOD="1."/>
            <message NAME="ATTITUDE" PERIOD="0.5"/>
            <message NAME="ESTIMATOR" PERIOD="0.5"/>
            <message NAME="ENERGY" PERIOD="2.5"/>
            <message NAME="WP_MOVED" PERIOD="0.5"/>
            <message NAME="CIRCLE" PERIOD="1.05"/>
            <message NAME="DESIRED" PERIOD="1.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="BARO_MS5534A" PERIOD="1.0"/>
            <message NAME="SCP_STATUS" PERIOD="1.0"/>
            <message NAME="SEGMENT" PERIOD="1.2"/>
            <message NAME="CALIBRATION" PERIOD="2.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="1.2"/>
            <message NAME="GYRO_RATES" PERIOD="1.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="2.0"/>
            <message NAME="PBN" PERIOD="0.1" MODULE="pbn"/>
          </mode>
          <mode NAME="minimal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="ATTITUDE" PERIOD="4"/>
            <message NAME="GPS" PERIOD="1.05"/>
            <message NAME="ESTIMATOR" PERIOD="1.3"/>
            <message NAME="WP_MOVED" PERIOD="1.4"/>
            <message NAME="CIRCLE" PERIOD="3.05"/>
            <message NAME="DESIRED" PERIOD="4.05"/>
            <message NAME="BAT" PERIOD="1.1"/>
            <message NAME="SEGMENT" PERIOD="3.2"/>
            <message NAME="CALIBRATION" PERIOD="5.1"/>
            <message NAME="NAVIGATION_REF" PERIOD="9."/>
            <message NAME="NAVIGATION" PERIOD="3."/>
            <message NAME="PPRZ_MODE" PERIOD="5."/>
            <message NAME="DOWNLINK" PERIOD="5.1"/>
            <message NAME="DL_VALUE" PERIOD="1.5"/>
            <message NAME="IR_SENSORS" PERIOD="5.2"/>
            <message NAME="GYRO_RATES" PERIOD="10.1"/>
            <message NAME="SURVEY" PERIOD="2.1"/>
            <message NAME="GPS_SOL" PERIOD="5.0"/>
          </mode>
          <mode NAME="extremal">
            <message NAME="ALIVE" PERIOD="5"/>
            <message NAME="GPS" PERIOD="5.1"/>
            <message NAME="ESTIMATOR" PERIOD="5.3"/>
            <message NAME="BAT" PERIOD="10.1"/>
            <message NAME="DESIRED" PERIOD="10.2"/>
            <message NAME="NAVIGATION" PERIOD="5.4"/>
            <message NAME="PPRZ_MODE" PERIOD="5.5"/>
            <message NAME="DOWNLINK" PERIOD="5.7"/>
          </mode>
        </process>
        <process NAME="Fbw" CHANNEL="DefaultChannel">
          <mode NAME="default">
            <message NAME="COMMANDS" PERIOD="5"/>
            <message NAME="FBW_STATUS" PERIOD="2"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
          <mode NAME="debug">
            <message NAME="PPM" PERIOD="0.5"/>
            <message NAME="RC" PERIOD="0.5"/>
            <message NAME="COMMANDS" PERIOD="0.5"/>
            <message NAME="FBW_STATUS" PERIOD="1"/>
            <message NAME="ACTUATORS" PERIOD="5"/>
          </mode>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="flight params">
            <dl_setting STEP="10" SHORTNAME="altitude" MIN="0" VAR="flight_altitude" MAX="1000"/>
            <dl_setting STEP="1" MIN="0" VAR="nav_course" MAX="360"/>
            <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-10" VAR="nav_shift" MAX="10"/>
            <dl_setting STEP="1" HANDLER="ResetFlightTimeAndLaunch" SHORTNAME="flight time" MODULE="autopilot" MIN="0" VAR="estimator_flight_time" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetNavRadius" MODULE="nav" MIN="-200" VAR="nav_radius" MAX="200">
              <strip_button NAME="Circle right" VALUE="1" ICON="circle-right.png"/>
              <strip_button NAME="Circle left" VALUE="-1" ICON="circle-left.png"/>
              <key_press KEY="greater" VALUE="1"/>
              <key_press KEY="less" VALUE="-1"/>
            </dl_setting>
          </dl_settings>
          <dl_settings NAME="mode">
            <dl_setting STEP="1" MODULE="estimator" MIN="0" VAR="pprz_mode" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE" MAX="2"/>
            <dl_setting STEP="1" MIN="0" VAR="launch" MAX="1"/>
            <dl_setting STEP="1" MIN="0" VAR="kill_throttle" MAX="1"/>
            <dl_setting STEP="1" SHORTNAME="tele_AP" MODULE="downlink" MIN="0" VAR="telemetry_mode_Ap_DefaultChannel" MAX="2"/>
            <dl_setting STEP="1" HANDLER="Reset" SHORTNAME="GPS reset" MODULE="gps_ubx" MIN="0" VAR="gps_reset" MAX="2"/>
          </dl_settings>
          <dl_settings NAME="Infrared">
            <dl_setting STEP="1" PARAM="IR_ROLL_NEUTRAL_DEFAULT" ALT_UNIT="deg" SHORTNAME="roll neutral" MODULE="infrared" UNIT="rad" MIN="-15" VAR="ir_roll_neutral" MAX="15" ALT_UNIT_COEF="57.3"/>
            <dl_setting STEP="0.01" PARAM="IR_PITCH_NEUTRAL_DEFAULT" SHORTNAME="pitch neutral" MODULE="infrared" UNIT="rad" MIN="-0.3" VAR="ir_pitch_neutral" MAX="0.5"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="control">
            <dl_settings NAME="attitude">
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_ATTITUDE_GAIN" SHORTNAME="roll_pgain" MODULE="fw_h_ctl" MIN="-15000" VAR="h_ctl_roll_attitude_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_ROLL_RATE_GAIN" SHORTNAME="roll_dgain" MIN="-15000" VAR="h_ctl_roll_rate_gain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_PGAIN" SHORTNAME="pitch_pgain" MIN="-55000" VAR="h_ctl_pitch_pgain" MAX="0"/>
              <dl_setting STEP="250" PARAM="H_CTL_PITCH_DGAIN" SHORTNAME="pitch_dgain" MIN="-55000" VAR="h_ctl_pitch_dgain" MAX="0"/>
              <dl_setting STEP="0.001" PARAM="H_CTL_PITCH_OF_ROLL" SHORTNAME="pitch_of_roll" MODULE="fw_h_ctl_a" MIN="0." VAR="h_ctl_pitch_of_roll" MAX=".3"/>
              <dl_setting STEP="100" SHORTNAME="aileron_of_throttle" MIN="0" VAR="h_ctl_aileron_of_throttle" MAX="5000"/>
              <dl_setting STEP="1" PARAM="H_CTL_ROLL_MAX_SETPOINT" ALT_UNIT="deg" SHORTNAME="max_roll" UNIT="rad" MIN="0" VAR="h_ctl_roll_max_setpoint" MAX="60" ALT_UNIT_COEF="0.0174533"/>
            </dl_settings>
            <dl_settings NAME="alt">
              <dl_setting STEP="0.01" PARAM="V_CTL_ALTITUDE_PGAIN" SHORTNAME="alt_pgain" MIN="-0.2" VAR="v_ctl_altitude_pgain" MAX="0"/>
            </dl_settings>
            <dl_settings NAME="climb">
              <dl_setting STEP="0.05" PARAM="V_CTL_AUTO_THROTTLE_NOMINAL_CRUISE_THROTTLE" HANDLER="SetCruiseThrottle" SHORTNAME="cruise throttle" MODULE="fw_v_ctl" MIN="0.0" VAR="v_ctl_auto_throttle_cruise_throttle" MAX="1"/>
              <dl_setting STEP="0.001" PARAM="V_CTL_AUTO_PITCH_PGAIN" SHORTNAME="pitch_p" MIN="-0.1" VAR="v_ctl_auto_pitch_pgain" MAX="0"/>
              <dl_setting STEP="0.001" PARAM="V_CTL_AUTO_PITCH_IGAIN" SHORTNAME="pitch_i" MIN="-0.1" VAR="v_ctl_auto_pitch_igain" MAX="0"/>
              <dl_setting STEP="0.001" PARAM="V_CTL_AUTO_PITCH_DGAIN" SHORTNAME="pitch_d" MODULE="fw_v_ctl_n" MIN="-0.1" VAR="v_ctl_auto_pitch_dgain" MAX="0"/>
              <dl_setting STEP="0.001" PARAM="V_CTL_AUTO_THROTTLE_PGAIN" SHORTNAME="throttle_p" MIN="-0.1" VAR="v_ctl_auto_throttle_pgain" MAX="0"/>
              <dl_setting STEP="0.001" PARAM="V_CTL_AUTO_THROTTLE_IGAIN" SHORTNAME="throttle_i" MIN="-0.1" VAR="v_ctl_auto_throttle_igain" MAX="0"/>
              <dl_setting STEP="0.001" PARAM="V_CTL_AUTO_THROTTLE_DGAIN" SHORTNAME="throttle_d" MIN="-0.1" VAR="v_ctl_auto_throttle_dgain" MAX="0"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_PITCH_DASH_TRIM" SHORTNAME="dash trim" MIN="-1." VAR="v_ctl_pitch_dash_trim" MAX="0"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_PITCH_LOITER_TRIM" SHORTNAME="loiter trim" MIN="0" VAR="v_ctl_pitch_loiter_trim" MAX="1."/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_CLIMB_THROTTLE_INCREMENT" SHORTNAME="throttle_incr" MIN="0" VAR="v_ctl_auto_throttle_climb_throttle_increment" MAX="1"/>
              <dl_setting STEP="0.01" PARAM="V_CTL_AUTO_THROTTLE_PITCH_OF_VZ_PGAIN" SHORTNAME="pitch_of_vz" MIN="0" VAR="v_ctl_auto_throttle_pitch_of_vz_pgain" MAX="1"/>
            </dl_settings>
            <dl_settings NAME="nav">
              <dl_setting STEP="0.05" PARAM="H_CTL_COURSE_PGAIN" SHORTNAME="course pgain" MIN="-3" VAR="h_ctl_course_pgain" MAX="-0.1"/>
              <dl_setting STEP="0.1" SHORTNAME="course dgain" MIN="0" VAR="h_ctl_course_dgain" MAX="2"/>
              <dl_setting STEP="0.05" SHORTNAME="pre bank cor" MIN="0.1" VAR="h_ctl_course_pre_bank_correction" MAX="2"/>
              <dl_setting STEP="0.05" PARAM="NAV_GLIDE_PITCH_TRIM" SHORTNAME="glide pitch trim" MIN="0.0" VAR="nav_glide_pitch_trim" MAX="1"/>
              <dl_setting STEP="0.01" SHORTNAME="roll slew" MIN="0.02" VAR="h_ctl_roll_slew" MAX="1"/>
              <dl_setting STEP="5" MIN="-500" VAR="nav_radius" MAX="500"/>
              <dl_setting STEP="5" MIN="0" VAR="nav_course" MAX="359"/>
              <dl_setting STEP="1" MIN="1" VAR="nav_mode" MAX="2"/>
              <dl_setting STEP="0.5" MIN="-5" VAR="nav_climb" MAX="5"/>
              <dl_setting STEP="1" MIN="-15" VAR="fp_pitch" MAX="15"/>
              <dl_setting STEP="5" HANDLER="IncreaseShift" SHORTNAME="inc. shift" MODULE="nav" MIN="-50" VAR="nav_shift" MAX="50"/>
              <dl_setting STEP="0.5" SHORTNAME="ground speed" MIN="5" VAR="nav_ground_speed_setpoint" MAX="50"/>
              <dl_setting STEP="0.01" SHORTNAME="ground speed pgain" MIN="-0.2" VAR="nav_ground_speed_pgain" MAX="0."/>
              <dl_setting STEP="5" MIN="50" VAR="nav_survey_shift" MAX="500"/>
              <dl_setting STEP="0.01" MIN="0" VAR="cte_igain" MAX="0.3"/>
              <dl_setting STEP="1" MIN="0" VAR="cte_max" MAX="20"/>
            </dl_settings>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings>
          <dl_settings NAME="fw_h_ctl_a">
            <dl_setting STEP="10" SHORTNAME="roll_Kffa" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_roll_Kffa" MAX="0"/>
            <dl_setting STEP="10" SHORTNAME="roll_Kffd" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_roll_Kffd" MAX="0"/>
            <dl_setting STEP="10" SHORTNAME="pitch_Kffa" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_pitch_Kffa" MAX="0"/>
            <dl_setting STEP="10" SHORTNAME="pitch_Kffd" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_pitch_Kffd" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetRollIGain" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_roll_igain" MAX="0"/>
            <dl_setting STEP="10" HANDLER="SetPitchIGain" MODULE="fw_h_ctl_a" MIN="-5000" VAR="h_ctl_pitch_igain" MAX="0"/>
          </dl_settings>
        </dl_settings>
      </settings>
      <settings>
        <dl_settings NAME="lights control">
          <dl_settings NAME="lights">
            <dl_setting STEP="1" MODULE="light/light" MIN="0" VAR="strobe_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3|COMPLEX_1|COMPLEX_2" MAX="6">
              <strip_button NAME="LightOn" VALUE="1" ICON="on.png"/>
              <strip_button NAME="LightOff" VALUE="0" ICON="off.png"/>
            </dl_setting>
            <dl_setting STEP="1" MIN="0" VAR="nav_light_mode" VALUES="OFF|ON|BLINK_1|BLINK_2|BLINK_3" MAX="4"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
    <aircraft name="WT" ac_id="2" airframe="airframes/wind_tunnel.xml" radio="radios/cockpitSX.xml" telemetry="telemetry/telemetry_wt.xml" flight_plan="flight_plans/basic.xml" settings="settings/settings_wt.xml" gui_color="blue">
      <radio DATA_MAX="2100" SYNC_MAX="15000" PULSE_TYPE="POSITIVE" NAME="cockpitSX (easy)" DATA_MIN="900" SYNC_MIN="5000">
        <channel CTL="D" NEUTRAL="1500" MAX="2050" FUNCTION="ROLL" MIN="950" AVERAGE="0"/>
        <channel CTL="C" NEUTRAL="1500" MAX="950" FUNCTION="PITCH" MIN="2050" AVERAGE="0"/>
        <channel CTL="B" NEUTRAL="1500" MAX="950" FUNCTION="YAW" MIN="2050" AVERAGE="0"/>
        <channel CTL="A" NEUTRAL="1223" MAX="2050" FUNCTION="THROTTLE" MIN="1223" AVERAGE="0"/>
        <channel CTL="G" NEUTRAL="1500" MAX="950" FUNCTION="UNUSED" MIN="2050" AVERAGE="1"/>
        <channel CTL="E" NEUTRAL="1496" MAX="948" FUNCTION="GAIN1" MIN="2050" AVERAGE="1"/>
        <channel CTL="PHAUX2" NEUTRAL="1500" MAX="948" FUNCTION="MODE" MIN="2050" AVERAGE="1"/>
      </radio>
      <flight_plan NAME="Basic" LON0="1.27289" MAX_DIST_FROM_HOME="1500" GROUND_ALT="0" SECURITY_HEIGHT="25" ALT="75" LAT0="43.46223">
        <header>#include &quot;nav_line.h&quot;
#include &quot;datalink.h&quot;</header>
        <waypoints>
          <waypoint NAME="HOME" Y="0" X="0"/>
          <waypoint NAME="STDBY" Y="100.1" X="49.5"/>
          <waypoint NAME="1" Y="189.9" X="10.1"/>
          <waypoint NAME="2" Y="139.1" X="132.3"/>
          <waypoint NAME="MOB" Y="-11.6" X="137.0"/>
          <waypoint NAME="S1" Y="69.6" X="-119.2"/>
          <waypoint NAME="S2" Y="209.5" X="274.4"/>
          <waypoint NAME="AF" Y="45.1" X="177.4" ALT="30.0"/>
          <waypoint NAME="TD" Y="57.0" X="28.8" ALT="0.0"/>
          <waypoint NAME="_BASELEG" Y="-13.8" X="168.8"/>
          <waypoint NAME="CLIMB" Y="162.3" X="-114.5"/>
        </waypoints>
        <exceptions>
          <exception COND="datalink_time > 22" DEROUTE="Standby"/>
        </exceptions>
        <blocks>
          <block NAME="Wait GPS">
            <set VAR="kill_throttle" VALUE="1"/>
            <while COND="!GpsFixValid()"/>
          </block>
          <block NAME="Geo init">
            <while COND="LessThan(NavBlockTime(), 1)"/>
            <call FUN="NavSetGroundReferenceHere()"/>
          </block>
          <block NAME="Holding point">
            <set VAR="nav_mode" VALUE="NAV_MODE_ROLL"/>
            <set VAR="kill_throttle" VALUE="1"/>
            <attitude THROTTLE="0" ROLL="0" VMODE="throttle"/>
          </block>
          <block NAME="Takeoff" KEY="t" STRIP_ICON="takeoff.png" STRIP_BUTTON="Takeoff (wp CLIMB)">
            <exception COND="estimator_z > ground_alt+25" DEROUTE="Standby"/>
            <set VAR="kill_throttle" VALUE="0"/>
            <set VAR="estimator_flight_time" VALUE="0"/>
            <go THROTTLE="1.0" WP="CLIMB" PITCH="15" FROM="HOME" VMODE="throttle"/>
          </block>
          <block NAME="Standby" KEY="<Control>a" STRIP_ICON="home.png" STRIP_BUTTON="Standby">
            <circle WP="STDBY" RADIUS="nav_radius"/>
          </block>
          <block NAME="Figure 8 around wp 1" KEY="F8" STRIP_ICON="eight.png" STRIP_BUTTON="Figure 8 (wp 1-2)">
            <eight CENTER="1" TURN_AROUND="2" RADIUS="nav_radius"/>
          </block>
          <block NAME="Oval 1-2" STRIP_ICON="oval.png" STRIP_BUTTON="Oval (wp 1-2)">
            <oval RADIUS="nav_radius" P2="2" P1="1"/>
          </block>
          <block NAME="MOB" STRIP_ICON="mob.png" STRIP_BUTTON="Turn around here">
            <call FUN="NavSetWaypointHere(WP_MOB)"/>
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <circle WP="MOB" RADIUS="nav_radius"/>
          </block>
          <block NAME="Line 1-2" STRIP_ICON="line.png" STRIP_BUTTON="Line (wp 1-2)">
            <call FUN="nav_line_init()"/>
            <call FUN="nav_line(WP_1, WP_2, nav_radius)"/>
          </block>
          <block NAME="Survey S1-S2" STRIP_ICON="survey.png" STRIP_BUTTON="Survey (wp S1-S2)">
            <survey_rectangle WP2="S2" GRID="150" WP1="S1"/>
          </block>
          <block NAME="Path 1,2,S1,S2,STDBY" STRIP_ICON="path.png" STRIP_BUTTON="Path (1,2,S1,S2,STDBY)">
            <path WPTS="1,2 S1"/>
            <path APPROACHING_TIME="1" THROTTLE="0.4" PITCH="auto" WPTS="S1, S2 STDBY"/>
            <deroute BLOCK="Standby"/>
          </block>
          <block NAME="Land Right AF-TD" STRIP_ICON="land-right.png" STRIP_BUTTON="Land right (wp AF-TD)">
            <set VAR="nav_radius" VALUE="DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="Land Left AF-TD" STRIP_ICON="land-left.png" STRIP_BUTTON="Land left (wp AF-TD)">
            <set VAR="nav_radius" VALUE="-DEFAULT_CIRCLE_RADIUS"/>
            <deroute BLOCK="land"/>
          </block>
          <block NAME="land">
            <call FUN="nav_compute_baseleg(WP_AF, WP_TD, WP__BASELEG, nav_radius)"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="NavCircleCount() > 0.5"/>
            <circle WP="_BASELEG" RADIUS="nav_radius" UNTIL="And(NavQdrCloseTo(DegOfRad(baseleg_out_qdr)-10), 10 > fabs(estimator_z - WaypointAlt(WP__BASELEG)))"/>
          </block>
          <block NAME="final">
            <exception COND="ground_alt + 10 > estimator_z" DEROUTE="flare"/>
            <go WP="TD" FROM="AF" HMODE="route" VMODE="glide"/>
          </block>
          <block NAME="flare">
            <go APPROACHING_TIME="0" THROTTLE="0.0" WP="TD" FROM="AF" HMODE="route" VMODE="throttle"/>
            <attitude THROTTLE="0.0" ROLL="0.0" VMODE="throttle" UNTIL="FALSE"/>
          </block>
        </blocks>
      </flight_plan>
      <airframe name="DEMO">
        <makefile>ARCHI=arm7
FLASH_MODE = IAP
WIND_TUNNEL=wind_tunnel
ap.ARCHDIR = $(ARCHI)
ap.ARCH = arm7tdmi
#ap.CFLAGS += -DBOARD_CONFIG=\&quot;conf_wt.h\&quot; -I$(WIND_TUNNEL)
ap.CFLAGS += -DBOARD_CONFIG=\&quot;conf_demo.h\&quot; -I$(WIND_TUNNEL)
ap.srcs = $(WIND_TUNNEL)/main.c
ap.CFLAGS += -DPERIODIC_TASK_PERIOD=&apos;SYS_TICS_OF_SEC(1e-1)&apos;
ap.srcs += sys_time.c $(SRC_ARCH)/sys_time_hw.c
ap.CFLAGS += -DLED
ap.srcs += $(SRC_ARCH)/armVIC.c
ap.CFLAGS += -DUSE_UART0 -DUART0_BAUD=B38400
ap.srcs += $(SRC_ARCH)/uart_hw.c
ap.CFLAGS += -DDOWNLINK -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_DEVICE=Uart0 
ap.srcs += downlink.c pprz_transport.c
ap.CFLAGS += -DDATALINK=PPRZ -DPPRZ_UART=Uart0
#ap.srcs += $(BOOZ)/booz_datalink.c
ap.srcs += $(WIND_TUNNEL)/wt_servo.c
# Wind tunnel baro (SPI)
ap.CFLAGS += -DUSE_SPI -DSPI_MASTER -DUSE_SPI_SLAVE0
ap.srcs += spi.c $(SRC_ARCH)/spi_hw.c $(WIND_TUNNEL)/wt_baro.c
#
#
#
MB=motor_bench
mb.ARCHDIR = $(ARCHI)
mb.ARCH = arm7tdmi
mb.CFLAGS += -DBOARD_CONFIG=\&quot;conf_demo.h\&quot; -I$(WIND_TUNNEL) -I$(MB)
mb.srcs = $(WIND_TUNNEL)/main_mb.c
mb.CFLAGS += -DPERIODIC_TASK_PERIOD=&apos;SYS_TICS_OF_SEC(1e-2)&apos;
mb.srcs += sys_time.c $(SRC_ARCH)/sys_time_hw.c
mb.CFLAGS += -DLED
mb.srcs += $(SRC_ARCH)/armVIC.c
mb.CFLAGS += -DUSE_UART0 -DUART0_BAUD=B57600
mb.srcs += $(SRC_ARCH)/uart_hw.c
mb.CFLAGS += -DDOWNLINK -DDOWNLINK_TRANSPORT=PprzTransport -DDOWNLINK_DEVICE=Uart0 
mb.srcs += downlink.c pprz_transport.c
mb.CFLAGS += -DDATALINK=PPRZ -DPPRZ_UART=Uart0
mb.srcs += $(WIND_TUNNEL)/wt_servo.c
mb.CFLAGS += -DUSE_TWI_CONTROLLER
mb.CFLAGS += -DI2C_SCLL=100 -DI2C_SCLH=100
mb.srcs += i2c.c $(SRC_ARCH)/i2c_hw.c $(MB)/mb_twi_controller_mkk.c
mb.CFLAGS += -DMB_TACHO
mb.srcs += $(MB)/mb_tacho.c
#mb.CFLAGS += -DADC -DUSE_ADC_0 -DUSE_ADC_1
#mb.srcs += $(SRC_ARCH)/adc_hw.c
#mb.srcs += $(MB)/mb_current.c</makefile>
      </airframe>
      <telemetry>
        <process NAME="Main" CHANNEL="DefaultChannel">
          <mode NAME="default"/>
        </process>
      </telemetry>
      <settings>
        <dl_settings>
          <dl_settings NAME="Misc">
            <dl_setting STEP="10" HANDLER="SetPower" SHORTNAME="power" MODULE="wt_servo" MIN="0" VAR="wt_servo_motor_power" MAX="1000"/>
          </dl_settings>
        </dl_settings>
      </settings>
    </aircraft>
  </conf>
  <protocol>
    <class NAME="telemetry">
      <message NAME="BOOT" ID="1">
        <field NAME="version" TYPE="uint16"/>
      </message>
      <message NAME="ALIVE" ID="2">
        <field NAME="md5sum" TYPE="uint8[]"/>
      </message>
      <message NAME="PONG" ID="3"/>
      <message NAME="TAKEOFF" ID="4">
        <field NAME="cpu_time" TYPE="uint16" UNIT="s"/>
      </message>
      <message NAME="DebugChao" ID="5">
        <field NAME="int16_1" TYPE="int16" UNIT="deg"/>
        <field NAME="int16_2" TYPE="int16" UNIT="deg"/>
        <field NAME="int16_3" TYPE="int16" UNIT="deg"/>
        <field NAME="int32_1" TYPE="int32" UNIT="deg"/>
        <field NAME="int32_2" TYPE="int32" UNIT="deg"/>
        <field NAME="int32_3" TYPE="int32" UNIT="deg"/>
      </message>
      <message NAME="ATTITUDE" ID="6">
        <field NAME="phi" TYPE="float" ALT_UNIT="deg" UNIT="rad"/>
        <field NAME="psi" TYPE="float" ALT_UNIT="deg" UNIT="rad"/>
        <field NAME="theta" TYPE="float" ALT_UNIT="deg" UNIT="rad"/>
      </message>
      <message NAME="IR_SENSORS" ID="7">
        <field NAME="ir1" TYPE="int16"/>
        <field NAME="ir2" TYPE="int16"/>
        <field NAME="longitudinal" TYPE="int16"/>
        <field NAME="lateral" TYPE="int16"/>
        <field NAME="vertical" TYPE="int16"/>
      </message>
      <message NAME="GPS" ID="8">
        <field NAME="mode" TYPE="uint8" UNIT="byte_mask"/>
        <field NAME="utm_east" TYPE="int32" ALT_UNIT="m" UNIT="cm"/>
        <field NAME="utm_north" TYPE="int32" ALT_UNIT="m" UNIT="cm"/>
        <field NAME="course" TYPE="int16" ALT_UNIT="deg" UNIT="decideg"/>
        <field NAME="alt" TYPE="int32" ALT_UNIT="m" UNIT="cm"/>
        <field NAME="speed" TYPE="uint16" ALT_UNIT="m/s" UNIT="cm/s"/>
        <field NAME="climb" TYPE="int16" ALT_UNIT="m/s" UNIT="cm/s"/>
        <field NAME="week" TYPE="uint16" UNIT="weeks"/>
        <field NAME="itow" TYPE="uint32" UNIT="ms"/>
        <field NAME="utm_zone" TYPE="uint8"/>
        <field NAME="gps_nb_err" TYPE="uint8"/>
      </message>
      <message NAME="NAVIGATION_REF" ID="9">
        <field NAME="utm_east" TYPE="int32" UNIT="m"/>
        <field NAME="utm_north" TYPE="int32" UNIT="m"/>
        <field NAME="utm_zone" TYPE="uint8"/>
      </message>
      <message NAME="NAVIGATION" ID="10">
        <field NAME="cur_block" TYPE="uint8"/>
        <field NAME="cur_stage" TYPE="uint8"/>
        <field NAME="pos_x" TYPE="float" UNIT="m" FORMAT="%.1f"/>
        <field NAME="pos_y" TYPE="float" UNIT="m" FORMAT="%.1f"/>
        <field NAME="dist2_wp" TYPE="float" UNIT="m^2" FORMAT="%.1f"/>
        <field NAME="dist2_home" TYPE="float" UNIT="m^2" FORMAT="%.1f"/>
        <field NAME="circle_count" TYPE="uint8"/>
        <field NAME="oval_count" TYPE="uint8"/>
      </message>
      <message NAME="PPRZ_MODE" ID="11">
        <field NAME="ap_mode" TYPE="uint8" VALUES="MANUAL|AUTO1|AUTO2|HOME|NOGPS|FAILSAFE"/>
        <field NAME="ap_gaz" TYPE="uint8" VALUES="MANUAL|AUTO_THROTTLE|AUTO_CLIMB|AUTO_ALT"/>
        <field NAME="ap_lateral" TYPE="uint8" VALUES="MANUAL|ROLL_RATE|ROLL|COURSE"/>
        <field NAME="ap_horizontal" TYPE="uint8" VALUES="WAYPOINT|ROUTE|CIRCLE"/>
        <field NAME="if_calib_mode" TYPE="uint8" VALUES="NONE|DOWN|UP"/>
        <field NAME="mcu1_status" TYPE="uint8" VALUES="LOST|OK|REALLY_LOST"/>
      </message>
      <message NAME="BAT" ID="12">
        <field NAME="throttle" TYPE="int16" UNIT="pprz"/>
        <field NAME="voltage" TYPE="uint16" ALT_UNIT="V" UNIT="1e-1V" ALT_UNIT_COEF="0.1"/>
        <field NAME="amps" TYPE="int16" ALT_UNIT="A" UNIT="A"/>
        <field NAME="flight_time" TYPE="uint16" UNIT="s"/>
        <field NAME="kill_auto_throttle" TYPE="uint8" UNIT="bool"/>
        <field NAME="block_time" TYPE="uint16" UNIT="s"/>
        <field NAME="stage_time" TYPE="uint16" UNIT="s"/>
        <field NAME="energy" TYPE="int16" UNIT="mAh"/>
      </message>
      <message NAME="DEBUG_MCU_LINK" ID="13">
        <field NAME="i2c_nb_err" TYPE="uint8"/>
        <field NAME="i2c_mcu1_nb_err" TYPE="uint8"/>
        <field NAME="ppm_rate" TYPE="uint8"/>
      </message>
      <message NAME="CALIBRATION" ID="14">
        <field NAME="climb_sum_err" TYPE="float" FORMAT="%.1f"/>
        <field NAME="climb_gaz_submode" TYPE="uint8"/>
      </message>
      <message NAME="SETTINGS" ID="15">
        <field NAME="slider_1_val" TYPE="float"/>
        <field NAME="slider_2_val" TYPE="float"/>
      </message>
      <message NAME="DESIRED" ID="16">
        <field NAME="roll" TYPE="float" ALT_UNIT="deg" UNIT="rad" FORMAT="%.2f" ALT_UNIT_COEF="57.3"/>
        <field NAME="pitch" TYPE="float" ALT_UNIT="deg" UNIT="rad" FORMAT="%.2f" ALT_UNIT_COEF="57.3"/>
        <field NAME="course" TYPE="float" ALT_UNIT="deg" UNIT="rad" FORMAT="%.1f" ALT_UNIT_COEF="57.3"/>
        <field NAME="x" TYPE="float" UNIT="m" FORMAT="%.0f"/>
        <field NAME="y" TYPE="float" UNIT="m" FORMAT="%.0f"/>
        <field NAME="altitude" TYPE="float" UNIT="m" FORMAT="%.0f"/>
        <field NAME="climb" TYPE="float" UNIT="m/s" FORMAT="%.1f"/>
      </message>
      <message NAME="GPS_SOL" ID="17">
        <field NAME="Pacc" TYPE="uint32" UNIT="cm"/>
        <field NAME="Sacc" TYPE="uint32" UNIT="cm/s"/>
        <field NAME="PDOP" TYPE="uint16"/>
        <field NAME="numSV" TYPE="uint8"/>
      </message>
      <message NAME="ADC_GENERIC" ID="18">
        <field NAME="val1" TYPE="uint16"/>
        <field NAME="val2" TYPE="uint16"/>
      </message>
      <message NAME="TEST_FORMAT" ID="19">
        <field NAME="val1" TYPE="double"/>
        <field NAME="val2" TYPE="float"/>
      </message>
      <message NAME="CAM" ID="20">
        <field NAME="phi" TYPE="int8" UNIT="deg"/>
        <field NAME="theta" TYPE="int8" UNIT="deg"/>
        <field NAME="target_x" TYPE="int16" UNIT="m"/>
        <field NAME="target_y" TYPE="int16" UNIT="m"/>
      </message>
      <message NAME="CIRCLE" ID="21">
        <field NAME="center_east" TYPE="float" UNIT="m"/>
        <field NAME="center_north" TYPE="float" UNIT="m"/>
        <field NAME="radius" TYPE="float" UNIT="m"/>
      </message>
      <message NAME="SEGMENT" ID="22">
        <field NAME="segment_east_1" TYPE="float" UNIT="m"/>
        <field NAME="segment_north_1" TYPE="float" UNIT="m"/>
        <field NAME="segment_east_2" TYPE="float" UNIT="m"/>
        <field NAME="segment_north_2" TYPE="float" UNIT="m"/>
      </message>
      <message NAME="DOWNLINK_STATUS" ID="23">
        <field NAME="run_time" TYPE="uint32" UNIT="s"/>
        <field NAME="rx_bytes" TYPE="uint32"/>
        <field NAME="rx_msgs" TYPE="uint32"/>
        <field NAME="rx_err" TYPE="uint32"/>
        <field NAME="rx_bytes_rate" TYPE="float" FORMAT="%.1f"/>
        <field NAME="rx_msgs_rate" TYPE="float" FORMAT="%.1f"/>
        <field NAME="ping_time" TYPE="float" UNIT="ms" FORMAT="%.2f"/>
      </message>
      <message NAME="MODEM_STATUS" ID="24">
        <field NAME="detected" TYPE="uint8"/>
        <field NAME="valim" TYPE="float" FORMAT="%.1f"/>
        <field NAME="cd" TYPE="uint8"/>
        <field NAME="nb_byte" TYPE="uint32"/>
        <field NAME="nb_msg" TYPE="uint32"/>
        <field NAME="nb_err" TYPE="uint32"/>
      </message>
      <message NAME="SVINFO" ID="25">
        <field NAME="chn" TYPE="uint8"/>
        <field NAME="SVID" TYPE="uint8"/>
        <field NAME="Flags" TYPE="uint8"/>
        <field NAME="QI" TYPE="uint8"/>
        <field NAME="CNO" TYPE="uint8" UNIT="dbHz"/>
        <field NAME="Elev" TYPE="int8" UNIT="deg"/>
        <field NAME="Azim" TYPE="int16" UNIT="deg"/>
      </message>
      <message NAME="DEBUG" ID="26">
        <field NAME="msg" TYPE="uint8[]"/>
      </message>
      <message NAME="SURVEY" ID="27">
        <field NAME="east" TYPE="float" UNIT="m"/>
        <field NAME="north" TYPE="float" UNIT="m"/>
        <field NAME="west" TYPE="float" UNIT="m"/>
        <field NAME="south" TYPE="float" UNIT="m"/>
      </message>
      <message NAME="WC_RSSI" ID="28">
        <field NAME="raw_level" TYPE="uint8"/>
      </message>
      <message NAME="RANGEFINDER" ID="29">
        <field NAME="range" TYPE="uint16" UNIT="cm"/>
        <field NAME="z_dot" TYPE="float" UNIT="m/s"/>
        <field NAME="z_dot_sum_err" TYPE="float" UNIT="m/s"/>
        <field NAME="z_dot_setpoint" TYPE="float" UNIT="m/s"/>
        <field NAME="z_sum_err" TYPE="float" UNIT="m/s"/>
        <field NAME="z_setpoint" TYPE="float" UNIT="m"/>
        <field NAME="flying" TYPE="uint8" UNIT="bool"/>
      </message>
      <message NAME="DOWNLINK" ID="30">
        <field NAME="nb_ovrn" TYPE="uint8"/>
        <field NAME="rate" TYPE="uint16" UNIT="bytes/s"/>
        <field NAME="nb_msgs" TYPE="uint16"/>
      </message>
      <message NAME="DL_VALUE" ID="31">
        <field NAME="index" TYPE="uint8"/>
        <field NAME="value" TYPE="float"/>
      </message>
      <message NAME="MARK" ID="32">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="lat" TYPE="float" UNIT="deg"/>
        <field NAME="long" TYPE="float" UNIT="deg"/>
      </message>
      <message NAME="SYS_MON" ID="33">
        <field NAME="periodic_time" TYPE="uint16" ALT_UNIT="msec" UNIT="usec" ALT_UNIT_COEF="0.001"/>
        <field NAME="periodic_cycle" TYPE="uint16" ALT_UNIT="msec" UNIT="usec" ALT_UNIT_COEF="0.001"/>
        <field NAME="periodic_cycle_min" TYPE="uint16" ALT_UNIT="msec" UNIT="usec" ALT_UNIT_COEF="0.001"/>
        <field NAME="periodic_cycle_max" TYPE="uint16" ALT_UNIT="msec" UNIT="usec" ALT_UNIT_COEF="0.001"/>
        <field NAME="event_number" TYPE="uint16"/>
        <field NAME="cpu_load" TYPE="uint8" UNIT="%"/>
      </message>
      <message NAME="MOTOR" ID="34">
        <field NAME="rpm" TYPE="uint16" UNIT="Hz"/>
        <field NAME="current" TYPE="int32" UNIT="mA"/>
      </message>
      <message NAME="WP_MOVED" ID="35">
        <field NAME="wp_id" TYPE="uint8"/>
        <field NAME="utm_east" TYPE="float" UNIT="m"/>
        <field NAME="utm_north" TYPE="float" UNIT="m"/>
        <field NAME="alt" TYPE="float" UNIT="m"/>
        <field NAME="utm_zone" TYPE="uint8"/>
      </message>
      <message NAME="GYRO_RATES" ID="36">
        <field NAME="roll_adc" TYPE="int16"/>
        <field NAME="roll" TYPE="float" UNIT="rad/s"/>
        <field NAME="pitch" TYPE="float" UNIT="rad/s"/>
      </message>
      <message NAME="ENERGY" ID="37">
        <field NAME="bat" TYPE="float" UNIT="V"/>
        <field NAME="amp" TYPE="float" UNIT="A"/>
        <field NAME="energy" TYPE="uint16" UNIT="mAh"/>
        <field NAME="power" TYPE="float" UNIT="W"/>
      </message>
      <message NAME="BARO_BMP85_CALIB" ID="38">
        <field NAME="a1" TYPE="int16"/>
        <field NAME="a2" TYPE="int16"/>
        <field NAME="a3" TYPE="int16"/>
        <field NAME="a4" TYPE="uint16"/>
        <field NAME="a5" TYPE="uint16"/>
        <field NAME="a6" TYPE="uint16"/>
        <field NAME="b1" TYPE="int16"/>
        <field NAME="b2" TYPE="int16"/>
        <field NAME="mb" TYPE="int16"/>
        <field NAME="mc" TYPE="int16"/>
        <field NAME="md" TYPE="int16"/>
      </message>
      <message NAME="BARO_BMP85" ID="39">
        <field NAME="UT" TYPE="int32"/>
        <field NAME="UP" TYPE="int32"/>
        <field NAME="P" TYPE="uint32"/>
        <field NAME="T" TYPE="float"/>
        <field NAME="MSL" TYPE="float"/>
      </message>
      <message NAME="SPEED_LOOP" ID="40">
        <field NAME="ve_set_point" TYPE="float" UNIT="m/s"/>
        <field NAME="ve" TYPE="float" UNIT="m/s"/>
        <field NAME="vn_set_point" TYPE="float" UNIT="m/s"/>
        <field NAME="vn" TYPE="float" UNIT="m/s"/>
        <field NAME="north_sp" TYPE="float" UNIT="rad"/>
        <field NAME="east_sp" TYPE="float" UNIT="rad"/>
      </message>
      <message NAME="ALT_KALMAN" ID="41">
        <field NAME="p00" TYPE="float"/>
        <field NAME="p01" TYPE="float"/>
        <field NAME="p10" TYPE="float"/>
        <field NAME="p11" TYPE="float"/>
      </message>
      <message NAME="ESTIMATOR" ID="42">
        <field NAME="z" TYPE="float" UNIT="m"/>
        <field NAME="z_dot" TYPE="float" UNIT="m/s"/>
      </message>
      <message NAME="TUNE_ROLL" ID="43">
        <field NAME="p" TYPE="float"/>
        <field NAME="phi" TYPE="float"/>
        <field NAME="phi_sp" TYPE="float"/>
      </message>
      <message NAME="BARO_MS5534A" ID="44">
        <field NAME="pressure" TYPE="uint32" UNIT="P"/>
        <field NAME="temp" TYPE="uint16" UNIT="dC"/>
        <field NAME="alt" TYPE="float" UNIT="m"/>
      </message>
      <message NAME="PRESSURE" ID="45">
        <field NAME="airspeed_adc" TYPE="float"/>
        <field NAME="airspeed" TYPE="float" UNIT="m/s"/>
        <field NAME="altitude_adc" TYPE="float"/>
        <field NAME="altitude" TYPE="float" UNIT="m"/>
      </message>
      <message NAME="BARO_WORDS" ID="46">
        <field NAME="w1" TYPE="uint16"/>
        <field NAME="w2" TYPE="uint16"/>
        <field NAME="w3" TYPE="uint16"/>
        <field NAME="w4" TYPE="uint16"/>
      </message>
      <message NAME="WP_MOVED_LLA" ID="47">
        <field NAME="wp_id" TYPE="uint8"/>
        <field NAME="lat" TYPE="int32" UNIT="degres"/>
        <field NAME="lon" TYPE="int32" UNIT="degres"/>
        <field NAME="alt" TYPE="int32" UNIT="cm"/>
      </message>
      <message NAME="CHRONO" ID="48">
        <field NAME="tag" TYPE="uint8"/>
        <field NAME="time" TYPE="uint32" UNIT="us"/>
      </message>
      <message NAME="WP_MOVED_ENU" ID="49">
        <field NAME="wp_id" TYPE="uint8"/>
        <field NAME="east" TYPE="int32" ALT_UNIT="m" UNIT="2^8m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="north" TYPE="int32" ALT_UNIT="m" UNIT="2^8m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="up" TYPE="int32" ALT_UNIT="m" UNIT="2^8m" ALT_UNIT_COEF="0.0039063"/>
      </message>
      <message NAME="WINDTURBINE_STATUS_" ID="50">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="tb_id" TYPE="uint8"/>
        <field NAME="sync_itow" TYPE="uint32" UNIT="ms"/>
        <field NAME="cycle_time" TYPE="uint32" UNIT="ms"/>
      </message>
      <message NAME="RC_3CH_" ID="51">
        <field NAME="throttle_mode" TYPE="uint8" UNIT="byte_mask"/>
        <field NAME="roll" TYPE="int8"/>
        <field NAME="pitch" TYPE="int8"/>
      </message>
      <message NAME="MPPT" ID="52">
        <field NAME="values" TYPE="int16[]" ALT_UNIT_COEF="1e-3"/>
      </message>
      <message NAME="DEBUG_IR_I2C" ID="53">
        <field NAME="ir1" TYPE="int16" UNIT="adc"/>
        <field NAME="ir2" TYPE="int16" UNIT="adc"/>
        <field NAME="top" TYPE="int16" UNIT="adc"/>
      </message>
      <message NAME="AIRSPEED" ID="54">
        <field NAME="adc" TYPE="uint16"/>
        <field NAME="airspeed" TYPE="float" UNIT="m/s"/>
        <field NAME="airspeed_sp" TYPE="float" UNIT="m/s"/>
        <field NAME="airspeed_cnt" TYPE="float" UNIT="m/s"/>
        <field NAME="groundspeed_sp" TYPE="float" UNIT="m/s"/>
      </message>
      <message NAME="XSENS" ID="55">
        <field NAME="counter" TYPE="int16" UNIT=""/>
        <field NAME="p" TYPE="float" UNIT="deg/s"/>
        <field NAME="q" TYPE="float" UNIT="deg/s"/>
        <field NAME="r" TYPE="float" UNIT="deg/s"/>
        <field NAME="phi" TYPE="float" UNIT="deg"/>
        <field NAME="theta" TYPE="float" UNIT="deg"/>
        <field NAME="psi" TYPE="float" UNIT="deg"/>
        <field NAME="ax" TYPE="float" UNIT="m/s2"/>
        <field NAME="ay" TYPE="float" UNIT="m/s2"/>
        <field NAME="az" TYPE="float" UNIT="m/s2"/>
        <field NAME="vx" TYPE="float" UNIT="m/s"/>
        <field NAME="vy" TYPE="float" UNIT="m/s"/>
        <field NAME="vz" TYPE="float" UNIT="m/s"/>
        <field NAME="lat" TYPE="float" UNIT="deg"/>
        <field NAME="lon" TYPE="float" UNIT="deg"/>
        <field NAME="alt" TYPE="float" UNIT="m"/>
        <field NAME="status" TYPE="uint8" UNIT=""/>
        <field NAME="hour" TYPE="uint8" UNIT=""/>
        <field NAME="min" TYPE="uint8" UNIT=""/>
        <field NAME="sec" TYPE="uint8" UNIT=""/>
        <field NAME="nanosec" TYPE="uint32" UNIT=""/>
      </message>
      <message NAME="BARO_ETS" ID="56">
        <field NAME="adc" TYPE="uint16"/>
        <field NAME="offset" TYPE="uint16"/>
        <field NAME="scaled" TYPE="float"/>
      </message>
      <message NAME="AIRSPEED_ETS" ID="57">
        <field NAME="adc" TYPE="uint16"/>
        <field NAME="offset" TYPE="uint16"/>
        <field NAME="scaled" TYPE="float"/>
      </message>
      <message NAME="PBN" ID="58">
        <field NAME="airspeed_adc" TYPE="uint16"/>
        <field NAME="altitude_adc" TYPE="uint16"/>
        <field NAME="airspeed" TYPE="float"/>
        <field NAME="altitude" TYPE="float"/>
        <field NAME="airspeed_offset" TYPE="uint16"/>
        <field NAME="altitude_offset" TYPE="uint16"/>
      </message>
      <message NAME="H_CTL_A" ID="60">
        <field NAME="roll_sum_err" TYPE="float"/>
        <field NAME="ref_roll_angle" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.3"/>
        <field NAME="pitch_sum_err" TYPE="float"/>
        <field NAME="ref_pitch_angle" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.3"/>
      </message>
      <message NAME="TURB_PRESSURE_RAW" ID="61">
        <field NAME="ch_0" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_1" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_2" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_3" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_4" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_5" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_6" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_7" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_8" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_9" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_10" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_11" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_12" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_13" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_14" TYPE="int32" UNIT="adc"/>
        <field NAME="ch_15" TYPE="int32" UNIT="adc"/>
      </message>
      <message NAME="TURB_PRESSURE_VOLTAGE" ID="62">
        <field NAME="ch_1_p" TYPE="float"/>
        <field NAME="ch_1_t" TYPE="float"/>
        <field NAME="ch_2_p" TYPE="float"/>
        <field NAME="ch_2_t" TYPE="float"/>
        <field NAME="ch_3_p" TYPE="float"/>
        <field NAME="ch_3_t" TYPE="float"/>
        <field NAME="ch_4_p" TYPE="float"/>
        <field NAME="ch_4_t" TYPE="float"/>
        <field NAME="ch_5_p" TYPE="float"/>
        <field NAME="ch_5_t" TYPE="float"/>
        <field NAME="ch_6_p" TYPE="float"/>
        <field NAME="ch_6_t" TYPE="float"/>
        <field NAME="ch_7_p" TYPE="float"/>
        <field NAME="ch_7_t" TYPE="float"/>
        <field NAME="gnd1" TYPE="float"/>
        <field NAME="gnd2" TYPE="float"/>
      </message>
      <message NAME="VF_UPDATE" ID="76">
        <field NAME="baro" TYPE="float" UNIT="m"/>
        <field NAME="range_meter" TYPE="float" UNIT="m"/>
      </message>
      <message NAME="VF_PREDICT" ID="77">
        <field NAME="accel" TYPE="float" UNIT="m/s/s"/>
      </message>
      <message NAME="CROSS_TRACK_ERROR" ID="80">
        <field NAME="cross_track_error" TYPE="float" UNIT="m"/>
        <field NAME="cte_int" TYPE="float"/>
      </message>
      <message NAME="ESTIMATOR_COMP_FILTER" ID="81">
        <field NAME="gyro_hp_last_out" TYPE="float"/>
        <field NAME="gyro_int" TYPE="float"/>
        <field NAME="gps_lp_last_out" TYPE="float"/>
        <field NAME="ir_lp_last_out" TYPE="float"/>
      </message>
      <message NAME="FORMATION_SLOT_TM" ID="82">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="mode" TYPE="uint8"/>
        <field NAME="slot_east" TYPE="float" UNIT="m" FORMAT="%.1f"/>
        <field NAME="slot_north" TYPE="float" UNIT="m" FORMAT="%.1f"/>
        <field NAME="slot_alt" TYPE="float" UNIT="m" FORMAT="%.1f"/>
      </message>
      <message NAME="FORMATION_STATUS_TM" ID="83">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="leader_id" TYPE="uint8"/>
        <field NAME="status" TYPE="uint8"/>
      </message>
      <message NAME="WIND_INFO_RET" ID="87">
        <field NAME="east" TYPE="float" UNIT="m/s"/>
        <field NAME="north" TYPE="float" UNIT="m/s"/>
        <field NAME="airspeed" TYPE="float" UNIT="m/s"/>
      </message>
      <message NAME="SCP_STATUS" ID="88">
        <field NAME="press" TYPE="uint32" UNIT="Pa"/>
        <field NAME="temp" TYPE="int16" UNIT="100x_deg_celsius"/>
      </message>
      <message NAME="SHT_STATUS" ID="89">
        <field NAME="ihumid" TYPE="uint16"/>
        <field NAME="itemp" TYPE="uint16"/>
        <field NAME="humid" TYPE="float" UNIT="rel_hum"/>
        <field NAME="temp" TYPE="float" UNIT="deg_celsius"/>
      </message>
      <message NAME="ENOSE_STATUS" ID="90">
        <field NAME="val1" TYPE="uint16"/>
        <field NAME="val2" TYPE="uint16"/>
        <field NAME="val3" TYPE="uint16"/>
        <field NAME="PID" TYPE="uint16"/>
        <field NAME="heat" TYPE="uint8[]"/>
      </message>
      <message NAME="DPICCO_STATUS" ID="91">
        <field NAME="humid" TYPE="uint16"/>
        <field NAME="temp" TYPE="uint16"/>
        <field NAME="fhumid" TYPE="float" UNIT="rel_hum"/>
        <field NAME="ftemp" TYPE="float" UNIT="deg_celsius"/>
      </message>
      <message NAME="ANTENNA_DEBUG" ID="92">
        <field NAME="mag_xraw" TYPE="int32"/>
        <field NAME="mag_yraw" TYPE="int32"/>
        <field NAME="mag_xcal" TYPE="float"/>
        <field NAME="mag_ycal" TYPE="float"/>
        <field NAME="mag_heading" TYPE="float"/>
        <field NAME="mag_magnitude" TYPE="float"/>
        <field NAME="mag_temp" TYPE="float"/>
        <field NAME="mag_distor" TYPE="uint8"/>
        <field NAME="mag_cal_status" TYPE="uint8"/>
      </message>
      <message NAME="ANTENNA_STATUS" ID="93">
        <field NAME="azim_sp" TYPE="float"/>
        <field NAME="elev_sp" TYPE="float"/>
        <field NAME="id_sp" TYPE="uint8"/>
        <field NAME="mode" TYPE="uint8"/>
      </message>
      <message NAME="MOTOR_BENCH_STATUS" ID="94">
        <field NAME="time_ticks" TYPE="uint32"/>
        <field NAME="throttle" TYPE="float" FORMAT="%.3f"/>
        <field NAME="rpm" TYPE="float"/>
        <field NAME="current" TYPE="float"/>
        <field NAME="thrust" TYPE="float"/>
        <field NAME="torque" TYPE="float"/>
        <field NAME="time_s" TYPE="uint16"/>
        <field NAME="mode" TYPE="uint8"/>
      </message>
      <message NAME="MOTOR_BENCH_STATIC" ID="95">
        <field NAME="av_rpm" TYPE="float"/>
        <field NAME="av_thrust" TYPE="float"/>
        <field NAME="av_current" TYPE="float"/>
        <field NAME="throttle" TYPE="uint16"/>
      </message>
      <message NAME="PPM" ID="100">
        <field NAME="ppm_rate" TYPE="uint8"/>
        <field NAME="values" TYPE="uint16[]" UNIT="ticks"/>
      </message>
      <message NAME="RC" ID="101">
        <field NAME="values" TYPE="int16[]" UNIT="pprz" FORMAT="%d"/>
      </message>
      <message NAME="COMMANDS" ID="102">
        <field NAME="values" TYPE="int16[]" UNIT="ticks"/>
      </message>
      <message NAME="FBW_STATUS" ID="103">
        <field NAME="rc_status" TYPE="uint8" VALUES="OK|LOST|REALLY_LOST"/>
        <field NAME="mode" TYPE="uint8" VALUES="MANUAL|AUTO|FAILSAFE"/>
        <field NAME="vsupply" TYPE="uint8" UNIT="decivolt"/>
        <field NAME="current" TYPE="int32" UNIT="mA"/>
      </message>
      <message NAME="ADC" ID="104">
        <field NAME="mcu" TYPE="uint8" VALUES="FBW|AP"/>
        <field NAME="values" TYPE="uint16[]" UNIT="none"/>
      </message>
      <message NAME="ACTUATORS" ID="105">
        <field NAME="values" TYPE="uint16[]" UNIT="none"/>
      </message>
      <message NAME="BETH" ID="106">
        <field NAME="azimuth" TYPE="int16"/>
        <field NAME="elevation" TYPE="int16"/>
        <field NAME="tilt" TYPE="int16"/>
        <field NAME="counter" TYPE="uint32"/>
        <field NAME="can_errs" TYPE="uint16"/>
        <field NAME="spi_errs" TYPE="uint16"/>
        <field NAME="thrust_out" TYPE="int8"/>
        <field NAME="pitch_out" TYPE="int8"/>
      </message>
      <message NAME="BETH_ESTIMATOR" ID="107">
        <field NAME="tilt" TYPE="float" ALT_UNIT="deg" ALT_UNIT_COEF="57.29578"/>
        <field NAME="tilt_dot" TYPE="float" ALT_UNIT="deg/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="elevation" TYPE="float" ALT_UNIT="deg" ALT_UNIT_COEF="57.29578"/>
        <field NAME="elevation_dot" TYPE="float" ALT_UNIT="deg/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="azimuth" TYPE="float" ALT_UNIT="deg" ALT_UNIT_COEF="57.29578"/>
        <field NAME="azimuth_dot" TYPE="float" ALT_UNIT="deg/s" ALT_UNIT_COEF="57.29578"/>
      </message>
      <message NAME="BETH_CONTROLLER" ID="108">
        <field NAME="pitch" TYPE="float"/>
        <field NAME="thrust" TYPE="float"/>
        <field NAME="pitch_ff" TYPE="float"/>
        <field NAME="pitch_fb" TYPE="float"/>
        <field NAME="thrust_ff" TYPE="float"/>
        <field NAME="thrust_fb" TYPE="float"/>
        <field NAME="tilt_sp" TYPE="float" ALT_UNIT="deg" ALT_UNIT_COEF="57.29578"/>
        <field NAME="tilt_ref" TYPE="float" ALT_UNIT="deg" ALT_UNIT_COEF="57.29578"/>
        <field NAME="tilt_dot_ref" TYPE="float" ALT_UNIT="deg/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="elevation_sp " TYPE="float" ALT_UNIT="deg" ALT_UNIT_COEF="57.29578"/>
        <field NAME="elevation_ref " TYPE="float" ALT_UNIT="deg" ALT_UNIT_COEF="57.29578"/>
        <field NAME="elevation_dot_ref" TYPE="float" ALT_UNIT="deg/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="azimuth_sp" TYPE="float" ALT_UNIT="deg" ALT_UNIT_COEF="57.29578"/>
      </message>
      <message NAME="BETH_CONTROLLER_TWIST" ID="109">
        <field NAME="S" TYPE="float"/>
        <field NAME="S_dot" TYPE="float"/>
        <field NAME="U_twt" TYPE="float"/>
        <field NAME="error" TYPE="float"/>
      </message>
      <message NAME="DC_SHOT" ID="110">
        <field NAME="photo_nr" TYPE="int16" UNIT=""/>
        <field NAME="utm_east" TYPE="int32" UNIT="cm"/>
        <field NAME="utm_north" TYPE="int32" UNIT="cm"/>
        <field NAME="z" TYPE="float" UNIT="m"/>
        <field NAME="utm_zone" TYPE="uint8"/>
        <field NAME="phi" TYPE="int16" UNIT="decideg"/>
        <field NAME="theta" TYPE="int16" UNIT="decideg"/>
        <field NAME="course" TYPE="int16" UNIT="decideg"/>
        <field NAME="speed" TYPE="uint16" UNIT="cm/s"/>
        <field NAME="itow" TYPE="uint32" UNIT="ms"/>
      </message>
      <message NAME="TEST_BOARD_RESULTS" ID="111">
        <field NAME="uart" TYPE="uint8"/>
        <field NAME="ppm" TYPE="uint8"/>
        <field NAME="servo" TYPE="uint16[]"/>
      </message>
      <message NAME="BETH_CONTROLLER_SFB" ID="112">
        <field NAME="one" TYPE="float"/>
      </message>
      <message NAME="TCAS_TA" ID="120">
        <field NAME="ac_id" TYPE="uint8"/>
      </message>
      <message NAME="TCAS_RA" ID="121">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="resolve" TYPE="uint8" VALUES="NONE|LEVEL|CLIMB|DESCEND"/>
      </message>
      <message NAME="TCAS_RESOLVED" ID="122">
        <field NAME="ac_id" TYPE="uint8"/>
      </message>
      <message NAME="TCAS_DEBUG" ID="123">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="tau" TYPE="float"/>
      </message>
      <message NAME="POTENTIAL" ID="124">
        <field NAME="east" TYPE="float"/>
        <field NAME="north" TYPE="float"/>
        <field NAME="alt" TYPE="float"/>
        <field NAME="speed" TYPE="float"/>
        <field NAME="climb" TYPE="float"/>
      </message>
      <message NAME="VERTICAL_ENERGY" ID="125">
        <field NAME="Epot_err" TYPE="float"/>
        <field NAME="Ekin_err" TYPE="float"/>
        <field NAME="Etot_err" TYPE="float"/>
        <field NAME="Edis_err" TYPE="float"/>
        <field NAME="throttle" TYPE="float"/>
        <field NAME="nav_pitch" TYPE="float"/>
        <field NAME="speed_sp" TYPE="float"/>
      </message>
      <message NAME="BOOZ2_STAB_ATTITUDE_FLOAT" ID="130">
        <field NAME="est_p" TYPE="float" ALT_UNIT="degres/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="est_q" TYPE="float" ALT_UNIT="degres/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="est_r" TYPE="float" ALT_UNIT="degres/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="est_phi" TYPE="float" ALT_UNIT="degres" ALT_UNIT_COEF="57.29578"/>
        <field NAME="est_theta" TYPE="float" ALT_UNIT="degres" ALT_UNIT_COEF="57.29578"/>
        <field NAME="est_psi" TYPE="float" ALT_UNIT="degres" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ref_phi" TYPE="float" ALT_UNIT="degres" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ref_theta" TYPE="float" ALT_UNIT="degres" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ref_psi" TYPE="float" ALT_UNIT="degres" ALT_UNIT_COEF="57.29578"/>
        <field NAME="sum_err_phi" TYPE="float"/>
        <field NAME="sum_err_theta" TYPE="float"/>
        <field NAME="sum_err_psi" TYPE="float"/>
        <field NAME="delta_a_fb" TYPE="float" ALT_UNIT="motor" ALT_UNIT_COEF="0.0000153"/>
        <field NAME="delta_e_fb" TYPE="float" ALT_UNIT="motor" ALT_UNIT_COEF="0.0000153"/>
        <field NAME="delta_r_fb" TYPE="float" ALT_UNIT="motor" ALT_UNIT_COEF="0.0000153"/>
        <field NAME="delta_a_ff" TYPE="float" ALT_UNIT="motor" ALT_UNIT_COEF="0.0000153"/>
        <field NAME="delta_e_ff" TYPE="float" ALT_UNIT="motor" ALT_UNIT_COEF="0.0000153"/>
        <field NAME="delta_r_ff" TYPE="float" ALT_UNIT="motor" ALT_UNIT_COEF="0.0000153"/>
        <field NAME="delta_a" TYPE="int32"/>
        <field NAME="delta_e" TYPE="int32"/>
        <field NAME="delta_r" TYPE="int32"/>
        <field NAME="est_p_d" TYPE="float" ALT_UNIT="degres/s^2" ALT_UNIT_COEF="57.29578"/>
        <field NAME="est_q_d" TYPE="float" ALT_UNIT="degres/s^2" ALT_UNIT_COEF="57.29578"/>
        <field NAME="est_r_d" TYPE="float" ALT_UNIT="degres/s^2" ALT_UNIT_COEF="57.29578"/>
      </message>
      <message NAME="BOOZ2_GYRO" ID="131">
        <field NAME="gp" TYPE="int32" ALT_UNIT="deg/s" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="gq" TYPE="int32" ALT_UNIT="deg/s" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="gr" TYPE="int32" ALT_UNIT="deg/s" ALT_UNIT_COEF="0.0139882"/>
      </message>
      <message NAME="BOOZ2_ACCEL" ID="132">
        <field NAME="ax" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
        <field NAME="ay" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
        <field NAME="az" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
      </message>
      <message NAME="BOOZ2_MAG" ID="133">
        <field NAME="mx" TYPE="int32" ALT_UNIT="1" ALT_UNIT_COEF="0.0004883"/>
        <field NAME="my" TYPE="int32" ALT_UNIT="1" ALT_UNIT_COEF="0.0004883"/>
        <field NAME="mz" TYPE="int32" ALT_UNIT="1" ALT_UNIT_COEF="0.0004883"/>
      </message>
      <message NAME="BOOZ2_FILTER" ID="134">
        <field NAME="phi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="theta" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="measure_phi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000273"/>
        <field NAME="measure_theta" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000273"/>
        <field NAME="measure_psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000273"/>
        <field NAME="corrected_phi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000273"/>
        <field NAME="corrected_theta" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000273"/>
        <field NAME="corrected_psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000273"/>
        <field NAME="correction_phi" TYPE="int32"/>
        <field NAME="correction_theta" TYPE="int32"/>
        <field NAME="correction_psi" TYPE="int32"/>
        <field NAME="bp" TYPE="int32"/>
        <field NAME="bq" TYPE="int32"/>
        <field NAME="br" TYPE="int32"/>
      </message>
      <message NAME="BOOZ2_FILTER2" ID="135">
        <field NAME="px" TYPE="int32"/>
        <field NAME="py" TYPE="int32"/>
        <field NAME="pz" TYPE="int32"/>
        <field NAME="gsx" TYPE="int32"/>
        <field NAME="gsy" TYPE="int32"/>
        <field NAME="gsz" TYPE="int32"/>
      </message>
      <message NAME="BOOZ2_RATE_LOOP" ID="136">
        <field NAME="sp_p" TYPE="int32"/>
        <field NAME="sp_q" TYPE="int32"/>
        <field NAME="sp_r" TYPE="int32"/>
        <field NAME="ref_p" TYPE="int32"/>
        <field NAME="ref_q" TYPE="int32"/>
        <field NAME="ref_r" TYPE="int32"/>
        <field NAME="refdot_p" TYPE="int32"/>
        <field NAME="refdot_q" TYPE="int32"/>
        <field NAME="refdot_r" TYPE="int32"/>
        <field NAME="sumerr_p" TYPE="int32"/>
        <field NAME="sumerr_q" TYPE="int32"/>
        <field NAME="sumerr_r" TYPE="int32"/>
        <field NAME="ff_p" TYPE="int32"/>
        <field NAME="ff_q" TYPE="int32"/>
        <field NAME="ff_r" TYPE="int32"/>
        <field NAME="fb_p" TYPE="int32"/>
        <field NAME="fb_q" TYPE="int32"/>
        <field NAME="fb_r" TYPE="int32"/>
        <field NAME="delta_t" TYPE="int32"/>
      </message>
      <message NAME="BOOZ2_FILTER_ALIGNER" ID="137">
        <field NAME="lp_gp" TYPE="int32" ALT_UNIT="degres/s" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="lp_gq" TYPE="int32" ALT_UNIT="degres/s" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="lp_gr" TYPE="int32" ALT_UNIT="degres/s" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="gp" TYPE="int32" ALT_UNIT="degres/s" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="gq" TYPE="int32" ALT_UNIT="degres/s" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="gr" TYPE="int32" ALT_UNIT="degres/s" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="noise" TYPE="int32"/>
        <field NAME="cnt" TYPE="int32"/>
      </message>
      <message NAME="BOOZ2_FILTER_Q" ID="138">
        <field NAME="qi" TYPE="int32"/>
        <field NAME="qx" TYPE="int32"/>
        <field NAME="qy" TYPE="int32"/>
        <field NAME="qz" TYPE="int32"/>
      </message>
      <message NAME="BOOZ2_FILTER_COR" ID="139">
        <field NAME="mphi" TYPE="int32"/>
        <field NAME="mtheta" TYPE="int32"/>
        <field NAME="mpsi" TYPE="int32"/>
        <field NAME="qi" TYPE="int32"/>
        <field NAME="qx" TYPE="int32"/>
        <field NAME="qy" TYPE="int32"/>
        <field NAME="qz" TYPE="int32"/>
      </message>
      <message NAME="BOOZ2_STAB_ATTITUDE_INT" ID="140">
        <field NAME="est_p" TYPE="int32" ALT_UNIT="degres/s" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="est_q" TYPE="int32" ALT_UNIT="degres/s" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="est_r" TYPE="int32" ALT_UNIT="degres/s" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="est_phi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="est_theta" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="est_psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="sp_phi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000546"/>
        <field NAME="sp_theta" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000546"/>
        <field NAME="sp_psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000546"/>
        <field NAME="sum_err_phi" TYPE="int32"/>
        <field NAME="sum_err_theta" TYPE="int32"/>
        <field NAME="sum_err_psi" TYPE="int32"/>
        <field NAME="delta_a_fb" TYPE="int32" ALT_UNIT_COEF="0.0000153"/>
        <field NAME="delta_e_fb" TYPE="int32" ALT_UNIT_COEF="0.0000153"/>
        <field NAME="delta_r_fb" TYPE="int32" ALT_UNIT_COEF="0.0000153"/>
        <field NAME="delta_a_ff" TYPE="int32" ALT_UNIT_COEF="0.0000153"/>
        <field NAME="delta_e_ff" TYPE="int32" ALT_UNIT_COEF="0.0000153"/>
        <field NAME="delta_r_ff" TYPE="int32" ALT_UNIT_COEF="0.0000153"/>
        <field NAME="delta_a" TYPE="int32"/>
        <field NAME="delta_e" TYPE="int32"/>
        <field NAME="delta_r" TYPE="int32"/>
      </message>
      <message NAME="BOOZ2_STAB_ATTITUDE_REF_INT" ID="141">
        <field NAME="sp_phi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000546"/>
        <field NAME="sp_theta" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000546"/>
        <field NAME="sp_psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000546"/>
        <field NAME="ref_phi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000546"/>
        <field NAME="ref_theta" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000546"/>
        <field NAME="ref_psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000546"/>
        <field NAME="ref_p" TYPE="int32" ALT_UNIT="degres/s" ALT_UNIT_COEF="0.0008743"/>
        <field NAME="ref_q" TYPE="int32" ALT_UNIT="degres/s" ALT_UNIT_COEF="0.0008743"/>
        <field NAME="ref_r" TYPE="int32" ALT_UNIT="degres/s" ALT_UNIT_COEF="0.0008743"/>
        <field NAME="ref_pd" TYPE="int32" ALT_UNIT="degres/s2" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="ref_qd" TYPE="int32" ALT_UNIT="degres/s2" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="ref_rd" TYPE="int32" ALT_UNIT="degres/s2" ALT_UNIT_COEF="0.0139882"/>
      </message>
      <message NAME="BOOZ2_STAB_ATTITUDE_REF_FLOAT" ID="142">
        <field NAME="sp_phi" TYPE="float" ALT_UNIT="degres" ALT_UNIT_COEF="57.29578"/>
        <field NAME="sp_theta" TYPE="float" ALT_UNIT="degres" ALT_UNIT_COEF="57.29578"/>
        <field NAME="sp_psi" TYPE="float" ALT_UNIT="degres" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ref_phi" TYPE="float" ALT_UNIT="degres" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ref_theta" TYPE="float" ALT_UNIT="degres" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ref_psi" TYPE="float" ALT_UNIT="degres" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ref_p" TYPE="float" ALT_UNIT="degres/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ref_q" TYPE="float" ALT_UNIT="degres/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ref_r" TYPE="float" ALT_UNIT="degres/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ref_pd" TYPE="float" ALT_UNIT="degres/s2" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ref_qd" TYPE="float" ALT_UNIT="degres/s2" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ref_rd" TYPE="float" ALT_UNIT="degres/s2" ALT_UNIT_COEF="57.29578"/>
      </message>
      <message NAME="BOOZ2_CMD" ID="143">
        <field NAME="cmd_roll" TYPE="int32"/>
        <field NAME="cmd_pitch" TYPE="int32"/>
        <field NAME="cmd_yaw" TYPE="int32"/>
        <field NAME="cmd_thrust" TYPE="int32"/>
      </message>
      <message NAME="BOOZ2_GUIDANCE" ID="144">
        <field NAME="pos_n" TYPE="int32"/>
        <field NAME="pos_e" TYPE="int32"/>
        <field NAME="sp_pos_n" TYPE="int32"/>
        <field NAME="sp_pos_e" TYPE="int32"/>
      </message>
      <message NAME="BOOZ2_VERT_LOOP" ID="145">
        <field NAME="z_sp" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="zd_sp" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="est_z" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="est_zd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="est_zdd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
        <field NAME="ref_z" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="ref_zd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="ref_zdd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
        <field NAME="adp_inv_m" TYPE="int32" ALT_UNIT="foo" ALT_UNIT_COEF="0.0000038"/>
        <field NAME="adp_cov" TYPE="int32" ALT_UNIT="foo" ALT_UNIT_COEF="0.0000038"/>
        <field NAME="adp_meas" TYPE="int32" ALT_UNIT="foo" ALT_UNIT_COEF="0.0000038"/>
        <field NAME="sum_err" TYPE="int32"/>
        <field NAME="ff_cmd" TYPE="int32"/>
        <field NAME="fb_cmd" TYPE="int32"/>
        <field NAME="delta_t" TYPE="int32"/>
      </message>
      <message NAME="BOOZ2_HOVER_LOOP" ID="146">
        <field NAME="sp_x" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="sp_y" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="est_x" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="est_y" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="est_xd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="est_yd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="est_xdd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009765"/>
        <field NAME="est_ydd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009765"/>
        <field NAME="err_x" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="err_y" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="err_xd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="err_yd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="err_sum_x" TYPE="int32"/>
        <field NAME="err_sum_y" TYPE="int32"/>
        <field NAME="err_nav_x" TYPE="int32"/>
        <field NAME="err_nav_y" TYPE="int32"/>
        <field NAME="cmd_x" TYPE="int32"/>
        <field NAME="cmd_y" TYPE="int32"/>
        <field NAME="cmd_phi" TYPE="int32"/>
        <field NAME="cmd_theta" TYPE="int32"/>
        <field NAME="cmd_psi" TYPE="int32"/>
      </message>
      <message NAME="BOOZ2_FP" ID="147">
        <field NAME="east" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="north" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="up" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="veast" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="vnorth" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="vup" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="phi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="theta" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="carrot_east" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="carrot_north" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="carrot_up" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="carrot_psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0000546"/>
        <field NAME="thrust" TYPE="int32"/>
        <field NAME="flight_time" TYPE="uint16" UNIT="s"/>
      </message>
      <message NAME="BOOZ2_FMS_INFO" ID="148">
        <field NAME="tbd" TYPE="float"/>
      </message>
      <message NAME="BOOZ2_GUIDANCE_H_REF_INT" ID="149">
        <field NAME="sp_x" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="ref_x" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="ref_xd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="ref_xdd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
        <field NAME="sp_y" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="ref_y" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="ref_yd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="ref_ydd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
      </message>
      <message NAME="BOOZ2_TUNE_HOVER" ID="150">
        <field NAME="rc_roll" TYPE="int16" ALT_UNIT="-100/100" ALT_UNIT_COEF="0.01041670"/>
        <field NAME="rc_pitch" TYPE="int16" ALT_UNIT="-100/100" ALT_UNIT_COEF="0.01041670"/>
        <field NAME="rc_yaw" TYPE="int16" ALT_UNIT="-100/100" ALT_UNIT_COEF="0.01041670"/>
        <field NAME="cmd_roll" TYPE="int32"/>
        <field NAME="cmd_pitch" TYPE="int32"/>
        <field NAME="cmd_yaw" TYPE="int32"/>
        <field NAME="cmd_thrust" TYPE="int32"/>
        <field NAME="imu_phi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="imu_theta" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="imu_psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="body_phi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="body_theta" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="body_psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
      </message>
      <message NAME="BOOZ2_INS" ID="151">
        <field NAME="baro_alt" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="ins_z" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="ins_zd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="ins_zdd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
      </message>
      <message NAME="BOOZ2_INS2" ID="152">
        <field NAME="xdd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
        <field NAME="ydd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
        <field NAME="zdd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
        <field NAME="xd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019073"/>
        <field NAME="yd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019073"/>
        <field NAME="zd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019073"/>
        <field NAME="x" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039"/>
        <field NAME="y" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039"/>
        <field NAME="z" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039"/>
      </message>
      <message NAME="BOOZ2_INS3" ID="153">
        <field NAME="gps_x_ned" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.00390625"/>
        <field NAME="gps_y_ned" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.00390625"/>
        <field NAME="gps_z_ned" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.00390625"/>
        <field NAME="gps_xd_ned" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019073"/>
        <field NAME="gps_yd_ned" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019073"/>
        <field NAME="gps_zd_ned" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019073"/>
      </message>
      <message NAME="BOOZ2_INS_REF" ID="154">
        <field NAME="ecef_x0" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.01"/>
        <field NAME="ecef_y0" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.01"/>
        <field NAME="ecef_z0" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.01"/>
        <field NAME="lat0" TYPE="int32" ALT_UNIT="deg" ALT_UNIT_COEF="0.0000001"/>
        <field NAME="lon0" TYPE="int32" ALT_UNIT="deg" ALT_UNIT_COEF="0.0000001"/>
        <field NAME="alt0" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.01"/>
        <field NAME="hmsl0" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.01"/>
        <field NAME="baro_qfe" TYPE="int32"/>
      </message>
      <message NAME="BOOZ2_GPS" ID="155">
        <field NAME="ecef_x" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.01"/>
        <field NAME="ecef_y" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.01"/>
        <field NAME="ecef_z" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.01"/>
        <field NAME="lat" TYPE="int32" ALT_UNIT="deg" ALT_UNIT_COEF="0.0000001"/>
        <field NAME="lon" TYPE="int32" ALT_UNIT="deg" ALT_UNIT_COEF="0.0000001"/>
        <field NAME="alt" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.01"/>
        <field NAME="ecef_xd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.01"/>
        <field NAME="ecef_yd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.01"/>
        <field NAME="ecef_zd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.01"/>
        <field NAME="pacc" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.01"/>
        <field NAME="sacc" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.01"/>
        <field NAME="tow" TYPE="uint32"/>
        <field NAME="pdop" TYPE="uint16"/>
        <field NAME="numsv" TYPE="uint8"/>
        <field NAME="fix" TYPE="uint8" VALUES="NONE|UKN1|UKN2|3D"/>
      </message>
      <message NAME="BOOZ2_AHRS_EULER" ID="156">
        <field NAME="imu_phi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="imu_theta" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="imu_psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="body_phi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="body_theta" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
        <field NAME="body_psi" TYPE="int32" ALT_UNIT="degres" ALT_UNIT_COEF="0.0139882"/>
      </message>
      <message NAME="BOOZ2_AHRS_QUAT" ID="157">
        <field NAME="imu_qi" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000305"/>
        <field NAME="imu_qx" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000305"/>
        <field NAME="imu_qy" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000305"/>
        <field NAME="imu_qz" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000305"/>
        <field NAME="body_qi" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000305"/>
        <field NAME="body_qx" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000305"/>
        <field NAME="body_qy" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000305"/>
        <field NAME="body_qz" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000305"/>
      </message>
      <message NAME="BOOZ2_AHRS_RMAT" ID="158">
        <field NAME="imu_m00" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="imu_m01" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="imu_m02" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="imu_m10" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="imu_m11" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="imu_m12" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="imu_m20" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="imu_m21" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="imu_m22" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="body_m00" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="body_m01" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="body_m02" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="body_m10" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="body_m11" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="body_m12" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="body_m20" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="body_m21" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
        <field NAME="body_m22" TYPE="int32" ALT_UNIT="" ALT_UNIT_COEF="0.0000610"/>
      </message>
      <message NAME="BOOZ2_NAV_STATUS" ID="159">
        <field NAME="block_time" TYPE="uint16" UNIT="s"/>
        <field NAME="stage_time" TYPE="uint16" UNIT="s"/>
        <field NAME="cur_block" TYPE="uint8"/>
        <field NAME="cur_stage" TYPE="uint8"/>
        <field NAME="horizontal_mode" TYPE="uint8"/>
      </message>
      <message NAME="BOOZ2_RADIO_CONTROL" ID="160">
        <field NAME="roll" TYPE="int16" UNIT="pprz"/>
        <field NAME="pitch" TYPE="int16" UNIT="pprz"/>
        <field NAME="yaw" TYPE="int16" UNIT="pprz"/>
        <field NAME="throttle" TYPE="int16" UNIT="pprz"/>
        <field NAME="mode" TYPE="int16" UNIT="pprz"/>
        <field NAME="kill" TYPE="int16" UNIT="pprz"/>
        <field NAME="status" TYPE="uint8" VALUES="OK|LOST|REALLY_LOST"/>
      </message>
      <message NAME="BOOZ_BARO_RAW" ID="161">
        <field NAME="offset" TYPE="uint16"/>
        <field NAME="value" TYPE="uint16"/>
        <field NAME="value_filtered" TYPE="uint16"/>
      </message>
      <message NAME="BOOZ2_VFF" ID="162">
        <field NAME="measure" TYPE="float"/>
        <field NAME="z" TYPE="float"/>
        <field NAME="zd" TYPE="float"/>
        <field NAME="bias" TYPE="float"/>
        <field NAME="Pzz" TYPE="float"/>
        <field NAME="Pzdzd" TYPE="float"/>
        <field NAME="Pbb" TYPE="float"/>
      </message>
      <message NAME="BOOZ2_TUNE_FF" ID="163">
        <field NAME="fb_rms" TYPE="float"/>
        <field NAME="dg" TYPE="float"/>
        <field NAME="g" TYPE="float"/>
      </message>
      <message NAME="BOOZ2_HFF" ID="164">
        <field NAME="x" TYPE="float"/>
        <field NAME="y" TYPE="float"/>
        <field NAME="xd" TYPE="float"/>
        <field NAME="yd" TYPE="float"/>
        <field NAME="xdd" TYPE="float"/>
        <field NAME="ydd" TYPE="float"/>
      </message>
      <message NAME="BOOZ2_HFF_DBG" ID="165">
        <field NAME="x_measure" TYPE="float"/>
        <field NAME="y_measure" TYPE="float"/>
        <field NAME="yd_measure" TYPE="float"/>
        <field NAME="xd_measure" TYPE="float"/>
        <field NAME="Pxx" TYPE="float"/>
        <field NAME="Pyy" TYPE="float"/>
        <field NAME="Pxdxd" TYPE="float"/>
        <field NAME="Pydyd" TYPE="float"/>
      </message>
      <message NAME="BOOZ2_HFF_GPS" ID="166">
        <field NAME="lag_cnt" TYPE="uint16"/>
        <field NAME="lag_cnt_err" TYPE="int16"/>
        <field NAME="save_cnt" TYPE="int16"/>
      </message>
      <message NAME="BOOZ2_SONAR" ID="167">
        <field NAME="front" TYPE="uint16" UNIT="adc"/>
        <field NAME="back" TYPE="uint16" UNIT="adc"/>
        <field NAME="right" TYPE="uint16" UNIT="adc"/>
        <field NAME="left" TYPE="uint16" UNIT="adc"/>
      </message>
      <message NAME="BOOZ2_CAM" ID="168">
        <field NAME="tilt" TYPE="int16" UNIT="us"/>
        <field NAME="pan" TYPE="int16" ALT_UNIT="degres" UNIT="2^12rad" ALT_UNIT_COEF="0.0139882"/>
      </message>
      <message NAME="BOOZ2_AHRS_REF_QUAT" ID="169">
        <field NAME="ref_qi" TYPE="float"/>
        <field NAME="ref_qx" TYPE="float"/>
        <field NAME="ref_qy" TYPE="float"/>
        <field NAME="ref_qz" TYPE="float"/>
        <field NAME="body_qi" TYPE="float"/>
        <field NAME="body_qx" TYPE="float"/>
        <field NAME="body_qy" TYPE="float"/>
        <field NAME="body_qz" TYPE="float"/>
      </message>
      <message NAME="EKF7_XHAT" ID="170">
        <field NAME="c" TYPE="float"/>
        <field NAME="s1" TYPE="float"/>
        <field NAME="s2" TYPE="float"/>
        <field NAME="s3" TYPE="float"/>
        <field NAME="p" TYPE="float" ALT_UNIT="deg/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="q" TYPE="float" ALT_UNIT="deg/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="r" TYPE="float" ALT_UNIT="deg/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="bp" TYPE="float"/>
        <field NAME="bq" TYPE="float"/>
        <field NAME="br" TYPE="float"/>
      </message>
      <message NAME="EKF7_Y" ID="171">
        <field NAME="timecount" TYPE="uint16"/>
        <field NAME="g1" TYPE="float"/>
        <field NAME="g2" TYPE="float"/>
        <field NAME="g3" TYPE="float"/>
        <field NAME="m1" TYPE="float"/>
        <field NAME="m2" TYPE="float"/>
        <field NAME="m3" TYPE="float"/>
        <field NAME="p" TYPE="float" ALT_UNIT="deg/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="q" TYPE="float" ALT_UNIT="deg/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="r" TYPE="float" ALT_UNIT="deg/s" ALT_UNIT_COEF="57.29578"/>
      </message>
      <message NAME="EKF7_P_DIAG" ID="172">
        <field NAME="c" TYPE="float"/>
        <field NAME="s1" TYPE="float"/>
        <field NAME="s2" TYPE="float"/>
        <field NAME="s3" TYPE="float"/>
        <field NAME="p" TYPE="float" ALT_UNIT="deg^2/s^2" ALT_UNIT_COEF="3283"/>
        <field NAME="q" TYPE="float" ALT_UNIT="deg^2/s^2" ALT_UNIT_COEF="3283"/>
        <field NAME="r" TYPE="float" ALT_UNIT="deg^2/s^2" ALT_UNIT_COEF="3283"/>
        <field NAME="bp" TYPE="float" ALT_UNIT="deg^2/s^2" ALT_UNIT_COEF="3283"/>
        <field NAME="bq" TYPE="float" ALT_UNIT="deg^2/s^2" ALT_UNIT_COEF="3283"/>
        <field NAME="br" TYPE="float" ALT_UNIT="deg^2/s^2" ALT_UNIT_COEF="3283"/>
      </message>
      <message NAME="AHRS_EULER" ID="173">
        <field NAME="phi" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="theta" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="psi" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
      </message>
      <message NAME="AHRS_MEASUREMENT_EULER" ID="174">
        <field NAME="phi" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="theta" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="psi" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
      </message>
      <message NAME="WT" ID="175">
        <field NAME="rpm" TYPE="float"/>
      </message>
      <message NAME="CSC_CAN_DEBUG" ID="176">
        <field NAME="err_nb" TYPE="uint32"/>
        <field NAME="err_code" TYPE="uint32"/>
      </message>
      <message NAME="CSC_CAN_MSG" ID="177">
        <field NAME="frame" TYPE="uint32"/>
        <field NAME="id" TYPE="uint32"/>
        <field NAME="data_a" TYPE="uint32"/>
        <field NAME="data_b" TYPE="uint32"/>
      </message>
      <message NAME="FMS_TIME" ID="180">
        <field NAME="tv_sec" TYPE="uint32"/>
        <field NAME="tv_nsec" TYPE="uint32"/>
        <field NAME="delay_ns" TYPE="uint32"/>
      </message>
      <message NAME="LOADCELL" ID="181">
        <field NAME="load" TYPE="int32"/>
      </message>
      <message NAME="FLA_DEBUG" ID="182">
        <field NAME="past_input" TYPE="float"/>
        <field NAME="imu_rate" TYPE="float"/>
        <field NAME="desired_accel" TYPE="float"/>
        <field NAME="motor_command" TYPE="float"/>
      </message>
      <message NAME="BLMC_FAULT_STATUS" ID="183">
        <field NAME="raw_fault" TYPE="uint16[]"/>
      </message>
      <message NAME="BLMC_SPEEDS" ID="184">
        <field NAME="speeds" TYPE="int16[]"/>
      </message>
      <message NAME="AHRS_DEBUG_QUAT" ID="185">
        <field NAME="jqi" TYPE="float"/>
        <field NAME="jqx" TYPE="float"/>
        <field NAME="jqy" TYPE="float"/>
        <field NAME="jqz" TYPE="float"/>
        <field NAME="xqi" TYPE="float"/>
        <field NAME="xqx" TYPE="float"/>
        <field NAME="xqy" TYPE="float"/>
        <field NAME="xqz" TYPE="float"/>
        <field NAME="mqi" TYPE="float"/>
        <field NAME="mqx" TYPE="float"/>
        <field NAME="mqy" TYPE="float"/>
        <field NAME="mqz" TYPE="float"/>
      </message>
      <message NAME="BLMC_BUSVOLTS" ID="186">
        <field NAME="busvolts" TYPE="uint16[]"/>
      </message>
      <message NAME="SYSTEM_STATUS" ID="187">
        <field NAME="csc1_loop_count" TYPE="uint32"/>
        <field NAME="csc1_msg_count" TYPE="uint32"/>
        <field NAME="csc2_loop_count" TYPE="uint32"/>
        <field NAME="csc2_msg_count" TYPE="uint32"/>
        <field NAME="can_rx_err" TYPE="uint32"/>
        <field NAME="can_tx_err" TYPE="uint32"/>
        <field NAME="rc_parser_err" TYPE="uint32"/>
        <field NAME="system_fault" TYPE="uint8"/>
      </message>
      <message NAME="DYNAMIXEL" ID="188">
        <field NAME="left_wing" TYPE="uint16"/>
        <field NAME="right_wing" TYPE="uint16"/>
        <field NAME="left_wing_flag" TYPE="uint8"/>
        <field NAME="right_wing_flag" TYPE="uint8"/>
        <field NAME="invalid_position" TYPE="uint32"/>
        <field NAME="timeout_events" TYPE="uint32"/>
        <field NAME="checksum_errors" TYPE="uint32"/>
        <field NAME="fuse_rotation_angle" TYPE="float"/>
        <field NAME="fuse_rotation_rate" TYPE="float"/>
      </message>
      <message NAME="RMAT_DEBUG" ID="189">
        <field NAME="a" TYPE="float"/>
        <field NAME="b" TYPE="float"/>
        <field NAME="c" TYPE="float"/>
        <field NAME="d" TYPE="float"/>
        <field NAME="e" TYPE="float"/>
        <field NAME="f" TYPE="float"/>
        <field NAME="g" TYPE="float"/>
        <field NAME="h" TYPE="float"/>
        <field NAME="i" TYPE="float"/>
      </message>
      <message NAME="SIMPLE_COMMANDS" ID="190">
        <field NAME="roll" TYPE="int16"/>
        <field NAME="pitch" TYPE="int16"/>
        <field NAME="yaw" TYPE="int16"/>
      </message>
      <message NAME="VANE_SENSOR" ID="191">
        <field NAME="alpha" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.3"/>
        <field NAME="alpha_filtered" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.3"/>
        <field NAME="alpha_target" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.3"/>
        <field NAME="alpha_vane_error" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.3"/>
        <field NAME="alpha2" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.3"/>
        <field NAME="beta" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.3"/>
        <field NAME="beta_filtered" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.3"/>
        <field NAME="beta_target" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.3"/>
        <field NAME="beta_vane_error" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.3"/>
        <field NAME="beta2" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.3"/>
      </message>
      <message NAME="CONTROLLER_GAINS" ID="192">
        <field NAME="roll_gamma_p" TYPE="float"/>
        <field NAME="roll_gamma_d" TYPE="float"/>
        <field NAME="roll_gamma_i" TYPE="float"/>
        <field NAME="pitch_gamma_p" TYPE="float"/>
        <field NAME="pitch_gamma_d" TYPE="float"/>
        <field NAME="pitch_gamma_i" TYPE="float"/>
        <field NAME="yaw_gamma_p" TYPE="float"/>
        <field NAME="yaw_gamma_d" TYPE="float"/>
        <field NAME="yaw_gamma_i" TYPE="float"/>
      </message>
      <message NAME="BOOZ_AHRS_LKF" ID="193">
        <field NAME="phi" TYPE="float" ALT_UNIT="degres" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="theta" TYPE="float" ALT_UNIT="degres" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="psi" TYPE="float" ALT_UNIT="degres" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="qi" TYPE="float"/>
        <field NAME="qx" TYPE="float"/>
        <field NAME="qy" TYPE="float"/>
        <field NAME="qz" TYPE="float"/>
        <field NAME="p" TYPE="float" ALT_UNIT="degres/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="q" TYPE="float" ALT_UNIT="degres/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="r" TYPE="float" ALT_UNIT="degres/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="ax" TYPE="float"/>
        <field NAME="ay" TYPE="float"/>
        <field NAME="az" TYPE="float"/>
        <field NAME="mx" TYPE="float"/>
        <field NAME="my" TYPE="float"/>
        <field NAME="mz" TYPE="float"/>
      </message>
      <message NAME="BOOZ_AHRS_LKF_DEBUG" ID="194">
        <field NAME="phi_err" TYPE="float" ALT_UNIT="degres" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="theta_err" TYPE="float" ALT_UNIT="degres" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="psi_err" TYPE="float" ALT_UNIT="degres" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="bp" TYPE="float" ALT_UNIT="degres/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="bq" TYPE="float" ALT_UNIT="degres/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="br" TYPE="float" ALT_UNIT="degres/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="quat_norm" TYPE="float"/>
        <field NAME="phi_accel" TYPE="float" ALT_UNIT="degres" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="theta_accel" TYPE="float" ALT_UNIT="degres" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="phi_cov" TYPE="float"/>
        <field NAME="theta_cov" TYPE="float"/>
        <field NAME="psi_cov" TYPE="float"/>
        <field NAME="bp_cov" TYPE="float"/>
        <field NAME="bq_cov" TYPE="float"/>
        <field NAME="br_cov" TYPE="float"/>
      </message>
      <message NAME="BOOZ_AHRS_LKF_ACC_DBG" ID="195">
        <field NAME="qi_err" TYPE="float"/>
        <field NAME="qx_err" TYPE="float"/>
        <field NAME="qy_err" TYPE="float"/>
        <field NAME="qz_err" TYPE="float"/>
        <field NAME="bp_err" TYPE="float" ALT_UNIT="degres/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="bq_err" TYPE="float" ALT_UNIT="degres/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="br_err" TYPE="float" ALT_UNIT="degres/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
      </message>
      <message NAME="BOOZ_AHRS_LKF_MAG_DBG" ID="196">
        <field NAME="qi_err" TYPE="float"/>
        <field NAME="qx_err" TYPE="float"/>
        <field NAME="qy_err" TYPE="float"/>
        <field NAME="qz_err" TYPE="float"/>
        <field NAME="bp_err" TYPE="float" ALT_UNIT="degres/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="bq_err" TYPE="float" ALT_UNIT="degres/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="br_err" TYPE="float" ALT_UNIT="degres/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
      </message>
      <message NAME="BOOZ_SIM_SENSORS_SCALED" ID="197">
        <field NAME="acc_x" TYPE="float"/>
        <field NAME="acc_y" TYPE="float"/>
        <field NAME="acc_z" TYPE="float"/>
        <field NAME="mag_x" TYPE="float"/>
        <field NAME="mag_y" TYPE="float"/>
        <field NAME="mag_z" TYPE="float"/>
      </message>
      <message NAME="BOOZ_INS" ID="198">
        <field NAME="ins_x" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="ins_y" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="ins_z" TYPE="int32" ALT_UNIT="m" ALT_UNIT_COEF="0.0039063"/>
        <field NAME="ins_xd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="ins_yd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="ins_zd" TYPE="int32" ALT_UNIT="m/s" ALT_UNIT_COEF="0.0000019"/>
        <field NAME="ins_xdd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
        <field NAME="ins_ydd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
        <field NAME="ins_zdd" TYPE="int32" ALT_UNIT="m/s2" ALT_UNIT_COEF="0.0009766"/>
      </message>
      <message NAME="GPS_ERROR" ID="199">
        <field NAME="x_position" TYPE="float" UNIT="m"/>
        <field NAME="y_position" TYPE="float" UNIT="m"/>
        <field NAME="z_position" TYPE="float" UNIT="m"/>
        <field NAME="x_velocity" TYPE="float" UNIT="m"/>
        <field NAME="y_velocity" TYPE="float" UNIT="m"/>
        <field NAME="z_velocity" TYPE="float" UNIT="m"/>
      </message>
      <message NAME="IMU_GYRO" ID="200">
        <field NAME="gp" TYPE="float" ALT_UNIT="deg/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="gq" TYPE="float" ALT_UNIT="deg/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="gr" TYPE="float" ALT_UNIT="deg/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
      </message>
      <message NAME="IMU_MAG" ID="201">
        <field NAME="mx" TYPE="float"/>
        <field NAME="my" TYPE="float"/>
        <field NAME="mz" TYPE="float"/>
      </message>
      <message NAME="IMU_ACCEL" ID="202">
        <field NAME="ax" TYPE="float" UNIT="m/s-2"/>
        <field NAME="ay" TYPE="float" UNIT="m/s-2"/>
        <field NAME="az" TYPE="float" UNIT="m/s-2"/>
      </message>
      <message NAME="IMU_GYRO_RAW" ID="203">
        <field NAME="gp" TYPE="int32" UNIT="adc"/>
        <field NAME="gq" TYPE="int32" UNIT="adc"/>
        <field NAME="gr" TYPE="int32" UNIT="adc"/>
      </message>
      <message NAME="IMU_ACCEL_RAW" ID="204">
        <field NAME="ax" TYPE="int32" UNIT="adc"/>
        <field NAME="ay" TYPE="int32" UNIT="adc"/>
        <field NAME="az" TYPE="int32" UNIT="adc"/>
      </message>
      <message NAME="IMU_MAG_RAW" ID="205">
        <field NAME="mx" TYPE="int32" UNIT="adc"/>
        <field NAME="my" TYPE="int32" UNIT="adc"/>
        <field NAME="mz" TYPE="int32" UNIT="adc"/>
      </message>
      <message NAME="IMU_GYRO_LP" ID="209">
        <field NAME="gp" TYPE="float" UNIT="rad/s"/>
        <field NAME="gq" TYPE="float" UNIT="rad/s"/>
        <field NAME="gr" TYPE="float" UNIT="rad/s"/>
      </message>
      <message NAME="IMU_PRESSURE" ID="210">
        <field NAME="p" TYPE="float" UNIT="pascal"/>
      </message>
      <message NAME="IMU_HS_GYRO" ID="211">
        <field NAME="axis" TYPE="uint8"/>
        <field NAME="samples" TYPE="uint32[]"/>
      </message>
      <message NAME="TEST_PASSTHROUGH_STATUS" ID="212">
        <field NAME="io_proc_msg_cnt" TYPE="uint32"/>
        <field NAME="io_proc_err_cnt" TYPE="uint32"/>
        <field NAME="io_link_msg_cnt" TYPE="uint32"/>
        <field NAME="io_link_err_cnt" TYPE="uint32"/>
        <field NAME="rc_status" TYPE="uint8" VALUES="OK|LOST|REALLY_LOST"/>
      </message>
      <message NAME="IMU_TURNTABLE" ID="220">
        <field NAME="omega" TYPE="float" ALT_UNIT="deg/s" UNIT="rad/s" ALT_UNIT_COEF="57.29578"/>
      </message>
      <message NAME="BARO_RAW" ID="221">
        <field NAME="abs" TYPE="int32"/>
        <field NAME="diff" TYPE="int32"/>
      </message>
      <message NAME="TIME" ID="227">
        <field NAME="t" TYPE="uint32"/>
      </message>
      <message NAME="BOOZ_STATUS" ID="231">
        <field NAME="link_imu_nb_err" TYPE="uint32"/>
        <field NAME="blmc_nb_err" TYPE="uint8"/>
        <field NAME="rc_status" TYPE="uint8" VALUES="OK|LOST|REALLY_LOST"/>
        <field NAME="gps_status" TYPE="uint8" VALUES="NO_FIX|NA|NA|3Dfix"/>
        <field NAME="ap_mode" TYPE="uint8" VALUES="FAILSAFE|KILL|RATE_DIRECT|ATTITUDE_DIRECT|RATE_RC_CLIMB|ATTITUDE_RC_CLIMB|ATTITUDE_CLIMB|RATE_Z_HOLD|ATTITUDE_Z_HOLD|HOVER_DIRECT|HOVER_CLIMB|HOVER_Z_HOLD|NAV"/>
        <field NAME="ap_in_flight" TYPE="uint8" VALUES="ON_GROUND|IN_FLIGHT"/>
        <field NAME="ap_motors_on" TYPE="uint8" VALUES="MOTORS_OFF|MOTORS_ON"/>
        <field NAME="ap_h_mode" TYPE="uint8" VALUES="KILL|RATE|ATTITUDE|HOVER|NAV"/>
        <field NAME="ap_v_mode" TYPE="uint8" VALUES="KILL|RC_DIRECT|RC_CLIMB|CLIMB|HOVER|NAV"/>
        <field NAME="vsupply" TYPE="uint8" UNIT="decivolt"/>
        <field NAME="cpu_time" TYPE="uint16" UNIT="s"/>
      </message>
      <message NAME="OPTICFLOW" ID="234">
        <field NAME="flow" TYPE="uint16"/>
        <field NAME="ref_alt" TYPE="float"/>
      </message>
      <message NAME="VISUALTARGET" ID="235">
        <field NAME="x" TYPE="uint16"/>
        <field NAME="y" TYPE="uint16"/>
      </message>
      <message NAME="BOOZ_SIM_RPMS" ID="239">
        <field NAME="front" TYPE="float" UNIT="RPM"/>
        <field NAME="back" TYPE="float" UNIT="RPM"/>
        <field NAME="right" TYPE="float" UNIT="RPM"/>
        <field NAME="left" TYPE="float" UNIT="RPM"/>
      </message>
      <message NAME="BOOZ_SIM_SPEED_POS" ID="240">
        <field NAME="ltpp_xdd" TYPE="float" UNIT="m/s2"/>
        <field NAME="ltpp_ydd" TYPE="float" UNIT="m/s2"/>
        <field NAME="ltpp_zdd" TYPE="float" UNIT="m/s2"/>
        <field NAME="ltpp_xd" TYPE="float" UNIT="m/s"/>
        <field NAME="ltpp_yd" TYPE="float" UNIT="m/s"/>
        <field NAME="ltpp_zd" TYPE="float" UNIT="m/s"/>
        <field NAME="ltpp_x" TYPE="float" UNIT="m"/>
        <field NAME="ltpp_y" TYPE="float" UNIT="m"/>
        <field NAME="ltpp_z" TYPE="float" UNIT="m"/>
      </message>
      <message NAME="BOOZ_SIM_RATE_ATTITUDE" ID="241">
        <field NAME="p" TYPE="float" UNIT="degres/s"/>
        <field NAME="q" TYPE="float" UNIT="degres/s"/>
        <field NAME="r" TYPE="float" UNIT="degres/s"/>
        <field NAME="phi" TYPE="float" UNIT="degres"/>
        <field NAME="theta" TYPE="float" UNIT="degres"/>
        <field NAME="psi" TYPE="float" UNIT="degres"/>
      </message>
      <message NAME="BOOZ_SIM_GYRO_BIAS" ID="242">
        <field NAME="bp" TYPE="float" UNIT="degres/s"/>
        <field NAME="bq" TYPE="float" UNIT="degres/s"/>
        <field NAME="br" TYPE="float" UNIT="degres/s"/>
      </message>
      <message NAME="BOOZ_SIM_RANGE_METER" ID="243">
        <field NAME="dist" TYPE="float" UNIT="adc"/>
      </message>
      <message NAME="BOOZ_SIM_WIND" ID="244">
        <field NAME="vx" TYPE="float" UNIT="m/s"/>
        <field NAME="vy" TYPE="float" UNIT="m/s"/>
        <field NAME="vz" TYPE="float" UNIT="m/s"/>
      </message>
      <message NAME="BOOZ_DEBUG_FOO" ID="245">
        <field NAME="ami_stat" TYPE="uint8"/>
      </message>
      <message NAME="BOOZ_MAX1167_ERR" ID="246">
        <field NAME="erno" TYPE="uint8"/>
      </message>
      <message NAME="BOOZ_ERROR" ID="247">
        <field NAME="module" TYPE="uint8"/>
        <field NAME="errno" TYPE="uint8"/>
      </message>
      <message NAME="BOOZ_SIM_ACCEL_LTP" ID="248">
        <field NAME="xdd" TYPE="float" UNIT="m/s2"/>
        <field NAME="ydd" TYPE="float" UNIT="m/s2"/>
        <field NAME="zdd" TYPE="float" UNIT="m/s2"/>
      </message>
      <message NAME="LOOSE_INS_GPS" ID="249">
        <field NAME="status" TYPE="uint8" VALUES="UNINITIALIZED|STARTUP_TRANSIENTS|LOWPASSING|GPS_LOST|NOMINAL"/>
        <field NAME="time_running" TYPE="double" ALT_UNIT="minutes" ALT_UNIT_COEF="0.016666666666667"/>
        <field NAME="q0" TYPE="double"/>
        <field NAME="q1" TYPE="double"/>
        <field NAME="q2" TYPE="double"/>
        <field NAME="q3" TYPE="double"/>
        <field NAME="phi" TYPE="double" ALT_UNIT="deg" ALT_UNIT_COEF="57.29578"/>
        <field NAME="theta" TYPE="double" ALT_UNIT="deg" ALT_UNIT_COEF="57.29578"/>
        <field NAME="psi" TYPE="double" ALT_UNIT="deg" ALT_UNIT_COEF="57.29578"/>
        <field NAME="north" TYPE="double" UNIT="m"/>
        <field NAME="east" TYPE="double" UNIT="m"/>
        <field NAME="down" TYPE="double" UNIT="m"/>
        <field NAME="v_north" TYPE="double" UNIT="m/s"/>
        <field NAME="v_east" TYPE="double" UNIT="m/s"/>
        <field NAME="v_down" TYPE="double" UNIT="m/s"/>
        <field NAME="est_p" TYPE="double" ALT_UNIT="degres/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="est_q" TYPE="double" ALT_UNIT="degres/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="est_r" TYPE="double" ALT_UNIT="degres/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="gyroBias_x" TYPE="double" ALT_UNIT="degres/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="gyroBias_y" TYPE="double" ALT_UNIT="degres/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="gyroBias_z" TYPE="double" ALT_UNIT="degres/s" ALT_UNIT_COEF="57.29578"/>
        <field NAME="imuCallbacks" TYPE="uint32"/>
        <field NAME="gpsCallbacks" TYPE="uint32"/>
        <field NAME="baroCallbacks" TYPE="uint32"/>
      </message>
      <message NAME="AFL_COEFFS" ID="250">
        <field NAME="roll_a" TYPE="float"/>
        <field NAME="roll_b" TYPE="float"/>
        <field NAME="roll_c" TYPE="float"/>
        <field NAME="pitch_a" TYPE="float"/>
        <field NAME="pitch_b" TYPE="float"/>
        <field NAME="pitch_c" TYPE="float"/>
        <field NAME="yaw_a" TYPE="float"/>
        <field NAME="yaw_b" TYPE="float"/>
        <field NAME="yaw_c" TYPE="float"/>
      </message>
      <message NAME="BOOZ_ATT_REF_MODEL" ID="251">
        <field NAME="omega_p" TYPE="float"/>
        <field NAME="zeta_p" TYPE="float"/>
        <field NAME="omega_q" TYPE="float"/>
        <field NAME="zeta_q" TYPE="float"/>
        <field NAME="omega_r" TYPE="float"/>
        <field NAME="zeta_r" TYPE="float"/>
      </message>
      <message NAME="BOOZ2_FF_ADAP" ID="252">
        <field NAME="roll" TYPE="float"/>
        <field NAME="pitch" TYPE="float"/>
        <field NAME="yaw" TYPE="float"/>
      </message>
      <message NAME="I2C_ERRORS" ID="253">
        <field NAME="acknowledge_failure_cnt" TYPE="uint16"/>
        <field NAME="misplaced_start_or_stop_cnt" TYPE="uint16"/>
        <field NAME="arbitration_lost_cnt" TYPE="uint16"/>
        <field NAME="overrun_or_underrun_cnt" TYPE="uint16"/>
        <field NAME="pec_error_in_reception_cnt" TYPE="uint16"/>
        <field NAME="timeout_or_tlow_error_cnt" TYPE="uint16"/>
        <field NAME="smbus_alert_cnt" TYPE="uint16"/>
        <field NAME="unexpected_event_cnt" TYPE="uint16"/>
        <field NAME="last_unexpected_event" TYPE="uint32"/>
      </message>
      <message NAME="RDYB_TRAJECTORY" ID="254">
        <field NAME="commanded_phi" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="commanded_theta" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="commanded_psi" TYPE="float" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="setpoint_x" TYPE="float" UNIT="m N"/>
        <field NAME="setpoint_y" TYPE="float" UNIT="m E"/>
        <field NAME="setpoint_z" TYPE="float" UNIT="m D"/>
      </message>
      <message NAME="HENRY_GNSS" ID="255">
        <field NAME="last_imu_update" TYPE="uint32"/>
        <field NAME="GPS_time" TYPE="double"/>
        <field NAME="GPS_solution_valid" TYPE="uint8"/>
        <field NAME="latitude" TYPE="double" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="longitude" TYPE="double" ALT_UNIT="deg" UNIT="rad" ALT_UNIT_COEF="57.29578"/>
        <field NAME="altitude" TYPE="double"/>
        <field NAME="North" TYPE="double"/>
        <field NAME="East" TYPE="double"/>
        <field NAME="Down" TYPE="double"/>
        <field NAME="SVs_Tracked" TYPE="uint8"/>
        <field NAME="SVs_PVT" TYPE="uint8"/>
        <field NAME="V_North" TYPE="double"/>
        <field NAME="V_East" TYPE="double"/>
        <field NAME="V_Down" TYPE="double"/>
      </message>
    </class>
    <class NAME="datalink">
      <message LINK="broadcasted" NAME="ACINFO" ID="1">
        <field NAME="course" TYPE="int16" UNIT="decideg"/>
        <field NAME="utm_east" TYPE="int32" UNIT="cm"/>
        <field NAME="utm_north" TYPE="int32" UNIT="cm"/>
        <field NAME="alt" TYPE="int32" UNIT="cm"/>
        <field NAME="itow" TYPE="uint32" UNIT="ms"/>
        <field NAME="speed" TYPE="uint16" UNIT="cm/s"/>
        <field NAME="climb" TYPE="int16" UNIT="cm/s"/>
        <field NAME="ac_id" TYPE="uint8"/>
      </message>
      <message LINK="forwarded" NAME="MOVE_WP" ID="2">
        <field NAME="wp_id" TYPE="uint8"/>
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="lat" TYPE="int32" UNIT="e-7deg"/>
        <field NAME="lon" TYPE="int32" UNIT="e-7deg"/>
        <field NAME="alt" TYPE="int32" UNIT="cm"/>
      </message>
      <message LINK="forwarded" NAME="WIND_INFO" ID="3">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="pad0" TYPE="uint8"/>
        <field NAME="east" TYPE="float" UNIT="m/s"/>
        <field NAME="north" TYPE="float" UNIT="m/s"/>
        <field NAME="airspeed" TYPE="float" UNIT="m/s"/>
      </message>
      <message LINK="forwarded" NAME="SETTING" ID="4">
        <field NAME="index" TYPE="uint8"/>
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="value" TYPE="float"/>
      </message>
      <message LINK="forwarded" NAME="BLOCK" ID="5">
        <field NAME="block_id" TYPE="uint8"/>
        <field NAME="ac_id" TYPE="uint8"/>
      </message>
      <message LINK="forwarded" NAME="HITL_UBX" ID="6">
        <field NAME="class" TYPE="uint8"/>
        <field NAME="id" TYPE="uint8"/>
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="ubx_payload" TYPE="uint8[]"/>
      </message>
      <message LINK="forwarded" NAME="HITL_INFRARED" ID="7">
        <field NAME="roll" TYPE="int16"/>
        <field NAME="pitch" TYPE="int16"/>
        <field NAME="top" TYPE="int16"/>
        <field NAME="ac_id" TYPE="uint8"/>
      </message>
      <message NAME="PING" ID="8"/>
      <message LINK="broadcasted" NAME="FORMATION_SLOT" ID="9">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="mode" TYPE="uint8"/>
        <field NAME="slot_east" TYPE="float" UNIT="m" FORMAT="%.1f"/>
        <field NAME="slot_north" TYPE="float" UNIT="m" FORMAT="%.1f"/>
        <field NAME="slot_alt" TYPE="float" UNIT="m" FORMAT="%.1f"/>
      </message>
      <message LINK="broadcasted" NAME="FORMATION_STATUS" ID="10">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="leader_id" TYPE="uint8"/>
        <field NAME="status" TYPE="uint8"/>
      </message>
      <message LINK="forwarded" NAME="JOYSTICK_RAW" ID="11">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="roll" TYPE="int8"/>
        <field NAME="pitch" TYPE="int8"/>
        <field NAME="throttle" TYPE="int8"/>
      </message>
      <message LINK="forwarded" NAME="COMMANDS_RAW" ID="12">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="commands" TYPE="int8[]"/>
      </message>
      <message LINK="forwarded" NAME="DGPS_RAW" ID="13">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="length" TYPE="uint8"/>
        <field NAME="rtcm" TYPE="uint8[]"/>
      </message>
      <message LINK="forwarded" NAME="GET_SETTING" ID="16">
        <field NAME="index" TYPE="uint8"/>
        <field NAME="ac_id" TYPE="uint8"/>
      </message>
      <message LINK="forwarded" NAME="TCAS_RESOLVE" ID="17">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="ac_id_conflict" TYPE="uint8"/>
        <field NAME="resolve" TYPE="uint8" VALUES="NONE|LEVEL|CLIMB|DESCEND"/>
      </message>
      <message LINK="broadcasted" NAME="WINDTURBINE_STATUS" ID="50">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="tb_id" TYPE="uint8"/>
        <field NAME="sync_itow" TYPE="uint32" UNIT="ms"/>
        <field NAME="cycle_time" TYPE="uint32" UNIT="ms"/>
      </message>
      <message LINK="broadcasted" NAME="RC_3CH" ID="51">
        <field NAME="throttle_mode" TYPE="uint8" UNIT="byte_mask"/>
        <field NAME="roll" TYPE="int8"/>
        <field NAME="pitch" TYPE="int8"/>
      </message>
      <message NAME="KITE_COMMAND" ID="96">
        <field NAME="POWER" TYPE="uint16"/>
        <field NAME="TURN" TYPE="uint16"/>
      </message>
      <message NAME="SET_ACTUATOR" ID="100">
        <field NAME="value" TYPE="uint16"/>
        <field NAME="no" TYPE="uint8"/>
        <field NAME="ac_id" TYPE="uint8"/>
      </message>
      <message NAME="CSC_SERVO_CMD" ID="101">
        <field NAME="servo_1" TYPE="uint16"/>
        <field NAME="servo_2" TYPE="uint16"/>
        <field NAME="servo_3" TYPE="uint16"/>
        <field NAME="servo_4" TYPE="uint16"/>
      </message>
      <message LINK="forwarded" NAME="BOOZ2_FMS_COMMAND" ID="149">
        <field NAME="h_mode" TYPE="uint8" VALUES="KILL|RATE|ATTITUDE|HOVER|NAV"/>
        <field NAME="v_mode" TYPE="uint8" VALUES="KILL|DIRECT|CLIMB_RC|CLIMB|ALT|NAV"/>
        <field NAME="v_sp" TYPE="int32"/>
        <field NAME="h_sp_1" TYPE="int32"/>
        <field NAME="h_sp_2" TYPE="int32"/>
        <field NAME="h_sp_3" TYPE="int32"/>
        <field NAME="ac_id" TYPE="uint8"/>
      </message>
      <message LINK="forwarded" NAME="BOOZ_NAV_STICK" ID="150">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="vx_sp" TYPE="int8"/>
        <field NAME="vy_sp" TYPE="int8"/>
        <field NAME="vz_sp" TYPE="int8"/>
        <field NAME="r_sp" TYPE="int8"/>
      </message>
      <message LINK="forwarded" NAME="EXTERNAL_FILTER_SOLUTION" ID="151">
        <field NAME="ac_id" TYPE="uint8"/>
        <field NAME="status" TYPE="uint8"/>
        <field NAME="x" TYPE="float" UNIT="m"/>
        <field NAME="xd" TYPE="float" UNIT="m"/>
        <field NAME="y" TYPE="float" UNIT="m"/>
        <field NAME="yd" TYPE="float" UNIT="m"/>
      </message>
    </class>
    <class NAME="ground">
      <message NAME="NEW_AIRCRAFT" ID="1">
        <field NAME="ac_id" TYPE="string"/>
      </message>
      <message NAME="AIRCRAFT_DIE" ID="2">
        <field NAME="ac_id" TYPE="string"/>
      </message>
      <message NAME="AIRCRAFTS" ID="3">
        <field NAME="ac_list" TYPE="string" FORMAT="csv"/>
      </message>
      <message NAME="AIRCRAFTS_REQ" ID="4"/>
      <message NAME="SELECTED" ID="5">
        <field NAME="aircraft_id" TYPE="string"/>
      </message>
      <message NAME="SELECTED_REQ" ID="6"/>
      <message NAME="WIND_CLEAR" ID="7">
        <field NAME="ac_id" TYPE="string"/>
      </message>
      <message NAME="WIND" ID="8">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="dir" TYPE="float" UNIT="deg_wind"/>
        <field NAME="wspeed" TYPE="float" UNIT="m/s"/>
        <field NAME="mean_aspeed" TYPE="float" UNIT="m/s"/>
        <field NAME="stddev" TYPE="float" UNIT="m/s"/>
      </message>
      <message NAME="CONFIG_REQ" ID="9">
        <field NAME="ac_id" TYPE="string"/>
      </message>
      <message NAME="CONFIG" ID="10">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="flight_plan" TYPE="string" UNIT="url"/>
        <field NAME="airframe" TYPE="string" UNIT="url"/>
        <field NAME="radio" TYPE="string" UNIT="url"/>
        <field NAME="settings" TYPE="string" UNIT="url"/>
        <field NAME="default_gui_color" TYPE="string"/>
        <field NAME="ac_name" TYPE="string"/>
      </message>
      <message NAME="FLIGHT_PARAM" ID="11">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="roll" TYPE="float" UNIT="deg"/>
        <field NAME="pitch" TYPE="float" UNIT="deg"/>
        <field NAME="heading" TYPE="float" UNIT="deg"/>
        <field NAME="lat" TYPE="float" UNIT="deg"/>
        <field NAME="long" TYPE="float" UNIT="deg"/>
        <field NAME="speed" TYPE="float" UNIT="m/s"/>
        <field NAME="course" TYPE="float" UNIT="deg" FORMAT="%.1f"/>
        <field NAME="alt" TYPE="float" UNIT="m"/>
        <field NAME="climb" TYPE="float" UNIT="m/s"/>
        <field NAME="agl" TYPE="float" UNIT="m"/>
        <field NAME="unix_time" TYPE="float" UNIT="s (Unix time)"/>
        <field NAME="itow" TYPE="uint32" UNIT="ms"/>
      </message>
      <message NAME="AP_STATUS" ID="12">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="ap_mode" TYPE="string" VALUES="MANUAL|AUTO1|AUTO2|HOME|FAILSAFE"/>
        <field NAME="lat_mode" TYPE="string" VALUES="MANUAL|ROLL_RATE|ROLL|COURSE"/>
        <field NAME="horiz_mode" TYPE="string" VALUES="WAYPOINT|ROUTE|CIRCLE"/>
        <field NAME="gaz_mode" TYPE="string" VALUES="MANUAL|THROTTLE|CLIMB|ALT"/>
        <field NAME="gps_mode" TYPE="string" VALUES="NOFIX|DRO|2D|3D|GPSDRO"/>
        <field NAME="kill_mode" TYPE="string" VALUES="OFF|ON"/>
        <field NAME="flight_time" TYPE="uint32"/>
      </message>
      <message NAME="NAV_STATUS" ID="13">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="cur_block" TYPE="uint8"/>
        <field NAME="cur_stage" TYPE="uint8"/>
        <field NAME="block_time" TYPE="uint32"/>
        <field NAME="stage_time" TYPE="uint32"/>
        <field NAME="target_lat" TYPE="float" UNIT="deg"/>
        <field NAME="target_long" TYPE="float" UNIT="deg"/>
        <field NAME="target_climb" TYPE="float" UNIT="m/s"/>
        <field NAME="target_alt" TYPE="float" UNIT="m"/>
        <field NAME="target_course" TYPE="float" UNIT="deg"/>
        <field NAME="dist_to_wp" TYPE="float" UNIT="m"/>
      </message>
      <message NAME="CAM_STATUS" ID="14">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="cam_lat" TYPE="float" UNIT="deg"/>
        <field NAME="cam_long" TYPE="float" UNIT="deg"/>
        <field NAME="cam_target_lat" TYPE="float" UNIT="deg"/>
        <field NAME="cam_target_long" TYPE="float" UNIT="deg"/>
      </message>
      <message NAME="ENGINE_STATUS" ID="15">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="throttle" TYPE="float" UNIT="%" FORMAT="%.1f"/>
        <field NAME="throttle_accu" TYPE="float" FORMAT="%.1f"/>
        <field NAME="rpm" TYPE="float" UNIT="rpm" FORMAT="%.1f"/>
        <field NAME="temp" TYPE="float" UNIT="celcius"/>
        <field NAME="bat" TYPE="float" UNIT="V"/>
        <field NAME="amp" TYPE="float" UNIT="A"/>
        <field NAME="energy" TYPE="uint16" UNIT="Wh"/>
      </message>
      <message NAME="SVSINFO" ID="16">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="pacc" TYPE="uint16" UNIT="cm"/>
        <field NAME="svid" TYPE="string" FORMAT="csv"/>
        <field NAME="flags" TYPE="string" FORMAT="csv"/>
        <field NAME="qi" TYPE="string" FORMAT="csv" VALUES="IDLE|SEARCH|SEARCH|UNUSABLE|CODELOCK|CARRIERLOCK|CARRIERLOCK|RECEIVING"/>
        <field NAME="cno" TYPE="string" UNIT="dbHz" FORMAT="csv"/>
        <field NAME="elev" TYPE="string" UNIT="deg" FORMAT="csv"/>
        <field NAME="azim" TYPE="string" UNIT="deg" FORMAT="csv"/>
        <field NAME="msg_age" TYPE="string" UNIT="s" FORMAT="csv"/>
      </message>
      <message NAME="FLY_BY_WIRE" ID="17">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="rc_status" TYPE="string" VALUES="OK|LOST|REALLY_LOST"/>
        <field NAME="rc_mode" TYPE="string" VALUES="MANUAL|AUTO|FAILSAFE"/>
      </message>
      <message NAME="INFLIGH_CALIB" ID="19">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="if_mode" TYPE="string" VALUES="OFF|DOWN|UP"/>
        <field NAME="if_value1" TYPE="float"/>
        <field NAME="if_value2" TYPE="float"/>
      </message>
      <message NAME="WORLD_ENV" ID="20">
        <field NAME="wind_east" TYPE="float" UNIT="m/s" FORMAT="%.1f"/>
        <field NAME="wind_north" TYPE="float" UNIT="m/s" FORMAT="%.1f"/>
        <field NAME="wind_up" TYPE="float" UNIT="m/s" FORMAT="%.1f"/>
        <field NAME="ir_contrast" TYPE="float"/>
        <field NAME="time_scale" TYPE="float"/>
        <field NAME="gps_availability" TYPE="uint8" VALUES="OFF|ON"/>
      </message>
      <message NAME="WORLD_ENV_REQ" ID="21">
        <field NAME="lat" TYPE="float" UNIT="deg"/>
        <field NAME="long" TYPE="float" UNIT="deg"/>
        <field NAME="alt" TYPE="float" UNIT="m"/>
        <field NAME="east" TYPE="float" UNIT="m"/>
        <field NAME="north" TYPE="float" UNIT="m"/>
        <field NAME="up" TYPE="float" UNIT="m"/>
      </message>
      <message NAME="CIRCLE_STATUS" ID="22">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="circle_lat" TYPE="float" UNIT="deg"/>
        <field NAME="circle_long" TYPE="float" UNIT="deg"/>
        <field NAME="radius" TYPE="int16" UNIT="m"/>
      </message>
      <message NAME="SEGMENT_STATUS" ID="23">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="segment1_lat" TYPE="float" UNIT="deg"/>
        <field NAME="segment1_long" TYPE="float" UNIT="deg"/>
        <field NAME="segment2_lat" TYPE="float" UNIT="deg"/>
        <field NAME="segment2_long" TYPE="float" UNIT="deg"/>
      </message>
      <message NAME="MOVE_WAYPOINT" ID="24">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="wp_id" TYPE="uint8"/>
        <field NAME="lat" TYPE="float" UNIT="deg"/>
        <field NAME="long" TYPE="float" UNIT="deg"/>
        <field NAME="alt" TYPE="float" UNIT="m"/>
      </message>
      <message NAME="GET_DL_SETTING" ID="25">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="index" TYPE="uint8"/>
      </message>
      <message NAME="DL_SETTING" ID="26">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="index" TYPE="uint8"/>
        <field NAME="value" TYPE="float"/>
      </message>
      <message NAME="JUMP_TO_BLOCK" ID="27">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="block_id" TYPE="uint8"/>
      </message>
      <message NAME="DL_VALUES" ID="28">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="values" TYPE="string" FORMAT="csv"/>
      </message>
      <message NAME="RAW_DATALINK" ID="29">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="message" TYPE="string" FORMAT=";sv"/>
      </message>
      <message NAME="WAYPOINT_MOVED" ID="30">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="wp_id" TYPE="uint8"/>
        <field NAME="lat" TYPE="float" UNIT="deg"/>
        <field NAME="long" TYPE="float" UNIT="deg"/>
        <field NAME="alt" TYPE="float" UNIT="m"/>
      </message>
      <message NAME="SURVEY_STATUS" ID="31">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="east_long" TYPE="float" UNIT="deg"/>
        <field NAME="north_lat" TYPE="float" UNIT="deg"/>
        <field NAME="west_long" TYPE="float" UNIT="deg"/>
        <field NAME="south_lat" TYPE="float" UNIT="deg"/>
      </message>
      <message NAME="TELEMETRY_STATUS" ID="32">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="time_since_last_bat_msg" TYPE="float" UNIT="s"/>
      </message>
      <message NAME="TELEMETRY_ERROR" ID="33">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="message" TYPE="string"/>
      </message>
      <message NAME="PLUMES" ID="100">
        <field NAME="ids" TYPE="string" FORMAT="csv"/>
        <field NAME="lats" TYPE="string" FORMAT="csv"/>
        <field NAME="longs" TYPE="string" FORMAT="csv"/>
        <field NAME="values" TYPE="string" FORMAT="csv"/>
      </message>
    </class>
    <class NAME="alert">
      <message NAME="BAT_LOW" ID="1">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="level" TYPE="string" VALUES="CATASTROPHIC|CRITIC|WARNING"/>
        <field NAME="value" TYPE="float"/>
      </message>
      <message NAME="AIR_PROX" ID="2">
        <field NAME="ac_id" TYPE="string"/>
        <field NAME="level" TYPE="string" VALUES="CATASTROPHIC|CRITIC|WARNING"/>
      </message>
    </class>
    <class NAME="DIA">
      <message NAME="NAV_INFO" ID="1">
        <field NAME="unix_time" TYPE="float"/>
        <field NAME="lat" TYPE="float" UNIT="deg"/>
        <field NAME="long" TYPE="float" UNIT="deg"/>
        <field NAME="alt" TYPE="uint16" UNIT="m"/>
        <field NAME="course" TYPE="uint16" UNIT="deg"/>
        <field NAME="speed" TYPE="uint16" UNIT="cm/s"/>
        <field NAME="cam_roll" TYPE="int16" UNIT="deg"/>
        <field NAME="cam_pitch" TYPE="int16" UNIT="deg"/>
      </message>
    </class>
  </protocol>
</configuration>